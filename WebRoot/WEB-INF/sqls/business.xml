<?xml version="1.0" encoding="GBK"?>
<sqls debug="false">




   <!-- 查询要停机的List -->

	<sql id="tingjiyonghu">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.UUID uuid
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xingming xingming
		,t.shenfenzheng shenfenzheng
		,t.shoujuhao shoujuhao
		,t.fenguangxianhao fenguangxianhao
		,t.jiexuweizhi jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.yewu yewu
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian	shoukuanshijian
		,t.createdt createdt
		,t.yunyingshang yunyingshang
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.weixiuleixing weixiuleixing
		,t.youxiaoshijian youxiaoshijian

		FROM yonghushuju t
		WHERE
	 	t.isuse = 0
	 	AND t.yonghuzhuangtai = '已安装'
	 	AND t.wangluo != ''
	 	AND t.wangluo != '0'
	 	AND t.youxiaoshijian = @youxiaoshijian
		]]>
	</sql>
   <!-- 查询要开机的List -->
	<sql id="kaijiyonghu">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.UUID uuid
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xingming xingming
		,t.shenfenzheng shenfenzheng
		,t.shoujuhao shoujuhao
		,t.fenguangxianhao fenguangxianhao
		,t.jiexuweizhi jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.yewu yewu
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian	shoukuanshijian
		,t.createdt createdt
		,t.yunyingshang yunyingshang
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.weixiuleixing weixiuleixing
		,t.youxiaoshijian youxiaoshijian
		FROM yonghushuju t
		WHERE
	 	t.isuse = 0
	 	AND t.yonghuzhuangtai = '已续费'

	 	AND t.wangluo != ''
	 	AND t.wangluo != '0'
	 	AND t.kaijishijian = @kaijishijian
		]]>
	</sql>






   <!-- 回单纠错-开票拆分update -->
   <sql id="chaifen_update">
        <![CDATA[
            update
                    huidandata h
             set
                     h.Lifecycle_sta=@lifecycle_sta
                    ,h.yonghuzhuangtai=@yonghuzhuangtai
                    ,h.shoujuhao=@shoujuhao
                    ,h.shoujubenhao=@shoujubenhao
                    ,h.createby=@createby
                    ,h.createdt=@createdt
                    ,h.zongshoufei=@zongshoufei
                    ,h.onuyj=@onuyj
                    ,h.jidingheyj=@jidingheyj
                    ,h.shoushifei=@shoushifei
                    ,h.kuandaifei=@kuandaifei
                    ,h.chuzhuangfei=@chuzhuangfei
                    ,h.shebeixiaoshou=@shebeixiaoshoufei
                    ,h.cailiaofei=@cailiaofei
                    ,h.bzygf=@bzygf
                    ,h.nianfei=@nianfei
             where
                    h.uuid=@uuid

		]]>
	</sql>
   <!-- 根据UUID查找用户状态 -->
   <sql id="yonghuzhuangtai">
        <![CDATA[
             select
                   h.yonghuzhuangtai stats
             from
                   huidandata h
             where
                   h.uuid=@uuid
		]]>
	</sql>

   <!-- 退回回单的简单SQL -->
   <sql id="tuihui">
        <![CDATA[
             UPDATE
                    huidandata
             SET
                   uuid=@uuid
                   [,Lifecycle_sta=@lifecycle_sta]
                   [,createby=@createby]
                   [,createdt=@createdt]
                   [,yonghuzhuangtai=@yonghuzhuangtai]
             WHERE
                   uuid=@uuid
		]]>
	</sql>

   <!-- 正常提交回单信息的sql -->
   <sql id="zhengcheng_update">
        <![CDATA[
             UPDATE
                    huidandata
             SET
                   uuid=@uuid
                   [,Lifecycle_sta=@lifecycle_sta]
                   [,kaijishijian=@kaijishijian]
                   [,tingjishijian=@tingjishijian]
                   [,xiaoqu=@xiaoqu]
                   [,lianxidianhua=@lianxidianhua]
                   [,wangluo=@wangluo]
                   [,dianshi=@dianshi]
                   [,dianhua=@dianhua]
                   [,fenguang=@fenguang]
                   [,onumac=@onumac]
                   [,stbmcid=@stbmcid]
                   [,dianshiip=@dianshiip]
                   [,dianhuaip=@dianhuaip]
                   [,wangluoip=@wangluoip]
                   [,dianhuavlan=@dianhuavlan]
                   [,wangluovlan=@wangluovlan]
                   [,shangmenshijian=@shangmenshijian]
                   [,danzheng=@danzheng]
                   [,sxdhhm=@sxdhhm]
                   [,onuyj=@onuyj]
                   [,jidingheyj=@jidingheyj]
                   [,shoushifei=@shoushifei]
                   [,kuandaifei=@kuandaifei]
                   [,chuzhuangfei=@chuzhuangfei]
                   [,yunyingshang=@yunyingshang]
                   [,bzygf=@bzygf]
                   [,nianfei=@nianfei]
                   [,beizhu=@beizhu]
                   [,beizhuhuizong=@beizhuhuizong]
                   [,shebeixiaoshou=@shebeixiaoshou]
                   [,cailiaofei=@cailiaofei]
                   [,updateby=@updateby]
                   [,updatedt=@updatedt]
                   [,yonghuzhuangtai=@yonghuzhuangtai]
                   [,pipeizhuangtai=@pipeizhuangtai]
                   [,yewu=@yewu]
                   [,shigongren=@shigongren]
                   [,shoukuanshijian=@shoukuanshijian]
                   [,xingming=@xingming]
                   [,shenfenzheng=@shenfenzheng]
                   [,fenguangxianhao=@fenguangxianhao]
                   [,jiexuweizhi=@jiexuweizhi]
                   [,zongshoufei=@zongshoufei]
                   [,shoujubenhao=@shoujubenhao]
                   [,kaipiaoxinxi=@kaipiaoxinxi]
                   [,qtsbsyqk=@qtsbsyqk]
                   [,qitahaocai=@qitahaocai]
                   [,jiexianzi=@jiexianzi]
                   [,rj11=@rj11]
                   [,rj45=@rj45]
                   [,mokuai=@mokuai]
                   [,mianban=@mianban]
                   [,wangxian=@wangxian]
                   [,xianchangbeizhu=@xianchangbeizhu]
                   [,shoujuhao=@shoujuhao]
             WHERE
                   uuid=@uuid
		]]>
	</sql>

	<!-- 更新uap信息 -->
	<sql id="uap_update">
        <![CDATA[
             UPDATE
                    user_account_product
             SET
                   userId=@userId
                   [,userName=@userName]
                   [,shenfenzheng=@shenfenzheng]

             WHERE
                   userId=@userId
		]]>
	</sql>

    <!-- 获取所有小区名 -->
	<sql id="getcode1">
	<![CDATA[
	SELECT
	      NAME xiaoqu
	FROM
	      xiaoqucode1
	]]>
	</sql>
	<!-- 删除数据库回单记录 -->
	<sql id="deleteHuidan">
	<![CDATA[
	        update
	                 huidandata h
	        set
	                 h.Lifecycle_sta = 1
	                 [,h.beizhu = @beizhu]
	                 [,h.updateby = @updateby]
	                 [,h.updatedt = @updatedt]
	        where
	                  uuid = @uuid

	]]>
	</sql>


	<!--查询回单的sql
	SELECT
                        dianhua        dianhua
                      , onuyj          onuyj
                      , jidingheyj     jidingheyj
                      , shoushifei     shoushifei
                      , kuandaifei     kuandaifei
                      , chuzhuangfei   chuzhuangfei
                      , yunyingshang   yunyingshang
                      , bzygf          bzygf
                      , nianfei        nianfei
                      , beizhu         beizhu
                      , shebeixiaoshou shebeixiaoshou
                      , cailiaofei     cailiaofei
            FROM
                      huidandata
	-->
	<sql id="huidanList">
        <![CDATA[
      SELECT
         t.UUID	                PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,DATE_FORMAT(t.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
		,t.xingming	            xingming
		,t.shenfenzheng	        shenfenzheng
		,t.shoujuhao	        shoujuhao
		,t.fenguangxianhao	    fenguangxianhao
		,t.jiexuweizhi	        jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu               xiaoqu
		,t.dizhi                dizhi
		,t.lianxidianhua        lianxidianhua
		,t.wangluo              wangluo
		,t.dianshi              dianshi
		,t.dianhua              dianhua
		,t.yewu                 yewu
		,t.fenguang             fenguang
		,t.onumac               onumac
		,t.stbmcid              stbmcid
		,t.dianshiip            dianshiip
		,t.wangluoip            wangluoip
		,t.dianhuaip            dianhuaip
		,t.dianhuavlan          dianhuavlan
		,t.wangluovlan 		 wangluovlan
		,t.shangmenshijian 	 shangmenshijian
		,t.danzheng 			 danzheng
		,t.sxdhhm 				 sxdhhm
		,t.onuyj				 onuyj
		,t.jidingheyj 			 jidingheyj
		,t.shoushifei 			 shoushifei
		,t.kuandaifei 			 kuandaifei
		,t.chuzhuangfei 		 chuzhuangfei
		,t.shebeixiaoshou 		 shebeixiaoshou
		,t.cailiaofei 			 cailiaofei
		,t.yunyingshang 		 yunyingshang
		,t.bzygf 				 bzygf
		,t.nianfei 			 nianfei
		,t.beizhu 				 beizhu
		,t.zongshoufei			 zongshoufei
		,t.shoujubenhao		 shoujubenhao
		,t.kaipiaoxinxi 		 kaipiaoxinxi
		,t.qtsbsyqk 			 qtsbsyqk
		,t.qitahaocai 			 qitahaocai
		,t.jiexianzi 			 jiexianzi
		,t.rj11 				 rj11
		,t.rj45 				 rj45
		,t.mokuai				 mokuai
		,t.mianban 			 mianban
		,t.wangxian 			 wangxian
		,t.shigongren 			 shigongren
		,t.xianchangbeizhu 	 xianchangbeizhu
		,t.beizhu               beizhu
		,t.beizhuhuizong 		 beizhuhuizong
		,t.biduikbn
		,t.bdfenguang
		,t.bdonumac
		,t.bdstbmcid
		,t.bddianshiip
		,t.yjfenguang
		,t.yjonumac
		,t.yjstbmcid
		,t.yjdianshiip
		,t.fenguangID
	FROM huidandata t
	where
	        1=1
	[AND t.UUID = @UUID]
	[AND t.yonghuzhuangtai = @yonghuzhuangtai]
	[AND t.Lifecycle_sta = @lifecycle_sta]
	[AND t.xiaoqu=@xiaoqu]
	[AND t.dizhi like @dizhi]
	[AND t.kaijishijian  BETWEEN @kaijishijian_b AND @kaijishijian_e]
	[AND t.tingjishijian  BETWEEN @tingjishijian_b AND @tingjishijian_e]
	[AND t.shoukuanshijian  BETWEEN @shoukuanshijian_b AND @shoukuanshijian_e]
		]]>
	</sql>

	<sql id="DaochuHuidan">
        <![CDATA[
      SELECT
         t.UUID	                PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,DATE_FORMAT(t.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
		,t.xingming	            xingming
		,t.shenfenzheng	        shenfenzheng
		,t.shoujuhao	        shoujuhao
		,t.fenguangxianhao	    fenguangxianhao
		,t.jiexuweizhi	        jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu               xiaoqu
		,t.dizhi                dizhi
		,t.lianxidianhua        lianxidianhua
		,t.wangluo              wangluo
		,t.dianshi              dianshi
		,t.dianhua              dianhua
		,t.yewu                 yewu
		,t.fenguang             fenguang
		,t.onumac               onumac
		,t.stbmcid              stbmcid
		,t.dianshiip            dianshiip
		,t.wangluoip            wangluoip
		,t.dianhuaip            dianhuaip
		,t.dianhuavlan          dianhuavlan
		,t.wangluovlan 		 wangluovlan
		,t.shangmenshijian 	 shangmenshijian
		,t.danzheng 			 danzheng
		,t.sxdhhm 				 sxdhhm
		,t.onuyj				 onuyj
		,t.jidingheyj 			 jidingheyj
		,t.shoushifei 			 shoushifei
		,t.kuandaifei 			 kuandaifei
		,t.chuzhuangfei 		 chuzhuangfei
		,t.shebeixiaoshou 		 shebeixiaoshou
		,t.cailiaofei 			 cailiaofei
		,t.yunyingshang 		 yunyingshang
		,t.bzygf 				 bzygf
		,t.nianfei 			 nianfei
		,t.beizhu 				 beizhu
		,t.zongshoufei			 zongshoufei
		,t.shoujubenhao		 shoujubenhao
		,t.kaipiaoxinxi 		 kaipiaoxinxi
		,t.qtsbsyqk 			 qtsbsyqk
		,t.qitahaocai 			 qitahaocai
		,t.jiexianzi 			 jiexianzi
		,t.rj11 				 rj11
		,t.rj45 				 rj45
		,t.mokuai				 mokuai
		,t.mianban 			 mianban
		,t.wangxian 			 wangxian
		,t.shigongren 			 shigongren
		,t.xianchangbeizhu 	 xianchangbeizhu
		,t.beizhu               beizhu
		,t.beizhuhuizong 		 beizhuhuizong
	FROM huidandata t
	where
	        1=1
	#
		]]>
	</sql>
	<!-- 更新huidan信息的sql -->
	<sql id="updateHuidan">
        <![CDATA[
             UPDATE
                    huidandata
             SET
                   uuid=@uuid
                   [,Lifecycle_sta=@lifecycle_sta]
                   [,kaijishijian=@kaijishijian]
                   [,tingjishijian=@tingjishijian]
                   [,youxiaoshijian=@youxiaoshijian]
                   [,xiaoqu=@xiaoqu]
                   [,lianxidianhua=@lianxidianhua]
                   [,wangluo=@wangluo]
                   [,dianshi=@dianshi]
                   [,dianhua=@dianhua]
                   [,fenguang=@fenguang]
                   [,onumac=@onumac]
                   [,stbmcid=@stbmcid]
                   [,dianshiip=@dianshiip]
                   [,dianhuaip=@dianhuaip]
                   [,wangluoip=@wangluoip]
                   [,dianhuavlan=@dianhuavlan]
                   [,wangluovlan=@wangluovlan]
                   [,shangmenshijian=@shangmenshijian]
                   [,danzheng=@danzheng]
                   [,sxdhhm=@sxdhhm]
                   [,onuyj=@onuyj]
                   [,jidingheyj=@jidingheyj]
                   [,shoushifei=@shoushifei]
                   [,kuandaifei=@kuandaifei]
                   [,chuzhuangfei=@chuzhuangfei]
                   [,yunyingshang=@yunyingshang]
                   [,bzygf=@bzygf]
                   [,nianfei=@nianfei]
                   [,beizhu=@beizhu]
                   [,beizhuhuizong=CONCAT(IFNULL(beizhuhuizong,''),@beizhuhuizong)]
                   [,beizhuhuizong=@beizhuhuizong1]
                   [,shebeixiaoshou=@shebeixiaoshou]
                   [,cailiaofei=@cailiaofei]
                   [,updateby=@updateby]
                   [,updatedt=@updatedt]
                   [,yonghuzhuangtai=@yonghuzhuangtai]
                   [,pipeizhuangtai=@pipeizhuangtai]
                   [,yewu=@yewu]
                   [,shigongren=@shigongren]
                   [,shoukuanshijian=@shoukuanshijian]
                   [,xingming=@xingming]
                   [,shenfenzheng=@shenfenzheng]
                   [,fenguangxianhao=@fenguangxianhao]
                   [,jiexuweizhi=@jiexuweizhi]
                   [,zongshoufei=@zongshoufei]
                   [,shoujubenhao=@shoujubenhao]
                   [,kaipiaoxinxi=@kaipiaoxinxi]
                   [,qtsbsyqk=@qtsbsyqk]
                   [,qitahaocai=@qitahaocai]
                   [,jiexianzi=@jiexianzi]
                   [,rj11=@rj11]
                   [,rj45=@rj45]
                   [,mokuai=@mokuai]
                   [,mianban=@mianban]
                   [,wangxian=@wangxian]
                   [,xianchangbeizhu=@xianchangbeizhu]
                   [,dizhi=@dizhi]
                   [,userId=@userId]
             WHERE
                   uuid=@uuid
		]]>
	</sql>
	<!-- 更新product信息的sql -->
	<sql id="updateProduct">
        <![CDATA[
             UPDATE
                    product
             SET
                    EqState=@eqstate
                   ,EqBoxNum=@eqboxnum
                   ,EqInTime=@eqintime
                   ,EqInPerson=@eqinperson
                   ,EqType=@eqtype
                   ,EqVersion=@eqversion
                   ,EqRegister=@EqRegister
                   ,EqMAC=@eqmac
                   ,EqMCID=@eqmcid
                   ,EqIp=@EqIp
                   ,EqRemark=@eqremark
                   ,Update_person=@update_person
                   ,Update_time=@update_time

             WHERE
                   Product_ID=@product_id
		]]>
	</sql>
	<!-- 查找运维部工作人员的sql -->
	<sql id="FindYunwei">
        <![CDATA[

            SELECT
                         u.Job_ID	    MODULE_KEY
				        ,u.NAME      	MODULE_VALUE
		    FROM
		                userinfo u,dept d

		    WHERE
		                d.Dept_ID = u.Dept_ID
            AND
                       d.Dept_ID=11
		]]>
	</sql>
	<!--查找单条huidanForm的sql -->
	<sql id="getHuidanFormById">
        <![CDATA[
			SELECT
			       h.uuid uuid
			      ,h.yonghuzhuangtai yonghuzhuangtai
			      ,h.xingming xingming
			      ,h.shenfenzheng shenfenzheng
			      ,h.shoujuhao shoujuhao
			      ,h.fenguangxianhao fenguangxianhao
			      ,h.jiexuweizhi jiexuweizhi
			      ,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
			      ,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
			      ,h.xiaoqu xiaoqu
			      ,h.dizhi dizhi
			      ,h.lianxidianhua lianxidianhua
			      ,h.wangluo wangluo
			      ,h.dianshi dianshi
			      ,h.dianhua dianhua
			      ,h.yewu yewu
			      ,h.fenguang fenguang
			      ,h.onumac onumac
			      ,h.stbmcid stbmcid
			      ,h.dianshiip dianshiip
			      ,h.wangluoip wangluoip
			      ,h.dianhuaip dianhuaip
			      ,h.dianhuavlan dianhuavlan
			      ,h.wangluovlan wangluovlan
			      ,h.shangmenshijian shangmenshijian
			      ,h.danzheng danzheng
			      ,h.sxdhhm sxdhhm
			      ,h.onuyj onuyj
			      ,h.jidingheyj jidingheyj
			      ,h.shoushifei shoushifei
			      ,h.kuandaifei kuandaifei
			      ,h.chuzhuangfei chuzhuangfei
			      ,h.yunyingshang yunyingshang
			      ,h.bzygf bzygf
			      ,h.nianfei nianfei
			      ,h.beizhu beizhu
			      ,h.zongshoufei zongshoufei
			      ,h.shoujubenhao shoujubenhao
			      ,h.qtsbsyqk qtsbsyqk
			      ,h.qitahaocai qitahaocai
			      ,h.jiexianzi jiexianzi
 			      ,h.rj11 rj11
			      ,h.rj45 rj45
			      ,h.mokuai mokuai
			      ,h.mianban mianban
			      ,h.wangxian wangxian
			      ,h.shigongren shigongren
			      ,h.xianchangbeizhu xianchangbeizhu
			      ,h.beizhuhuizong beizhuhuizong
			      ,h.shebeixiaoshou shebeixiaoshou
			      ,h.cailiaofei cailiaofei
			      ,h.kaipiaoxinxi kaipiaoxinxi
			      ,h.pipeizhuangtai pipeizhuangtai
			      ,DATE_FORMAT(h.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
                  ,h.heduibeizhu
                  ,h.youxiaoshijian
                  ,h.userId
                  ,h.shichangbeishu
                  ,h.yewutype
                  ,h.biduikbn
                  ,h.bdfenguang
                  ,h.bdonumac
                  ,h.bdstbmcid
                  ,h.bddianshiip
                  ,h.fenguangID
                  ,h.yjfenguang
                  ,h.yjonumac
                  ,h.yjstbmcid
                  ,h.yjdianshiip
                  ,h.CommunityPile_ID
                  ,h.CommunityPile_ID2
            FROM
                  huidandata h
            WHERE
                  uuid=@uuid

		]]>
	</sql>

	<!--查找单条form的sql -->
	<sql id="getKucunform_ByID">
        <![CDATA[
			SELECT
                    p.Product_ID    product_id
                   ,e.EqSta_Name    eqsta_name
                   ,p.EqBoxNum      eqboxnum
                   ,DATE_FORMAT(p.EqInTime,'%Y-%m-%d')      eqintime
                   ,u.Name          eqinperson
                   ,p.EqType        eqtype
                   ,p.EqVersion     eqversion
                   ,p.EqMAC         eqMAC
                   ,p.EqMCID        eqMCID
                   ,p.EqRegister    EqRegister
                   ,p.EqIp          eqIp
                   ,p.EqRemark      eqremark
                   ,u.Job_ID        Job_ID
          FROM
                  product p, eqsta e, userinfo u
          WHERE
                  e.EqSta_ID=p.EqState
          and
                  p.EqInPerson = u.Job_ID
		  and
				p.Product_ID = @Product_ID
		]]>
	</sql>

	<sql id="getAnZhuangKucunform_ByID">
        <![CDATA[
			SELECT
                    p.Product_ID    product_id
                   ,e.EqSta_Name    eqsta_name
                      ,e1.EqSta_Name    e1qsta_name
                   ,p.EqBoxNum      eqboxnum
                   ,DATE_FORMAT(p.EqInTime,'%Y-%m-%d')      eqintime
                   ,u.NAME          eqinperson
                   ,p.EqType        eqtype
                   ,p.EqVersion     eqversion
                   ,p.EqMAC         eqMAC
                   ,p.EqMCID        eqMCID
                   ,p.EqRemark      eqremark
                   ,p.EqRegister      EqRegister
                   ,p.EqIp            EqIp
                   ,u.Job_ID        Job_ID
				   ,c.EqSta_ID EqSta_ID
				   ,c.FirstEnterDate FirstEnterDate
				   ,c.Community_ID  Community_ID
				   ,c.Get_person Get_person
				   ,c.Install_site Install_site
				   ,c.Install_time Install_time
				   ,c.Remark Remark
          FROM
                  product p, eqsta e, userinfo u , communitypile c,eqsta e1
          WHERE
                  e.EqSta_ID=p.EqState
            AND   e1.EqSta_ID = c.EqSta_ID
	        AND   c.Product_ID = p.Product_ID
	        AND   p.EqInPerson = u.Job_ID
	        AND   p.Product_ID = @Product_ID
		]]>
	</sql>

	<!--设备入库的sql ,c.FirstEnterDate firstenterdate ,c.Community_ID community_id
		,c.Get_person get_person ,c.Install_site install_site ,c.Install_time install_time
		,c.EqRegister eqregister -->
	<sql id="GetshebeiDataList">
        <![CDATA[
			select
					 p.Product_ID	  PK_ID
					,p.EqState        eqstate
			        ,p.EqBoxNum       eqboxnum
			        ,e.EqSta_Name     eqsta_name
			        ,DATE_FORMAT(p.EqInTime,'%Y-%m-%d')      eqintime
			        ,u.NAME           eqinperson
			        ,p.EqType         eqtype
			        ,p.EqVersion      eqversion
			        ,p.EqMAC          eqmac
			        ,p.EqMCID         eqmcid
			        ,p.EqIp           eqip
			        ,p.EqRemark       eqremark
			        ,p.EqRegister       EqRegister


			from
					product p , eqsta e ,userinfo u
			where
					1=1
					AND p.EqState = e.EqSta_ID
					AND p.EqInPerson = u.Job_ID
					[AND p.EqState = @Status]
					[AND p.EqMAC LIKE @EqMAC]
					[AND p.EqMCID LIKE @EqMCID]
					[AND P.EqInTime >= @kaishi]
					[AND P.EqInTime <= @jieshu]
					[AND p.EqBoxNum LIKE @EqBoxNum]
					[AND e.EqSta_Name = @EqSta_Name]
					[AND u.NAME LIKE @NAME]
					[AND p.EqType LIKE @EqType]
					[AND p.EqVersion LIKE @EqVersion]
					[AND p.EqRegister LIKE @EqRegister]
					[AND p.EqIp LIKE @EqIp]
					[AND p.EqRemark LIKE @EqRemark]
					AND p.Lifecycle_sta = 0

		]]>
	</sql>

	<sql id="GetAnzhungKuDataList">
        <![CDATA[
			SELECT
					 C.CommunityPile_ID	  PK_ID
					,p.EqState        eqstate
			        ,p.EqBoxNum       eqboxnum
			        ,e.EqSta_Name     eqsta_name
			        ,DATE_FORMAT(p.EqInTime,'%Y-%m-%d')      create_time
			        ,u.NAME           create_person
			        ,p.EqType         eqtype
			        ,p.EqVersion      eqversion
			        ,p.EqMAC          eqmac
			        ,p.EqMCID         eqmcid
			        ,p.EqIp           eqip
			        ,c.Remark         eqremark
			        ,c.FirstEnterDate FirstEnterDate
					,cc.CommunityName CommunityName
					,u1.NAME          getPerson
					,c.Install_site   Install_site
					,c.Install_time   Install_time
			FROM
					communitypile c,product p , eqsta e ,userinfo u ,community cc ,userinfo u1
			WHERE
					c.Product_ID=P.Product_ID
					AND e.EqSta_ID = c.EqSta_ID
					AND p.EqInPerson = u.Job_ID
					AND c.Community_ID = cc.Community_ID
					AND c.Get_person = u1._ID
					[AND e.EQSTA_TYPE  = @EQSTA_TYPE]
		]]>
	</sql>
	<!-- 查询回单数量的sql -->
	<sql id="GetCount_huidan">
         <![CDATA[
			SELECT
					COUNT(*) CNT
			FROM
					huidandata t
		    WHERE
		               1=1
		               [AND t.yonghuzhuangtai=@yonghuzhuangtai]
	                   [AND t.Lifecycle_sta = @lifecycle_sta]
	                   [AND t.xiaoqu=@xiaoqu]
	                   [AND t.dizhi like @dizhi]
	                   [AND t.kaijishijian  BETWEEN @kaijishijian_b AND @kaijishijian_e]
	                   [AND t.tingjishijian  BETWEEN @tingjishijian_b AND @tingjishijian_e]
	                   [AND t.shoukuanshijian  BETWEEN @shoukuanshijian_b AND @shoukuanshijian_e]
		]]>
	</sql>

    <!-- 设备数量的sql -->
    <sql id="GetCount">
         <![CDATA[
			SELECT
					COUNT(*) CNT
			FROM
					product p, eqsta e ,userinfo u
			WHERE
			         p.EqState = e.EqSta_ID
					[AND p.EqInPerson = u.Job_ID]
					[AND p.EqState = @Status]
					[AND p.EqMAC LIKE @EqMAC]
					[AND p.EqMCID LIKE @EqMCID]
					[AND P.EqInTime >= @kaishi]
					[AND P.EqInTime <= @jieshu]
					[AND p.EqBoxNum LIKE @EqBoxNum]
					[AND e.EqSta_Name = @EqSta_Name]
					[AND u.NAME LIKE @NAME]
					[AND p.EqType LIKE @EqType]
					[AND p.EqVersion LIKE @EqVersion]
					[AND p.EqRegister LIKE @EqRegister]
					[AND p.EqIp LIKE @EqIp]
					[AND p.EqRemark LIKE @EqRemark]
					AND p.Lifecycle_sta = 0
		]]>

	</sql>



	<!-- 设备chuku数量的sql -->
	<sql id="GetAnzhuangCount">
         <![CDATA[
			SELECT
					COUNT(*) CNT
			FROM
					communitypile C,product p , eqsta e ,userinfo u ,userinfo u1
			WHERE
					C.Product_ID=P.Product_ID
					AND E.EqSta_ID = C.EqSta_ID
					AND p.EqInPerson = u.Job_ID
					AND c.Get_person = u1._ID
					[AND E.EqSta_Type = @EqSta_Type]
					[AND C.CommunityPile_ID = @CommunityPile_ID]
					[AND C.EqSta_ID = @EqSta_ID]
					[AND C.Community_ID = @Community_ID]
					[AND c.Install_site LIKE @Install_site]
					[AND p.EqMAC LIKE @EqMAC]
					[AND p.EqMCID LIKE @EqMCID]
					[AND P.EqInTime >= @kaishi1]
					[AND P.EqInTime <= @jieshu1]
					[AND c.FirstEnterDate >= @kaishi2]
					[AND c.FirstEnterDate <= @jieshu2]
					[AND c.install_time >= @kaishi3]
					[AND c.install_time <= @jieshu3]
					[AND p.EqBoxNum LIKE @EqBoxNum]
					[AND u.Name LIKE @rukuren]
					[AND p.EqType LIKE @EqType]
					[AND p.EqVersion LIKE @EqVersion]
					[AND p.EqRegister LIKE @EqRegister]
					[AND u1.Name LIKE @Lingquren]
					[AND p.EqIp LIKE @EqIp]
					[AND c.Remark  LIKE @EqRemark]
		]]>
	</sql>


	<sql id="LoadEmployee">
		<![CDATA[
			SELECT
					A.employeeId		ID
				   ,A.employeeName		NAME
				   ,A.employeePassword	PASSWORD
				   ,A.departmentId		DEPT_ID
				   ,A.roleId			ROLE_ID
			FROM
					Employee A
			WHERE
					A.employeeId = @employeeId
			AND  A.employeePassword = @employeePassword
		]]>
	</sql>
	<sql id="LoadMainInfo">
		<![CDATA[
			SELECT
					A.employeeId		ID
				   ,A.employeeName		NAME
				   ,A.departmentId		DEPT_ID
				   ,A.roleId			ROLE_ID
				   ,c.roleName			ROLE_Name
				  -- ,B.departmentName	DEPT_NAME
			FROM
					Employee A
					left join Role C on a.roleId = C.roleId
					   -- LEFT JOIN Department B on A.departmentId = B.departmentId
			WHERE
					A.employeeId = @employeeId
		]]>
	</sql>
	<sql id="IsActivePassword">
		<![CDATA[
			SELECT
					COUNT(*) CNT
			FROM
					Employee A
			WHERE
					A.employeeId = @employeeId
			AND  A.employeePassword = @employeePassword
		]]>
	</sql>
	<sql id="ChangePassword">
		<![CDATA[
			UPDATE Employee SET employeePassword = @employeePassword WHERE employeeId = @employeeId
		]]>
	</sql>
	<sql id="GetDepartmentSource">
		<![CDATA[
			SELECT
				    A.departmentId			MODULE_KEY
				   ,A.departmentName		MODULE_VALUE
			FROM
					Department A
			WHERE
					A.departmentId LIKE @departmentId
		]]>
	</sql>

	<sql id="GetDepartmentResult">
		<![CDATA[
			SELECT
				    A.departmentId			PK_ID
				   ,A.departmentName		DEPT_NAME
			FROM
					Department A
			WHERE
					 1=1
			[AND  A.departmentId LIKE @departmentId]
			[AND  A.departmentName LIKE @departmentName]
		]]>
	</sql>
	<sql id="GetAllDepartments">
		<![CDATA[
			SELECT
				    A.departmentId			MODULE_KEY
				   ,A.departmentName		MODULE_VALUE
			FROM
					Department A
		]]>
	</sql>

	<sql id="GetDepartmentResultCount">
		<![CDATA[
			SELECT
				    COUNT(*) CNT
			FROM
					Department A
			WHERE
					 1=1
			[AND  A.departmentId LIKE @departmentId]
			[AND  A.departmentName LIKE @departmentName]
		]]>
	</sql>
	<sql id="GetDepartmentById">
		<![CDATA[
			SELECT
				    A.departmentId			PK_ID
				   ,A.departmentName		DEPT_NAME
			FROM
					Department A
			WHERE
			        A.departmentId = @departmentId
		]]>
	</sql>
	<sql id="UpdateDepartment">
		<![CDATA[
			UPDATE Department SET departmentName = @departmentName WHERE departmentId = @departmentId
		]]>
	</sql>
	<sql id="DeleteDepartmentById">
		<![CDATA[
			DELETE FROM
					Department
			WHERE
			        departmentId = @departmentId
		]]>
	</sql>
	<sql id="GetNewDepartmentId">
		<![CDATA[
			SELECT ID ID FROM DepartmentCodeBuilder WHERE uuid = @uuid
		]]>
	</sql>
	<sql id="GetEmployeeResult">
		<![CDATA[
			SELECT
			 		A.employeeId				PK_ID
				   ,A.employeeName				EMP_NAME
				   ,A.departmentId				DEPT_ID
				   ,A.roleId					ROLE_ID
				   ,C.roleName					ROLE_NAME
				   ,A.employeePassword			employeePassword
			FROM
					Employee A
				   ,Role C
			WHERE
			  A.roleId = C.roleId
			  AND c.roleId <> '5'
			[AND  A.employeeId LIKE @employeeId]
			[AND  A.employeeName LIKE @employeeName]
			[AND  A.roleId = @roleId]
			order by c.roleId
		]]>
	</sql>
	<sql id="GetEmployeeResultCount">
		<![CDATA[
			SELECT
				    COUNT(*) CNT
			FROM
					Employee A
				   ,Role C
			WHERE

			  A.roleId = C.roleId
			  AND c.roleId <> '5'
			[AND  A.employeeId LIKE @employeeId]
			[AND  A.employeeName LIKE @employeeName]

			[AND  A.roleId = @roleId]
		]]>
	</sql>

	<sql id="GetEmployeeById">
		<![CDATA[
			SELECT
				    A.employeeId			PK_ID
				   ,A.employeeName			EMP_NAME
				   ,A.employeePassword				employeePassword

				   ,A.RoleId				ROLE_ID
			FROM
					Employee A

			WHERE
			        A.employeeId = @employeeId

		]]>
	</sql>
	<sql id="UpdateEmployee">
		<![CDATA[
			UPDATE Employee
			SET 	employeeName = @employeeName
					,RoleId = @RoleId
					WHERE employeeId = @employeeId
		]]>
	</sql>
	<sql id="DeleteEmployeeById">
		<![CDATA[
			DELETE FROM
					Employee
			WHERE
			        employeeId = @employeeId
		]]>
	</sql>
	<sql id="GetNewEmployeeId">
		<![CDATA[
			SELECT ID ID FROM EmployeeCodeBuilder WHERE uuid = @uuid
		]]>
	</sql>
	<sql id="GetEmployeeSource">
		<![CDATA[
			SELECT
				    A.employeeId			MODULE_KEY
				   ,A.employeeName			MODULE_VALUE
			FROM
					Employee A
			WHERE
					A.employeeId LIKE @employeeId
		]]>
	</sql>
	<sql id="GetQuyuList">
		<![CDATA[
				SELECT
				    d.District_ID			MODULE_KEY
				   ,d.District_Name			MODULE_VALUE
			FROM
					district d
		]]>
	</sql>
	<sql id="GetKuFangList">
		<![CDATA[
				SELECT
				    d.UUID			MODULE_KEY
				   ,d.store_name			MODULE_VALUE
			FROM
					store1 d
			WHERE delete_flag = '0'
			ORDER BY sort
		]]>
	</sql>
	<sql id="UpdateEmployeeRole">
		<![CDATA[
			UPDATE Employee SET roleId = @roleId WHERE employeeId = @employeeId
		]]>
	</sql>
	<sql id="GetAllRoles">
		<![CDATA[
			SELECT
				    A.roleId			MODULE_KEY
				   ,A.roleName			MODULE_VALUE
			FROM
					Role A
			WHERE
					A.roleId <> 5
		]]>
	</sql>
	<sql id="UpdateEmployeePassword">
		<![CDATA[
			UPDATE Employee SET employeePassword = @employeePassword WHERE employeeId = @employeeId
		]]>
	</sql>
	<sql id="DeleteBatchByBatchId">
		<![CDATA[
			DELETE FROM Batch WHERE batchId = @batchId
		]]>
	</sql>
	<sql id="DeleteBusinessDataByBatchId">
		<![CDATA[
			DELETE FROM BusinessData WHERE batchId = @batchId
		]]>
	</sql>
	<sql id="DeleteMoonBatchById">
		<![CDATA[
			DELETE FROM MoonBatch WHERE batchId = @batchId
		]]>
	</sql>
	<sql id="DeleteMoonById">
		<![CDATA[
			DELETE FROM MoonBusData WHERE batchId = @batchId
		]]>
	</sql>
	<sql id="GetBatchByUser">
		<![CDATA[
			SELECT batchId BAT_ID FROM Batch WHERE createUser = @createUser
		]]>
	</sql>


	<sql id="GetEquipListByQR">
		<![CDATA[
		SELECT t.UUID		PK_ID
		,t.TYPE		TYPE
		,t.xianghao	xianghao
		,DATE_FORMAT(t.rukudate,'%Y-%m-%d')	rukudate
		,t.state	state
		,t.rukuperson	rukuperson
		,t.xinghao	xinghao
		,t.mac		mac
		,t.zhucejifang	zhucejifang
		,t.TVip		tvip
		,DATE_FORMAT(t.chukudate,'%Y-%m-%d')	chukudate
		,t.chukuplace	chukuplace
		,t.lingquren	lingquren
		,t.anzhuangplace	anzhuangplace
		,t.beizhu	beizhu
		,t.createdt	createdt
		,t.updatedt	updatedt
		,s.NAME		statename
	FROM equipmentstock t LEFT JOIN equipstate s ON t.state = s.CODE
	WHERE t.state in ('2','5')
--	t.state<>'3'
	[AND t.type LIKE @type]
	[AND t.state = @state]
	[AND t.xinghao LIKE @xinghao]
	[AND t.mac LIKE @mac]
	[AND t.xianghao LIKE @xianghao]
	order by t.createdt desc
		]]>
	</sql>

	<sql id="GetEquipListCountByQR">
		<![CDATA[
		SELECT COUNT(*) 	CNT

		FROM equipmentstock t
		WHERE t.state in ('2','5')
	--	t.state<>'3'
		[AND t.type LIKE @type]
		[AND t.state = @state]
		[AND t.xinghao LIKE @xinghao]
		[AND t.mac LIKE @mac]
		[AND t.xianghao LIKE @xianghao]
		]]>
	</sql>






	<sql id="GetEquipList">
		<![CDATA[
		SELECT t.UUID		PK_ID
		,t.TYPE		TYPE
		,t.xianghao	xianghao
		,DATE_FORMAT(t.rukudate,'%Y-%m-%d')	rukudate
		,t.state	state
		,t.rukuperson	rukuperson
		,t.xinghao	xinghao
		,t.mac		mac
		,t.zhucejifang	zhucejifang
		,t.TVip		tvip
		,DATE_FORMAT(t.chukudate,'%Y-%m-%d')	chukudate
		,t.chukuplace	chukuplace
		,t.lingquren	lingquren
		,t.anzhuangplace	anzhuangplace
		,t.beizhu	beizhu
		,t.createdt	createdt
		,t.updatedt	updatedt
		,s.NAME		statename
	FROM equipmentstock t LEFT JOIN equipstate s ON t.state = s.CODE
	WHERE 1=1
--	t.state<>'3'
	[AND t.type LIKE @type]
	[AND t.state = @state]
	[AND t.xinghao LIKE @xinghao]
	[AND t.mac LIKE @mac]
	[AND t.xianghao LIKE @xianghao]
	[AND t.chukuplace=@chukuplace]
	order by t.createdt ,t.chukuplace,t.xianghao
		]]>
	</sql>

	<sql id="GetEquipListCount">
		<![CDATA[
		SELECT COUNT(*) 	CNT

		FROM equipmentstock t
		WHERE 1=1
	--	t.state<>'3'
		[AND t.type LIKE @type]
		[AND t.state = @state]
		[AND t.xinghao LIKE @xinghao]
		[AND t.mac LIKE @mac]
		[AND t.xianghao LIKE @xianghao]
		[AND t.chukuplace=@chukuplace]
		]]>
	</sql>
	<!-- 根据UUID查询设备对象 -->
	<sql id="GetEquipById">
		<![CDATA[
		SELECT
		t.UUID				PK_ID
		,t.TYPE				TYPE
		,t.xianghao			xianghao
		,DATE_FORMAT(t.rukudate,'%Y-%m-%d')		rukudate
		,t.state			state
		,t.rukuperson		rukuperson
		,t.xinghao			xinghao
		,t.mac				mac
		,t.zhucejifang		zhucejifang
		,t.TVip				tvip
		,DATE_FORMAT(t.chukudate,'%Y-%m-%d')		chukudate
		,t.chukuplace		chukuplace
		,t.lingquren		lingquren
		,t.anzhuangplace	anzhuangplace
		,t.beizhu			beizhu
		,t.createdt			createdt
		,t.updatedt			updatedt

	FROM equipmentstock t
	WHERE t.UUID = @UUID

		]]>
	</sql>

	<!-- 根据Mac查询设备对象 -->
	<sql id="GetEquipByMac">
		<![CDATA[
		SELECT
		t.UUID				PK_ID
		,t.TYPE				TYPE
		,t.xianghao			xianghao
		,DATE_FORMAT(t.rukudate,'%Y-%m-%d')		rukudate
		,t.state			state
		,t.rukuperson		rukuperson
		,t.xinghao			xinghao
		,t.mac				mac
		,t.zhucejifang		zhucejifang
		,t.TVip				tvip
		,DATE_FORMAT(t.chukudate,'%Y-%m-%d')		chukudate
		,t.chukuplace		chukuplace
		,t.lingquren		lingquren
		,t.anzhuangplace	anzhuangplace
		,t.beizhu			beizhu
		,t.createdt			createdt
		,t.updatedt			updatedt

	FROM equipmentstock t
	WHERE t.mac = @mac

		]]>
	</sql>

	<!-- 更新设备 -->
	<sql id="updateEquipById">
		<![CDATA[
		UPDATE equipmentstock
		SET 	TYPE=@type,
				xinghao=@xinghao,
				xianghao=@xianghao,
				[rukuperson=@rukuperson,]
				[rukudate=@rukudate,]
				[mac=@mac,]
				[zhucejifang=@zhucejifang,]
				[tvip=@tvip,]
				[beizhu=@beizhu,]
				updatedt=@updatedt

		WHERE UUID = @UUID
		]]>
	</sql>
	<!-- 删除设备 -->
	<sql id="DeleteEquipById">
		<![CDATA[
		DELETE FROM equipmentstock WHERE UUID = @UUID
		]]>
	</sql>

	<!-- 查询派工单LIST -->
	<sql id="GetPGDList">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.shenfenzheng shenfenzheng
		,t.xiaoquname	xiaoquname
		,t.tfkdnianxian	tfkdnianxian
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.jiaohuanji   jiaohuanji
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,t.tfsfyewu			dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.tfsfyewu
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.shebeixiaoshou		shebeixiaoshou
		,t.cailiaofei		cailiaofei
		,t.kaipiaoxinxi		kaipiaoxinxi
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,t.bdfenguang bdfenguang
		,t.bdonumac bdonumac
		,t.bdstbmcid bdstbmcid
		,t.bddianshiip bddianshiip
		,t.yjfenguang yjfenguang
		,t.yjonumac yjonumac
		,t.yjstbmcid yjstbmcid
		,t.yjdianshiip yjdianshiip
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby
		  ,DATE_FORMAT(t.tingjishijian,'%y%m%d') tingjishijian
		  ,t.yewutype yewuleixing
		  ,t.biduikbn
		  ,t.fenguangID
		  ,(CASE t.importstate WHEN '0' THEN '未提交'
			     ELSE '已提交'
				END)			importstate
	FROM paigongdan t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE 1=1
	[AND t.state!=@nostate]
	[AND t.state!=@nostate2]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.usertel =@usertel]
	[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
	[AND t.tfiptv <>@tfiptv]
	[AND t.qtye <>@qtye]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
	[AND t.importstate=@importstate]
	ORDER BY t.createdt desc ,t.xiaoquname
		]]>
	</sql>
<!-- 查询派工单LIST -->
	<sql id="GetPGDListExcel">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.shenfenzheng shenfenzheng
		,t.xiaoquname	xiaoquname
		,t.tfkdnianxian	tfkdnianxian
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%y%m%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.jiaohuanji   jiaohuanji
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.shebeixiaoshou		shebeixiaoshou
		,t.cailiaofei		cailiaofei
		,t.kaipiaoxinxi		kaipiaoxinxi
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby
		  ,DATE_FORMAT(t.tingjishijian,'%y%m%d') tingjishijian
		  ,t.yewutype yewuleixing
		  ,t.biduikbn
		  ,t.bdfenguang
		  ,t.bdonumac
		  ,t.bdstbmcid
		  ,t.bddianshiip
		  ,t.yjfenguang
		  ,t.yjonumac
		  ,t.yjstbmcid
		  ,t.yjdianshiip
		  ,t.tfsfyewu
		  ,DATE_FORMAT(t.newkaijishijian,'%y%m%d') newkaijishijian
		  ,DATE_FORMAT(t.newtingjishijian,'%y%m%d') newtingjishijian
	FROM paigongdan t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE 1=1
	[AND t.state!=@nostate]
	[AND t.state!=@nostate2]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.usertel =@usertel]
	[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
	[AND t.tfiptv <>@tfiptv]
	[AND t.qtye <>@qtye]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
	ORDER BY t.createdt desc ,t.xiaoquname
		]]>
	</sql>
	<!-- 查询派工单LIST -->
	<sql id="GetPGDListCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT

		FROM paigongdan t
		WHERE 1=1
		[AND t.state!=@nostate]
		[AND t.state!=@nostate2]
		[AND t.xiangmu!=@noxiangmu]
	--	[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
		[AND t.xiaoquname like @xiaoquname]
		[AND t.usertel =@usertel]
		[AND t.state =@state]
		[AND t.paigongriqi=@paigongriqi]
		[AND t.userplace=@userplace]
		[AND t.xiangmu=@xiangmu]
		[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
		[AND t.tfiptv <>@tfiptv]
		[AND t.qtye <>@qtye]
		[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
		[AND t.createby=@createby]
		[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
		[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
		[AND t.importstate=@importstate]
		]]>
	</sql>
	<!-- 查询出工单HistoryLIST -->
	<sql id="GetPGDHistoryList">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.xiaoquname	xiaoquname
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
	--	,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby
		  ,t.tuidanbeizhu	tuidanbeizhu
		  ,t.jiedanbeizhu	jiedanbeizhu
	FROM paigongdan t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE
	t.state in ('8','14')
	[AND t.state!=@nostate]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.usertel =@usertel]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND t.paigongriqi=@paigongriqi]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	ORDER BY t.createdt desc ,t.xiaoquname
		]]>
	</sql>
	<!-- 查询出工单HistoryLIST -->
	<sql id="GetPGDHistoryListCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT

		FROM paigongdan t
		WHERE
		t.state in ('8','14')
		[AND t.state!=@nostate]
		[AND t.xiangmu!=@noxiangmu]
	--	[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
		[AND t.xiaoquname like @xiaoquname]
		[AND t.usertel =@usertel]
		[AND t.state =@state]
		[AND t.paigongriqi=@paigongriqi]
		[AND t.userplace=@userplace]
		[AND t.xiangmu=@xiangmu]
		[AND t.paigongriqi=@paigongriqi]
		[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
		[AND t.createby=@createby]
		]]>
	</sql>

	<!-- 查询收件单HistoryLIST -->
	<sql id="GetQjHistoryList">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.xiaoquname	xiaoquname
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
	--	,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby

	FROM paigongdan t 	 JOIN paigongdanstate s ON t.state = s.CODE
	WHERE
	t.state in ('13','15')
	[AND t.state!=@nostate]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.usertel =@usertel]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND t.paigongriqi=@paigongriqi]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	ORDER BY t.createdt desc ,t.xiaoquname
		]]>
	</sql>
	<!-- 查询收件单HistoryLIST -->
	<sql id="GetQjHistorytCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT

		FROM paigongdan t  JOIN paigongdanstate s ON t.state = s.CODE
		WHERE
		t.state in ('13','15')
		[AND t.state!=@nostate]
		[AND t.xiangmu!=@noxiangmu]
	--	[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
		[AND t.xiaoquname like @xiaoquname]
		[AND t.usertel =@usertel]
		[AND t.state =@state]
		[AND t.paigongriqi=@paigongriqi]
		[AND t.userplace=@userplace]
		[AND t.xiangmu=@xiangmu]
		[AND t.paigongriqi=@paigongriqi]
		[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
		[AND t.createby=@createby]
		]]>
	</sql>

	<!-- 查询派工单LIST -->
	<sql id="GetPGDList1">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.xiaoquname	xiaoquname
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,t.OUMMAC		OUMMAC
		,t.STBMAC		STBMAC
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2


	FROM paigongdan t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE state in ('1','2','4')
	[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
	[AND t.xiaoquname like @xiaoquname]
	[AND t.usertel =@usertel]

	order by t.paigongriqi desc,t.xiaoquname
		]]>
	</sql>
	<!-- 查询派工单LIST -->
	<sql id="GetPGDListCount1">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT

		FROM paigongdan t
		WHERE state in ('1','2','4')
		[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
		[AND t.xiaoquname like @xiaoquname]
		[AND t.usertel =@usertel]
		]]>
	</sql>

	<!--根据uuid 查询派工单详情 -->
	<sql id="GetPGDByUUID">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.xiaoquname	xiaoquname
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,t.importstate		importstate
		,t.OUMMAC		OUMMAC
		,t.STBMAC		STBMAC
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi

		,t.anzhuangshijian	anzhuangshijian
		,t.xiangmu		xiangmu
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfkdnianxian		tfkdnianxian
		,t.tfiptv		tfiptv
		,t.tfiptvnianxian	tfiptvnianxian
		,t.qtye			qtye
		,t.fufei		fufei
		,t.tfsfyewu		tfsfyewu
		,t.telhaoma1		telhaoma1
		,t.telhaoma2		telhaoma2
		,t.dxfandan		dxfandan
		,t.zhengjian		zhengjian
		,t.shoushifei		shoushifei
		,t.nianfei		nianfei
		,t.buzuyue		buzuyue
		,t.chuzhuangfei		chuzhuangfei
		,t.kuaidaifei		kuaidaifei
		,t.tfkdczf			tfkdczf
		,t.tfkuandaifei		tfkuandaifei
		,t.tfiptvshoushifei	tfiptvshoushifei
		,t.tfjidingheyajin	tfjidingheyajin
		,t.yuyingshang		yuyingshang
		,t.qtbuzuyue		qtbuzuyue
		,t.heji				heji
		,t.username			username
		,t.shenfenzheng			shenfenzheng
		,t.dxchuzhuangfei	dxchuzhuangfei
		,t.jiaohuanji		jiaohuanji
		,telhaoma3			telhaoma3
		,telhaoma4			telhaoma4
		,tvzhidingnum		tvzhidingnum
		,onuzhiding			onuzhiding
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.fufeitype	fufeitype
		,t.shebeixiaoshou	shebeixiaoshou
		,t.cailiaofei	cailiaofei
		,t.kaipiaoxinxi	kaipiaoxinxi
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,t.CommunityPile_ID CommunityPile_ID
		,t.CommunityPile_ID2 CommunityPile_ID2
		,t.biduikbn
		,t.bddianshiip
		,t.bdfenguang
		,t.bdonumac
		,t.bdstbmcid
		,t.fenguangID
		,t.shichangbeishu
		,t.yewutype
		,DATE_FORMAT(t.newkaijishijian,'%Y-%m-%d')	newkaijishijian
		,DATE_FORMAT(t.newtingjishijian,'%Y-%m-%d')	newtingjishijian
		,t.yjdianshiip
		,t.yjfenguang
		,t.yjonumac
		,t.yjstbmcid
		FROM paigongdan t
		WHERE
		t.UUID = @UUID
		]]>
	</sql>

	 <!-- 查询选号是否存在 -->
    <sql id="CheckXuanHao">
         <![CDATA[
			SELECT
					t.telno telno
				   ,t.state state
			FROM
					telnumber t
			WHERE
					t.telno = @telno
		]]>
	</sql>

	<!--跟新派工单信息 -->
	<sql id="updatePGDById">
		<![CDATA[
		UPDATE 	paigongdan
		SET		xiaoquname=@xiaoquname
				[,userplace=@userplace]
				[,usertel=@usertel]
				[,onu=@onu]
				[,jidinghe=@jidinghe]
				[,beizhu=@beizhu]
				[,paigongriqi=@paigongriqi]

				[,anzhuangshijian=@anzhuangshijian]
				[,xiangmu=@xiangmu]
				[,tfkuandaidaikuan=@tfkuandaidaikuan]
				[,tfkdnianxian=@tfkdnianxian]
				[,tfiptv=@tfiptv]
				[,tfiptvnianxian=@tfiptvnianxian]
				[,tfsfyewu=@tfsfyewu]
				[,fufei=@fufei]
				[,telhaoma1=@telhaoma1]
				[,telhaoma2=@telhaoma2]
				[,dxfandan=@dxfandan]
				[,zhengjian=@zhengjian]
				[,shoushifei=@shoushifei]
				[,nianfei=@nianfei]
				[,buzuyue=@buzuyue]
				[,chuzhuangfei=@chuzhuangfei]
				[,kuaidaifei=@kuaidaifei]
				[,shebeixiaoshou=@shebeixiaoshou]
				[,cailiaofei=@cailiaofei]
				[,kaipiaoxinxi=@kaipiaoxinxi]

				[,tfkdczf=@tfkdczf]
				[,tfkuandaifei=@tfkuandaifei]
				[,tfiptvshoushifei=@tfiptvshoushifei]
				[,tfjidingheyajin=@tfjidingheyajin]
				[,yuyingshang=@yuyingshang]
				[,qtbuzuyue=@qtbuzuyue]
				[,heji=@heji]
				[,username=@username]
				[,dxchuzhuangfei=@dxchuzhuangfei]
				[,jiaohuanji=@jiaohuanji]
				[,telhaoma4=@telhaoma4]
				[,telhaoma3=@telhaoma3]
				[,onuzhiding=@onuzhiding]
				[,fufeitype=@fufeitype]
				[,fenguangD=@fenguangD]
				[,onumacD=@onumacD]
				[,stbmcidD=@stbmcidD]
				[,dianshiipD=@dianshiipD]
				[,CommunityPile_ID=@CommunityPile_ID]
				[,CommunityPile_ID2=@CommunityPile_ID2]
				[,bdfenguang=@bdfenguang]
				[,bdonumac=@bdonumac]
				[,bdstbmcid=@bdstbmcid]
				[,bddianshiip=@bddianshiip]
				[,biduikbn=@biduikbn]
				[,shichangbeishu=@shichangbeishu]
				[,newkaijishijian=@newkaijishijian]
				[,newtingjishijian=@newtingjishijian]
				,updatedt=@updatedt
		WHERE UUID=@UUID
		]]>
	</sql>

	<sql id="DeletePGDById">
		<![CDATA[
		DELETE FROM paigongdan WHERE UUID = @UUID
		]]>
	</sql>
	<!-- 出库确认 -->
	<sql id="updateEquipQuKuById">
		<![CDATA[
		UPDATE equipmentstock
		SET 	state=@state,
				updatedt=@updatedt
		WHERE UUID = @UUID
		]]>
	</sql>

	<!-- 根据UUID查询派工单其他信息（IP等） -->
	<sql id="getPgdOtherByUUID">
		<![CDATA[
			SELECT
				t.UUID			PK_ID
				,t.state		state
				,t.OUMMAC		OUMMAC
				,t.STBMAC		STBMAC
				,t.tvip			tvip
				,t.netip		netip
				,t.telip		telip
				,t.telvaln		telvaln
				,t.netvaln		netvaln
				,t.fenguang		fenguang
				,t.yewu			yewu
				,t.xiaoquname	xiaoquname
				,t.userplace	userplace
				,t.kuandai		kuandai
				,t.tv			tv
				,t.tel			tel
				,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
				,t.tfkuandaidaikuan	tfkuandaidaikuan
				,t.tfiptv		tfiptv
				,t.qtye			qtye
			FROM paigongdan t
			WHERE UUID=@UUID
		]]>
	</sql>
	<sql id="updatePGDIPById">
		<![CDATA[
		UPDATE paigongdan
		SET
		xiaoquname=@xiaoquname
		,state=@state
		[,tvip=@tvip]
		[,netip=@netip]
		[,telip=@telip]
		[,telvaln=@telvaln]
		[,netvaln=@netvaln]
		[,fenguang=@fenguang]
		[,yewu=@yewu]
		,updatedt=@updatedt
	WHERE UUID=@UUID

		]]>
	</sql>

	<!-- 绑定ONU -->
	<sql id="updateONUMAC">
		<![CDATA[
		update paigongdan
		set
			OUMMAC =@OUMMAC
			,state=@state
			,onuzhiding=@onuzhiding
		where UUID =@UUID
	]]>
	</sql>

	<!-- 绑定 jidinghe -->
	<sql id="updateSTBMAC">
		<![CDATA[
		update paigongdan
		set
			STBMAC =@STBMAC
			,state=@state
			,tvzhidingnum=@tvzhidingnum
		where UUID =@UUID
	]]>
	</sql>
	<!-- 更新绑定后的设备状态 -->
	<sql id="updateEQPstate">
		<![CDATA[
		update equipmentstock
		set
			state =@state
			,chukudate=@chukudate
			,anzhuangplace=@anzhuangplace
		where UUID =@UUID
	]]>
	</sql>
	<!-- 将派工单状态 ‘2’ 已指定 -->
	<sql id="updatePGDstateto2">
		<![CDATA[
		update paigongdan
		set
			state =@state
		where UUID =@UUID
	]]>
	</sql>
	<!-- 移库操作 -->
	<sql id="yiku">
		<![CDATA[
		update equipmentstock
		set
			chukuplace = @chukuplace
		where UUID =@UUID
	]]>
	</sql>
	<!-- 派工单解除绑定操作 -->
	<sql id="jiebang">
		<![CDATA[
		update paigongdan
		set
			state = @state
			,OUMMAC=NULL
			,STBMAC=NULL
		where UUID =@UUID
	]]>
	</sql>
	<!-- 设备解除绑定用 -->
	<sql id="updateEquSTATE">
		<![CDATA[
		update equipmentstock
		set
			state = @state
		where mac =@mac
	]]>
	</sql>

	<!-- 查询所有小区列表 -->
	<sql id="getXiaoQuCodeAll">
		<![CDATA[
		SELECT t.NAME	MODULE_KEY
				,t.NAME	MODULE_VALUE
		FROM xiaoqucode1 t
		order by t.seq
	]]>
	</sql>

	<!-- 查询所有时长列表 -->
	<sql id="getShichangAll">
		<![CDATA[
		SELECT   t.shichangName	MODULE_KEY
				,t.shichangName	MODULE_VALUE
		FROM shichang t
		order by t.seq
	]]>
	</sql>

	<sql id="getShichangtvAll">
		<![CDATA[
		SELECT   t.shichangName	MODULE_KEY
				,t.shichangName	MODULE_VALUE
		FROM dianshiyewu t
		order by t.seq
	]]>
	</sql>

	<sql id="getChangetv">
		<![CDATA[
		SELECT   t.jine	jine
		FROM dianshiyewu t
		where
		1=1
		[AND t.shichangName = @shichangtv]
		order by t.seq
	]]>
	</sql>

	<sql id="getChangekd">
		<![CDATA[
		SELECT   t.jine	jine
		FROM shichang t
		where
		1=1
		[AND t.shichangName = @shichangkd]
		order by t.seq
	]]>
	</sql>

	<sql id="getChangekdlx">
		<![CDATA[
		SELECT   t.beiyong1	shichanglx
		FROM shichang t
		where
		1=1
		[AND t.shichangName = @shichangkd]
		order by t.seq
	]]>
	</sql>

	<sql id="getChangetvlx">
		<![CDATA[
		SELECT   t.yewuleibie	shichanglx
		FROM dianshiyewu t
		where
		1=1
		[AND t.shichangName = @shichangtv]
		order by t.seq
	]]>
	</sql>

	<sql id="getChangekddk">
		<![CDATA[
		SELECT   t.beiyong2	daikuan
		FROM shichang t
		where
		1=1
		[AND t.shichangName = @shichangkd]
		order by t.seq
	]]>
	</sql>

	<sql id="getChangekdsj">
		<![CDATA[
		SELECT   t.shichang	shichangsj
		FROM shichang t
		where
		1=1
		[AND t.shichangName = @shichangkd]
		order by t.seq
	]]>
	</sql>

	<sql id="getChangedianxin">
		<![CDATA[
		SELECT  *
		FROM dianxintaocan t
		where
		1=1
		[AND t.taocan = @shichangkd]
		limit 0,1
	]]>
	</sql>

	<sql id="getChangetvsj">
		<![CDATA[
		SELECT   t.shichangyue	shichangsj
		FROM dianshiyewu t
		where
		1=1
		[AND t.shichangName = @shichangtv]
		order by t.seq
	]]>
	</sql>

	<!-- 得到网络信息 -->
	<sql id="getRadiusWangluo">
		<![CDATA[
		SELECT   t.id	MODULE_KEY
				,t.sIspName	MODULE_VALUE
		FROM     radius_wangluo t

	]]>
	</sql>

	<!-- 得到区域信息 -->
	<sql id="getRadiusDist">
		<![CDATA[
		SELECT   t.iDistID	MODULE_KEY
				,t.name	MODULE_VALUE
		FROM     radius_dist t

	]]>
	</sql>

	<!-- 查询所有状态对日志列表 -->
	<sql id="getZhuangtaiAllInLog">
		<![CDATA[
		SELECT  t.yh_zhuangtai	MODULE_KEY
				,t.yh_zhuangtai	MODULE_VALUE
		FROM yonghudatalog t
		GROUP BY t.yh_zhuangtai
	]]>
	</sql>

	<!-- 查询所有银行列表 -->
	<sql id="getYinhangAll">
		<![CDATA[
		SELECT   t.yinhang	MODULE_KEY
				,t.yinhang	MODULE_VALUE
		FROM yinghangname t

	]]>
	</sql>

	<!-- -->
	<sql id="getXiaoQuCodeByQuyu">
		<![CDATA[
		SELECT t.NAME	MODULE_KEY
				,t.NAME	MODULE_VALUE
		FROM xiaoqucode1 t
		where t.quyu=@quyu
		order by t.seq
	]]>
	</sql>

	<!-- 查询所有电信套餐 -->
	<sql id="dianxintaocan">
		<![CDATA[
		SELECT 	t.taocan	MODULE_KEY
				,t.taocan		MODULE_VALUE
		FROM dianxintaocan t
		order by t.UUID
	]]>
	</sql>

	<!-- 查询所有库存地点 -->
	<sql id="getKucunAll">
		<![CDATA[
		SELECT
		t.storename			MODULE_KEY
		,t.storename		MODULE_VALUE
		FROM store t
		ORDER BY t.UUID
	]]>
	</sql>

	<!-- 查询客户资料列表 -->
	<sql id="GetUserInfomactonist">
	<![CDATA[
	SELECT
	t.UUID		 	PK_ID
	,t.xiaoquname	 	xiaoquname
	,t.yonghu	 	yonghu
	,t.zhenjianno		zhenjianno
	,t.shoujuno		shoujuno
	,t.fenguang		fenguang
	,t.onuzcwz		onuzcwz
	,t.dizi			dizi
	,t.kaijishijian		kaijishijian
	,t.tijishijian		tijishijian
	,t.daikuan		daikuan
	,t.tv			tv
	,t.tel			tel
	,t.username		username
	,t.passwords		passwords
	,t.guhuahaoma		guhuahaoma
	,t.usertel		usertel
	,t.jiguiweizhi		jiguiweizhi
	,t.onumac		onumac
	,t.stbmac		stbmac
	,t.tvip			tvip
	,t.netip		netip
	,t.telip		telip
	,t.telvaln		telvaln
	,t.netvaln		netvaln
	,t.tvvaln		tvvaln
	,t.qtvaln		qtvaln
	,t.beizhu		beizhu
	FROM kehuziliao t
	WHERE 1=1
	 [AND t.xiaoquname=@xiaoquname]
	[AND t.dizi=@dizi]
	[AND t.yonghu=@yonghu]
	]]>
	</sql>

	<!-- 查询客户资料列表总数 -->
	<sql id="GetUserInfomactonCount">
	<![CDATA[
	SELECT
	COUNT(*)		CNT
	FROM kehuziliao t
	WHERE 1=1
	[AND t.xiaoquname=@xiaoquname]
	[AND t.dizi=@dizi]
	[AND t.yonghu=@yonghu]
	]]>
	</sql>

	<!-- 查询客户资料 -->
	<sql id="GetUserinfoByUUID">
	<![CDATA[
	SELECT
	t.UUID		 	PK_ID
	,t.xiaoquname	 	xiaoquname
	,t.yonghu	 	yonghu
	,t.zhenjianno		zhenjianno
	,t.shoujuno		shoujuno
	,t.fenguang		fenguang
	,t.onuzcwz		onuzcwz
	,t.dizi			dizi
	,t.kaijishijian		kaijishijian
	,t.tijishijian		tijishijian
	,t.daikuan		daikuan
	,t.tv			tv
	,t.tel			tel
	,t.username		username
	,t.passwords		passwords
	,t.guhuahaoma		guhuahaoma
	,t.usertel		usertel
	,t.jiguiweizhi		jiguiweizhi
	,t.onumac		onumac
	,t.stbmac		stbmac
	,t.tvip			tvip
	,t.netip		netip
	,t.telip		telip
	,t.telvaln		telvaln
	,t.netvaln		netvaln
	,t.tvvaln		tvvaln
	,t.qtvaln		qtvaln
	,t.beizhu		beizhu
	FROM kehuziliao t
	WHERE
	t.UUID = @UUID
	order by xiaoquname,dizi
	]]>
	</sql>

	<!-- 修改客户资料 -->
	<sql id="updateUserInfoById">
	<![CDATA[
	UPDATE kehuziliao t
	SET
	t.xiaoquname	= 	@xiaoquname
	[,t.yonghu	 	= 	@yonghu]
	[,t.zhenjianno		= 	@zhenjianno]
	[,t.shoujuno		= 	@shoujuno]
	[,t.fenguang		= 	@fenguang]
	[,t.onuzcwz		= 	@onuzcwz]
	[,t.dizi			= 	@dizi]
	[,t.kaijishijian		= 	@kaijishijian]
	[,t.tijishijian		= 	@tijishijian]
	[,t.daikuan		= 	@daikuan]
	[,t.tv			= 	@tv]
	[,t.tel			= 	@tel]
	[,t.username		= 	@username]
	[,t.passwords		= 	@passwords]
	[,t.guhuahaoma		= 	@guhuahaoma]
	[,t.usertel		= 	@usertel]
	[,t.jiguiweizhi		= 	@jiguiweizhi]
	[,t.onumac		= 	@onumac]
	[,t.stbmac		= 	@stbmac]
	[,t.tvip			= 	@tvip]
	[,t.netip		= 	@netip]
	[,t.telip		= 	@telip]
	[,t.telvaln		= 	@telvaln]
	[,t.netvaln		= 	@netvaln]
	[,t.tvvaln		= 	@tvvaln]
	[,t.qtvaln		= 	@qtvaln]
	[,t.beizhu		= 	@beizhu]
	WHERE
	t.UUID = @UUID
	]]>
	</sql>
	<!-- 修改跟新pgd为已回单 -->
	<sql id="updatePGDstate">
	<![CDATA[
		update paigongdan
		set
			state = @state
		where UUID =@UUID
	]]>
	</sql>

	<!-- 将旧设备设置成已损坏状态 -->
	<sql id="updateOldEquState">
	<![CDATA[
		update equipmentstock
		set
			state = @state
		where mac =@mac
	]]>
	</sql>

	<!-- 根据房号更换ONU设备 -->
	<sql id="changeEquBYfanghao">
	<![CDATA[
		update kehuziliao
		set
			onumac = @onumac
		where  dizi=@dizi
	]]>
	</sql>

	<!-- 更新设备状态根据UUID -->
	<sql id="updateEquByUUID">
	<![CDATA[
		update equipmentstock
		set
			state = @state
			,chukudate=@chukudate
			,anzhuangplace=@anzhuangplace
		where  UUID=@UUID
	]]>
	</sql>

	<!-- 根据UUID更换机顶盒设备 -->
	<sql id="changeEquBYUUID">
	<![CDATA[
		update kehuziliao
		set
			stbmac = @stbmac
		where  UUID=@UUID
	]]>
	</sql>

	<!-- 根据mac查询设备对象 -->
	<sql id="GetEquipByMac">
		<![CDATA[
		SELECT
		t.UUID				PK_ID
		,t.TYPE				TYPE
		,t.xianghao			xianghao
		,DATE_FORMAT(t.rukudate,'%Y-%m-%d')		rukudate
		,t.state			state
		,t.rukuperson		rukuperson
		,t.xinghao			xinghao
		,t.mac				mac
		,t.zhucejifang		zhucejifang
		,t.TVip				tvip
		,DATE_FORMAT(t.chukudate,'%Y-%m-%d')		chukudate
		,t.chukuplace		chukuplace
		,t.lingquren		lingquren
		,t.anzhuangplace	anzhuangplace
		,t.beizhu			beizhu
		,t.createdt			createdt
		,t.updatedt			updatedt

	FROM equipmentstock t
	WHERE t.UUID = @UUID
	]]>
	</sql>

	<!-- 跟新派工单状态操作 -->
	<sql id="updateOperate">
	<![CDATA[
		update paigongdan
		set
			updatedt=@updatedt
			,state=@state
			[,importstate=@importstate]
			[,shujuupdatedt=@shujuupdatedt]
			[,shujuupdateby=@shujuupdateby]
			[,shigongzhongdt=@shigongzhongdt]
			[,shigongzhongby=@shigongzhongby]
			[,gongbidt=@gongbidt]
			[,gongbiby=@gongbiby]
			[,jiedandt=@jiedandt]
			[,jiedanby=@jiedanby]

			[,qujiandt=@qujiandt]
			[,qujianby=@qujianby]
			[,yiqujiandt=@yiqujiandt]
			[,yiqujianby=@yiqujianby]
			[,yishangchuandt=@yishangchuandt]
			[,yishangchuanby=@yishangchuanby]
			[,ysdxxddt=@ysdxxddt]
			[,ysdxxdby=@ysdxxdby]
			[,sckfsjdt=@sckfsjdt]
			[,sckfsjby=@sckfsjby]
			[,tuidandt=@tuidandt]
			[,tuidanby=@tuidanby]
			[,tuidanbeizhu=@tuidanbeizhu]
			[,jiedanbeizhu=@jiedanbeizhu]
			,updateby=@updateby
		where UUID =@UUID
	]]>
	</sql>
	<!-- 查询预约列表 -->
	<sql id="GetPlanList">
	<![CDATA[
	SELECT t.UUID	PK_ID
			,t.xiaoqu	xiaoqu
			,t.riqi		riqi
			,t.shijian	shijian
			,t.azjh		azjh
			,(t.azjh-t.azsy)		azsy
		--	,t.qjjh		qjjh
			,(CASE WHEN t.qjjh>'1000' THEN '不限'
			     ELSE t.qjjh
				END)			qjjh
		--	,(t.qjjh-t.qjsy)		qjsy
			,(CASE WHEN (t.qjjh-t.qjsy)>'1000' THEN '不限'
			     ELSE (t.qjjh-t.qjsy)
				END)			qjsy
			,t.yujing	yujing
			,t.createby	createby
			,t.createdt	created
	 FROM plan t
	 WHERE 1=1
	 [AND TO_DAYS(t.riqi)>TO_DAYS(@now)]
	 [AND t.xiaoqu=@xiaoqu]
	 [AND t.riqi=@riqi]
	 [AND TO_DAYS(t.riqi)>TO_DAYS(@starriqi)]
	 [AND TO_DAYS(t.riqi)<=TO_DAYS(@endriqi)]

	 ORDER BY t.riqi ,t.xiaoqu
 ]]>
	</sql>
	<!-- 查询预约列表数 -->
	<sql id="GetPlanListCount">
	<![CDATA[
	SELECT count(*) CNT
	 FROM plan t
	 WHERE 1=1
	 [AND TO_DAYS(t.riqi)>TO_DAYS(@now)]
	 [AND t.xiaoqu=@xiaoqu]
	 [AND t.riqi=@riqi]
	 [AND TO_DAYS(t.riqi)>TO_DAYS(@starriqi)]
	 [AND TO_DAYS(t.riqi)<=TO_DAYS(@endriqi)]
 	]]>
	</sql>

	<!-- 查询预约实体 -->
	<sql id="getYuyue">
	<![CDATA[
	SELECT t.UUID	PK_ID
			,t.xiaoqu	xiaoqu
			,t.riqi		riqi
			,t.shijian	shijian
			,t.azjh		azjh
			,t.azsy		azsy  -- 已安装户数
		--	,t.qjjh		qjjh
			,(CASE WHEN t.qjjh>'1000' THEN ''
			     ELSE t.qjjh
				END)			qjjh
			,qjsy		qjsy	-- 已收件户数
			,t.yujing	yujing
			,t.createby	createby
			,t.createdt	created
	 FROM plan t
	 WHERE 1=1
	 [AND t.xiaoqu=@xiaoqu]
	 [AND t.riqi=@riqi]
	 [AND t.UUID=@UUID]
	 [AND t.shijian=@shijian]
 ]]>
	</sql>

	<!-- 更新 预约 -->
	<sql id="updateYuyue">
	<![CDATA[
		UPDATE plan
	SET updatedt=@updatedt

		[,azjh=@azjh]
		[,qjjh=@qjjh]
		[,yujing=@yujing]
		,updateby=@updateby
	 WHERE UUID=@UUID
	 ]]>
	</sql>

	<sql id="deleteYuyue">
	<![CDATA[
		DELETE FROM plan WHERE UUID = @UUID
	]]>
	</sql>

	<!-- 更新 预约 -->
	<sql id="updateYuyueJh">
	<![CDATA[
		UPDATE plan
	SET updatedt=@updatedt

		[,azsy=@azsy]
		[,qjsy=@qjsy]
		,updateby=@updateby
	 WHERE UUID=@UUID
	 ]]>
	</sql>
	<!-- 查询电话号码库list -->
	<sql id="GetTelList">
	<![CDATA[
		SELECT t.UUID	PK_ID
		,t.quyu		quyu
		,t.telno	telno
		,t.xiaoqu	xiaoqu
		,t.dizhi	dizhi
		,t.beizhu	beizhu
		,t.xuanhaoby	xuanhaoby
		,t.xuanhaodt	xuanhaodt
		,t.state		state
	FROM telnumber t
	WHERE 1=1
	[AND t.quyu=@quyu]
	[AND t.telno=@telno]
	[AND t.state=@state]
	]]>
	</sql>
	<!-- 查询电话号码库list -->
	<sql id="GetTelListCount">
	<![CDATA[
		SELECT count(*) 	CNT
	FROM telnumber t
	WHERE 1=1
	[AND t.quyu=@quyu]
	[AND t.telno=@telno]
	[AND t.state=@state]
	]]>
	</sql>
	<!-- 更新选号情况 -->
	<sql id="updateTelXuanhao">
	<![CDATA[
		UPDATE telnumber
		SET	updatedt=@updatedt
			,updateby=@updateby
			,xiaoqu=@xiaoqu
			,dizhi=@dizhi
			,xuanhaoby=@xuanhaoby
			,xuanhaodt=@xuanhaodt
			,state=@state
		WHERE telno=@telno
	]]>
	</sql>

	<!-- 收件单删除时，重置电话号码为“未选”状态 -->
	<sql id="updateTel2NULL">
	<![CDATA[
		UPDATE telnumber
		SET	updatedt=@updatedt
			,updateby=@updateby
			,xiaoqu=null
			,dizhi=null
			,xuanhaoby=null
			,xuanhaodt=null
			,state=0
		WHERE telno=@telno
	]]>
	</sql>

	<!-- 删除电话库 -->
	<sql id="DeleteTel">
	<![CDATA[
		DELETE FROM telnumber WHERE UUID = @UUID
	]]>
	</sql>

	<sql id="GetTelByUUID">
	<![CDATA[
		SELECT t.UUID	PK_ID
		,t.quyu		quyu
		,t.telno	telno
		,t.xiaoqu	xiaoqu
		,t.dizhi	dizhi
		,t.beizhu	beizhu
		,t.xuanhaoby	xuanhaoby
		,t.xuanhaodt	xuanhaodt
		,t.state		state
	FROM telnumber t
	WHERE
	UUID=@UUID
	]]>
	</sql>
	<!-- 获取小区对应的区域 -->
	<sql id="getQuyu">
	<![CDATA[
	SELECT t.NAME 		NAME
			,t.quyu 	quyu
	FROM xiaoqucode1 t
	where t.name=@name
	order by t.seq
	]]>
	</sql>

	<!-- 获取所有区域 预约 -->
	<sql id="getQuYuCodeAll">
		<![CDATA[
		SELECT DISTINCT quyu  	MODULE_KEY
					,quyu		MODULE_VALUE
		FROM xiaoqucode1
		order by seq
	]]></sql>

	<!-- 根据时长类型获取带宽，时长-->
	<sql id="getShichangleixingAndDaikuan">
		<![CDATA[
			SELECT DISTINCT t.beiyong2    daikuan
			               ,shichangName  shichangName
			FROM shichang t
			WHERE 1=1
			[AND	t.beiyong1 = @leixing]
			[AND t.beiyong2 = @daikuan]
			GROUP BY  t.seq

	]]></sql>

	<!-- 根据电话号码查询预约号码是否存在，是否已选择 -->
	<sql id="getTelStateByNo">
		<![CDATA[
	SELECT 	t.UUID  PK_ID,
			t.state 	state
	FROM telnumber t
	WHERE t.telno =@telno
	]]>
	</sql>
	<!-- dwr 异步查询 -->
	<sql id="GetPaigongdanDWRList">
		<![CDATA[
	SELECT t.UUID			PK_ID,
			t.paigongriqi	paigongriqi
	FROM paigongdan t
	WHERE t.xiaoquname=@xiaoquname
	AND t.userplace = @userplace
	AND t.state != '14'
	AND t.state != '15'
	]]>
	</sql>

	<!-- 查询修改数据信息 -->
	<sql id="GetShujuXiugaiInfo">
		<![CDATA[
		SELECT
			 t._id			            PK_ID
			,t.yh_zhuangtai		        yh_zhuangtai
			,t.yh_name	                yh_name
			,t.yh_shenfenzhengNum	    yh_shenfenzhengNum
			,t.yh_shoujuhao		        yh_shoujuhao
			,t.yh_fenguangxianNum		yh_fenguangxianNum
			,t.yh_xujieweizhi			yh_xujieweizhi
			,DATE_FORMAT(t.yh_kaijiDate,'%Y-%m-%d')	    yh_kaijiDate
			,DATE_FORMAT(t.yh_tingjiDate,'%Y-%m-%d')	yh_tingjiDate
			,DATE_FORMAT(t.yh_youxiaoDate,'%Y-%m-%d')	yh_youxiaoDate
			,t.xx_xiaoqu                xx_xiaoqu
			,t.xx_dizhi                 xx_dizhi
			,t.xx_dianhuaNum            xx_dianhuaNum
			,t.xx_wangluo               xx_wangluo
			,t.xx_dianshi               xx_dianshi
			,t.xx_dianhua               xx_dianhua
			,t.xx_yewu	                xx_yewu
			,t.fw_fenguang               fw_fenguang
			,t.fw_onu_mac                fw_onu_mac
			,t.fw_stb_mcid               fw_stb_mcid
			,t.fw_dianshi_ip             fw_dianshi_ip
			,t.fw_wangluo_ip             fw_wangluo_ip
			,t.fw_dianhua_ip             fw_dianhua_ip
			,t.fw_dianhua_vlan           fw_dianhua_vlan
			,t.fw_wangluo_vlan           fw_wangluo_vlan
			,t.fw_shangmen_date          fw_shangmen_date
			,t.fw_danzheng               fw_danzheng
			,t.fw_chose_dianhuaNum       fw_chose_dianhuaNum
			,t.fy_onu			         fy_onu
			,t.fy_jidinghe 		         fy_jidinghe
			,t.fy_shoushi 		         fy_shoushi
			,t.fy_kuandai 		         fy_kuandai
			,t.fy_chuzhuang              fy_chuzhuang
			,t.fy_chuzhuang              fy_chuzhuang
			,t.fy_shebeixiaoshou         fy_shebeixiaoshou
			,t.fy_cailiao                fy_cailiao
			,t.fy_yunyingshang           fy_yunyingshang
			,t.fy_buzuyuegou             fy_buzuyuegou
			,t.fy_nianfei                fy_nianfei
			,t.fy_beizhu                 fy_beizhu
			,t.qt_zongshoufei            qt_zongshoufei
			,t.qt_shoujuNum              qt_shoujuNum
			,t.qt_kaipiaoxinxi           qt_kaipiaoxinxi
			,t.qt_shebeishiyong          qt_shebeishiyong
			,t.qt_haocai                 qt_haocai
			,t.qt_jiexianzi              qt_jiexianzi
			,t.qt_rj11                   qt_rj11
			,t.qt_rj45                   qt_rj45
			,t.qt_mokuai                 qt_mokuai
			,t.qt_mianban                qt_mianban
			,t.qt_wangxian               qt_wangxian
			,t.qt_shigongren             qt_shigongren
			,t.qt_xianchangbeizhu        qt_xianchangbeizhu
			,t.beizhuhuizong             beizhuhuizong
			,t.pipeizhuangtai            pipeizhuangtai
			,t.shoukuanshijian           shoukuanshijian
			,t.xiugai_ren                xiugai_ren
			,DATE_FORMAT(t.xiugai_date,'%Y-%m-%d %H:%i:%S')    xiugai_date
    		FROM yonghudatalog t
    		WHERE 1=1
		    [AND t.xx_xiaoqu=@xx_xiaoqu]
			[AND xiugai_date LIKE @xiugaidates]
			[AND t.xx_dizhi LIKE @xx_dizhi]
			[AND t.yh_zhuangtai LIKE @yh_zhuangtai]
		]]>
	</sql>

	<!-- 插入待缴费   电话业务信息  根据uuid-->
	<sql id="insertDaijiaofeiByUUID">
		<![CDATA[
		INSERT INTO yonghushuju (yonghuzhuangtai,xingming,shenfenzheng,shoujuhao,fenguangxianhao,jiexuweizhi,kaijishijian,tingjishijian,xiaoqu,dizhi,lianxidianhua,
		wangluo,dianshi,dianhua,yewu,fenguang,onumac,stbmcid,dianshiip,wangluoip,dianhuaip,dianhuavlan,wangluovlan,shangmenshijian,danzheng,sxdhhm,onuyj,jidingheyj,shoushifei
		,kuandaifei,chuzhuangfei,yunyingshang,bzygf,nianfei,beizhu,zongshoufei,shoujubenhao,qtsbsyqk,qitahaocai,jiexianzi,rj11,rj45,mokuai,mianban,wangxian,shigongren,
		xianchangbeizhu,beizhuhuizong,createby,createdt,updateby,updatedt,shebeixiaoshou,cailiaofei,kaipiaoxinxi,pipeizhuangtai,shoukuanshijian)
		SELECT '已续费',xingming,shenfenzheng,shoujuhao,fenguangxianhao,jiexuweizhi,kaijishijian,tingjishijian,xiaoqu,dizhi,lianxidianhua,
		wangluo,dianshi,dianhua,yewu,fenguang,onumac,stbmcid,dianshiip,wangluoip,dianhuaip,dianhuavlan,wangluovlan,shangmenshijian,danzheng,sxdhhm,onuyj,jidingheyj,shoushifei
		,kuandaifei,chuzhuangfei,yunyingshang,bzygf,nianfei,beizhu,zongshoufei,shoujubenhao,qtsbsyqk,qitahaocai,jiexianzi,rj11,rj45,mokuai,mianban,wangxian,shigongren,
		xianchangbeizhu,beizhuhuizong,createby,createdt,updateby,updatedt,shebeixiaoshou,cailiaofei,kaipiaoxinxi,pipeizhuangtai,shoukuanshijian
		FROM yonghushuju WHERE UUID = @UUID
		]]>
	</sql>


	<!-- 查询修改数据信息 -->
	<sql id="GetWeixiuJiaofeiLogInfo">
		<![CDATA[
		SELECT
			 t._id			            PK_ID
			,t.yh_zhuangtai		        yh_zhuangtai
			,t.yh_name	                yh_name
			,t.yh_shenfenzhengNum	    yh_shenfenzhengNum
			,t.yh_shoujuhao		        yh_shoujuhao
			,t.yh_fenguangxianNum		yh_fenguangxianNum
			,t.yh_xujieweizhi			yh_xujieweizhi
			,DATE_FORMAT(t.yh_kaijiDate,'%Y-%m-%d')	    yh_kaijiDate
			,DATE_FORMAT(t.yh_tingjiDate,'%Y-%m-%d')	yh_tingjiDate
			,t.xx_xiaoqu                xx_xiaoqu
			,t.xx_dizhi                 xx_dizhi
			,t.xx_dianhuaNum            xx_dianhuaNum
			,t.xx_wangluo               xx_wangluo
			,t.xx_dianshi               xx_dianshi
			,t.xx_dianhua               xx_dianhua
			,t.xx_yewu	                xx_yewu
			,t.fw_fenguang               fw_fenguang
			,t.fw_onu_mac                fw_onu_mac
			,t.fw_stb_mcid               fw_stb_mcid
			,t.fw_dianshi_ip             fw_dianshi_ip
			,t.fw_wangluo_ip             fw_wangluo_ip
			,t.fw_dianhua_ip             fw_dianhua_ip
			,t.fw_dianhua_vlan           fw_dianhua_vlan
			,t.fw_wangluo_vlan           fw_wangluo_vlan
			,t.fw_shangmen_date          fw_shangmen_date
			,t.fw_danzheng               fw_danzheng
			,t.fw_chose_dianhuaNum       fw_chose_dianhuaNum
			,t.fy_onu			         fy_onu
			,t.fy_jidinghe 		         fy_jidinghe
			,t.fy_shoushi 		         fy_shoushi
			,t.fy_kuandai 		         fy_kuandai
			,t.fy_chuzhuang              fy_chuzhuang
			,t.fy_chuzhuang              fy_chuzhuang
			,t.fy_shebeixiaoshou         fy_shebeixiaoshou
			,t.fy_cailiao                fy_cailiao
			,t.fy_yunyingshang           fy_yunyingshang
			,t.fy_buzuyuegou             fy_buzuyuegou
			,t.fy_nianfei                fy_nianfei
			,t.fy_beizhu                 fy_beizhu
			,t.qt_zongshoufei            qt_zongshoufei
			,t.qt_shoujuNum              qt_shoujuNum
			,t.qt_kaipiaoxinxi           qt_kaipiaoxinxi
			,t.qt_shebeishiyong          qt_shebeishiyong
			,t.qt_haocai                 qt_haocai
			,t.qt_jiexianzi              qt_jiexianzi
			,t.qt_rj11                   qt_rj11
			,t.qt_rj45                   qt_rj45
			,t.qt_mokuai                 qt_mokuai
			,t.qt_mianban                qt_mianban
			,t.qt_wangxian               qt_wangxian
			,t.qt_shigongren             qt_shigongren
			,t.qt_xianchangbeizhu        qt_xianchangbeizhu
			,t.beizhuhuizong             beizhuhuizong
			,t.pipeizhuangtai            pipeizhuangtai
			,t.shoukuanshijian           shoukuanshijian
			,t.xiugai_ren                xiugai_ren
			,DATE_FORMAT(t.xiugai_date,'%Y-%m-%d %H:%i:%S')    xiugai_date
    		FROM yonghudatalog t
    		WHERE 1=1
		    [AND t.xx_xiaoqu=@xx_xiaoqu]
			[AND xiugai_date LIKE @xiugaidates]
			[AND t.xx_dizhi LIKE @xx_dizhi]
			AND (t.yh_zhuangtai = '维修待处理' OR t.yh_zhuangtai = '待缴费')
		]]>
	</sql>

	<!-- 查询修改数据的LIST -->
	<sql id="GetShujuXiugaiListCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT
		FROM yonghudatalog t
		WHERE 1=1
		    [AND t.xx_xiaoqu=@xx_xiaoqu]
			[AND xiugai_date LIKE @xiugaidates]
			[AND t.xx_dizhi LIKE @xx_dizhi]
			[AND t.yh_zhuangtai LIKE @yh_zhuangtai]
		]]>
	</sql>
	<!-- 查询修改数据的LIST -->
	<sql id="GetWeixiuJiaofeiLogCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT
		FROM yonghudatalog t
		WHERE 1=1
		    [AND t.xx_xiaoqu=@xx_xiaoqu]
			[AND xiugai_date LIKE @xiugaidates]
			[AND t.xx_dizhi LIKE @xx_dizhi]
			AND (t.yh_zhuangtai = '维修待处理' OR t.yh_zhuangtai = '待缴费')
		]]>
	</sql>

	<!-- 查询所有用户数据状态列表 -->
	<sql id="getStatusCodeAll">
		<![CDATA[
		SELECT t.YONGHUZHUANGTAI	MODULE_KEY
				,t.YONGHUZHUANGTAI	MODULE_VALUE
		FROM yonghusta t
	]]>
	</sql>

	<!-- 查询回单数据状态列表 -->
	<sql id="getHuidanStatusCodeAll">
		<![CDATA[
		SELECT t.YONGHUZHUANGTAI	MODULE_KEY
				,t.YONGHUZHUANGTAI	MODULE_VALUE
		FROM huidandata t
		GROUP BY t.yonghuzhuangtai
	]]>
	</sql>

	<!-- 查询所有小区名字列表 -->
	<sql id="getCommunityAll">
		<![CDATA[
		SELECT   t.Community_id  	MODULE_KEY
				,t.CommunityName	MODULE_VALUE
		FROM community t ORDER BY t.CommunityRemark
	]]>
	</sql>

	<!-- 查询所有员工名字列表 -->
	<sql id="getUserNameAll">
		<![CDATA[
		SELECT   t._ID	MODULE_KEY
				,t.NAME	MODULE_VALUE
		FROM  userinfo t , dept d
		WHERE t.Dept_ID=d.Dept_ID AND d.Lifecycle_sta = 0
	]]>
	</sql>

	<!-- 查询已安装，已维修，已续费用户数据状态列表 -->
	<sql id="getPartStatusCodeAll">
		<![CDATA[
		SELECT distinct t.YONGHUZHUANGTAI	MODULE_KEY
				,t.YONGHUZHUANGTAI	MODULE_VALUE
		FROM yonghushuju t
		WHERE
		   t.yonghuzhuangtai='已安装'
		OR t.yonghuzhuangtai='已维修'
		OR t.yonghuzhuangtai='已续费'
		OR t.yonghuzhuangtai='已收件'
	]]>
	</sql>

	<!-- 查询用户数据LIST -->
	<sql id="GetUserDataListByFuz">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.pipeizhuangtai pipeizhuangtai
		,t.weixiuleixing weixiuleixing
	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.xiaoqu LIKE @quyu1]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai=@state]
	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.youxiaoshijian >= @youxiaoshijians]
	[AND t.youxiaoshijian <= @youxiaoshijiane]
	[AND t.xingming	LIKE @xingming]
	[AND t.shenfenzheng	LIKE @shenfensheng]
	[AND t.shoujuhao LIKE	@shoujuhao]
	[AND t.fenguangxianhao LIKE	@fenguangxianhao]
	[AND t.jiexuweizhi LIKE	@jiexuweizhi]
	[AND t.lianxidianhua LIKE @lianxidianhua]
	[AND t.wangluo LIKE @wangluo]
	[AND t.dianshi LIKE @dianshi]
	[AND t.dianhua LIKE @dianhua]
	[AND t.yewu LIKE @yewu]
	[AND t.fenguang LIKE @fenguang]
	[AND t.onumac LIKE @onumac]
	[AND t.stbmcid LIKE @stbmcid]
	[AND t.dianshiip LIKE @dianshiip]
	[AND t.wangluoip LIKE @wangluoip]
	[AND t.dianhuaip LIKE @dianhuaip]
	[AND t.dianhuavlan LIKE @dianhuavlan]
	[AND t.wangluovlan LIKE @wangluovlan]
	[AND t.shangmenshijian LIKE @shangmenshijian]
	[AND t.danzheng LIKE @danzheng]
	[AND t.sxdhhm LIKE @sxdhhm]
	[AND t.onuyj LIKE @onuyj]
	[AND t.jidingheyj LIKE @jidingheyj]
	[AND t.shoushifei LIKE @shoushifei]
	[AND t.kuandaifei LIKE @kuandaifei]
	[AND t.chuzhuangfei LIKE @chuzhuangfei]
	[AND t.yunyingshang LIKE @yunyingshang]
	[AND t.bzygf LIKE @bzygf]
	[AND t.nianfei LIKE @nianfei]
	[AND t.beizhu LIKE @beizhu]
	[AND t.zongshoufei LIKE @zongshoufei]
	[AND t.shoujubenhao LIKE @shoujubenhao]
	[AND t.qtsbsyqk LIKE @qtsbsyqk]
	[AND t.qitahaocai LIKE @qitahaocai]
	[AND t.jiexianzi LIKE @jiexianzi]
	[AND t.rj11 LIKE @rj11]
	[AND t.rj45 LIKE @rj45]
	[AND t.mokuai LIKE @mokuai]
	[AND t.mianban LIKE @mianban]
	[AND t.wangxian LIKE @wangxian]
	[AND t.shigongren LIKE @shigongren]
	[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
	[AND t.beizhuhuizong LIKE @beizhuhuizong]
	[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
	[AND t.pipeizhuangtai LIKE @pipeizhuangtai]
	[AND t.shoukuanshijian LIKE @shoukuanshijian]
	[AND t.weixiuleixing LIKE @weixiuleixing]
	order by t.xiaoqu,t.dizhi,t.youxiaoshijian,t.createdt desc
		]]>
	</sql>

	<!-- 查询用户数据LIST -->
	<sql id="GetUserDataList">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.pipeizhuangtai		pipeizhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.weixiuleixing weixiuleixing

	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.xingming = @username]
	[AND t.dizhi = @address]
	[AND t.lianxidianhua LIKE @telno]
	[AND t.yonghuzhuangtai=@state]
	[AND t.onumac = @onu]
	[AND t.stbmcid = @mcid]
	[AND t.yonghuzhuangtai=@state]
	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.youxiaoshijian >= @youxiaoshijians]
	[AND t.youxiaoshijian <= @youxiaoshijiane]
	order by t.xiaoqu,t.dizhi,t.youxiaoshijian,t.createdt desc
		]]>
	</sql>

	<!-- 查询已维修用户数据LIST -->
	<sql id="GetUserWeiXiuDataList">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.pipeizhuangtai		pipeizhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong

	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai='已维修']
	order by t.xiaoqu,t.dizhi,t.tingjishijian,t.createdt desc
		]]>
	</sql>

	<!-- 空数据LIST -->
	<sql id="GetEmptyDataList">
		<![CDATA[
		SELECT *
	FROM yonghushuju t
	where 1!=1
		]]>
	</sql>

	<!-- 查询用户数据LIST count -->
	<sql id="GetUserDataListCountByFuz">
		<![CDATA[
		SELECT count(*) CNT
	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai=@state]

	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.youxiaoshijian >= @youxiaoshijians]
	[AND t.youxiaoshijian <= @youxiaoshijiane]
	[AND t.xingming	LIKE @xingming]
	[AND t.shenfenzheng	LIKE @shenfensheng]
	[AND t.shoujuhao LIKE	@shoujuhao]
	[AND t.fenguangxianhao LIKE	@fenguangxianhao]
	[AND t.jiexuweizhi LIKE	@jiexuweizhi]
	[AND t.lianxidianhua LIKE @lianxidianhua]
	[AND t.wangluo LIKE @wangluo]
	[AND t.dianshi LIKE @dianshi]
	[AND t.dianhua LIKE @dianhua]
	[AND t.yewu LIKE @yewu]
	[AND t.fenguang LIKE @fenguang]
	[AND t.onumac LIKE @onumac]
	[AND t.stbmcid LIKE @stbmcid]
	[AND t.dianshiip LIKE @dianshiip]
	[AND t.wangluoip LIKE @wangluoip]
	[AND t.dianhuaip LIKE @dianhuaip]
	[AND t.dianhuavlan LIKE @dianhuavlan]
	[AND t.wangluovlan LIKE @wangluovlan]
	[AND t.shangmenshijian LIKE @shangmenshijian]
	[AND t.danzheng LIKE @danzheng]
	[AND t.sxdhhm LIKE @sxdhhm]
	[AND t.onuyj LIKE @onuyj]
	[AND t.jidingheyj LIKE @jidingheyj]
	[AND t.shoushifei LIKE @shoushifei]
	[AND t.kuandaifei LIKE @kuandaifei]
	[AND t.chuzhuangfei LIKE @chuzhuangfei]
	[AND t.yunyingshang LIKE @yunyingshang]
	[AND t.bzygf LIKE @bzygf]
	[AND t.nianfei LIKE @nianfei]
	[AND t.beizhu LIKE @beizhu]
	[AND t.zongshoufei LIKE @zongshoufei]
	[AND t.shoujubenhao LIKE @shoujubenhao]
	[AND t.qtsbsyqk LIKE @qtsbsyqk]
	[AND t.qitahaocai LIKE @qitahaocai]
	[AND t.jiexianzi LIKE @jiexianzi]
	[AND t.rj11 LIKE @rj11]
	[AND t.rj45 LIKE @rj45]
	[AND t.mokuai LIKE @mokuai]
	[AND t.mianban LIKE @mianban]
	[AND t.wangxian LIKE @wangxian]
	[AND t.shigongren LIKE @shigongren]
	[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
	[AND t.beizhuhuizong LIKE @beizhuhuizong]
	[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
	[AND t.pipeizhuangtai LIKE @pipeizhuangtai]
	[AND t.shoukuanshijian LIKE @shoukuanshijian]
		]]>
	</sql>

	<!-- 查询用户数据LIST count -->
	<sql id="GetUserDataListCount">
		<![CDATA[
		SELECT count(*) CNT
	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.xingming = @username]
	[AND t.dizhi = @address]
	[AND t.lianxidianhua LIKE @telno]
	[AND t.yonghuzhuangtai=@state]
	[AND t.onumac = @onu]
	[AND t.stbmcid = @mcid]
		]]>
	</sql>

	<!-- 查询用户数据LIST -->
	<sql id="GetUserDataByTingjiList">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.pipeizhuangtai		pipeizhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong

	FROM yonghushuju t
	WHERE 1=1
	[AND t.yonghuzhuangtai='已安装']
	[AND t.xiaoqu=@quyu]
	[AND t.dizhi LIKE @address]
	order by t.xiaoqu,t.dizhi,t.tingjishijian,t.createdt desc
		]]>
	</sql>

	<!-- 查询已安装用户信息（小区，地址，网络，电视，电话） -->
	<sql id="GetUserDataByAnZhuangList">
		<![CDATA[
		SELECT
		 t.uuid uuid
	    ,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xiaoqu               xiaoqu
		,t.dizhi                dizhi
		,t.wangluo              wangluo
		,t.dianshi              dianshi
		,t.dianhua              dianhua
	FROM yonghushuju t
	WHERE 1=1
	[AND t.yonghuzhuangtai='已安装']
		]]>
	</sql>

	<!-- 查询已安装用户信息（小区，地址，网络，电视，电话） -->
	<sql id="GetUserDataByAnZhuangCount">
		<![CDATA[
		SELECT count(yonghuzhuangtai) CNT
		FROM yonghushuju t
		WHERE
	     t.yonghuzhuangtai='已安装'
		AND t.xiaoqu=@xiaoqu
		AND t.dizhi=@dizhi
		[AND t.wangluo<>@wangluo]
		[AND t.dianshi<>@dianshi]
		[AND t.dianhua<>@dianhua]
		]]>
	</sql>
	<sql id="GetUserDataBywangluoip">
		<![CDATA[
		SELECT count(yonghuzhuangtai) CNT
		FROM yonghushuju t
		WHERE
	     t.yonghuzhuangtai='已安装'
	     AND t.xiaoqu=@xiaoqu
		AND t.dizhi=@dizhi
		AND t.wangluoip=@wangluoip
		[AND t.wangluo<>@wangluo]
		]]>
	</sql>
	<sql id="GetUserDataBydianshiip">
		<![CDATA[
		SELECT count(yonghuzhuangtai) CNT
		FROM yonghushuju t
		WHERE
	     t.yonghuzhuangtai='已安装'
	     AND t.xiaoqu=@xiaoqu
		AND t.dizhi=@dizhi
		AND t.dianhuaip=@dianhuaip
		[AND t.dianshi<>@dianshi]
		]]>
	</sql>

	<!-- 查询已安装用户信息(网络)是否为空 -->
	<sql id="GetUserDataByAnZhuangWangluo">
		<![CDATA[
		SELECT wangluo
		FROM yonghushuju t
		WHERE
	     t.yonghuzhuangtai='已安装'
		AND t.xiaoqu=@xiaoqu
		AND t.dizhi=@dizhi
		]]>
	</sql>

	<!-- 查询用户数据LIST count -->
	<sql id="GetUserDataByTingjiListCount">
		<![CDATA[
		SELECT count(*) CNT
	FROM yonghushuju t
	WHERE 1=1
	[AND t.yonghuzhuangtai='已安装']

	[AND t.xiaoqu=@quyu]
	[AND t.dizhi LIKE @address]
		]]>
	</sql>

	<!-- 查询已维修用户数据LIST count -->
	<sql id="GetUserDataByWeixiuListCount">
		<![CDATA[
		SELECT count(*) CNT
	FROM yonghushuju t
	WHERE 1=1
	[AND t.yonghuzhuangtai='已维修']
	[AND t.xiaoqu=@quyu]
	[AND t.dizhi LIKE @address]
		]]>
	</sql>

	<!-- 查询用户数据 -->
	<sql id="GetDataByUUID">
	<![CDATA[
	SELECT
	t.UUID		 	PK_ID
	,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.pipeizhuangtai pipeizhuangtai
		,t.shoukuanshijian shoukuanshijian
		,t.fenguangID fenguangID
	FROM yonghushuju t
	WHERE
	t.UUID = @UUID
	]]>
	</sql>

	<!-- 查询待缴费用户数据 -->
	<sql id="GetDaijiaofeiDataByUUID">
	<![CDATA[
	SELECT
	t.UUID		 	PK_ID
	,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian shoukuanshijian
		,t.kaipiaoxinxi kaipiaoxinxi
	FROM yonghushuju t
	WHERE
	t.UUID = @UUID
	AND t.yonghuzhuangtai='待缴费'
	]]>
	</sql>


	<!-- 修改用户数据时插入日志记录 -->
	<sql id="insertLogByEdit">
	<![CDATA[
	insert INTO yonghudatalog
	(yh_zhuangtai,yh_name,yh_shenfenzhengNum,yh_shoujuhao,yh_fenguangxianNum,yh_xujieweizhi,yh_kaijiDate,
	yh_tingjiDate,xx_xiaoqu,xx_dizhi,xx_dianhuaNum,xx_wangluo,xx_dianshi,xx_dianhua,xx_yewu,fw_fenguang,fw_onu_mac,fw_stb_mcid,fw_dianshi_ip,
	fw_wangluo_ip,fw_dianhua_ip,fw_dianhua_vlan,fw_wangluo_vlan,fw_shangmen_date,fw_danzheng,fw_chose_dianhuaNum,fy_onu,fy_jidinghe,fy_shoushi,fy_kuandai,fy_chuzhuang,
	fy_yunyingshang,fy_buzuyuegou,fy_nianfei,fy_beizhu,qt_zongshoufei,qt_shoujuNum,qt_shebeishiyong,qt_haocai,qt_jiexianzi,qt_rj11,qt_rj45,qt_mokuai,qt_mianban,qt_wangxian,
	qt_shigongren,qt_xianchangbeizhu,beizhuhuizong,fy_shebeixiaoshou,fy_cailiao,qt_kaipiaoxinxi,pipeizhuangtai,shoukuanshijian,xiugai_ren,xiugai_date)
	SELECT
	yonghuzhuangtai,xingming,shenfenzheng,shoujuhao,fenguangxianhao,jiexuweizhi,
	DATE_FORMAT(kaijishijian,'%Y-%m-%d'),DATE_FORMAT(tingjishijian,'%Y-%m-%d'),xiaoqu,dizhi,lianxidianhua,wangluo,dianshi,dianhua,yewu,fenguang,onumac,stbmcid,dianshiip,wangluoip,
	dianhuaip,dianhuavlan,wangluovlan,shangmenshijian,danzheng,sxdhhm,onuyj,jidingheyj,shoushifei,kuandaifei,chuzhuangfei,yunyingshang,bzygf,nianfei,beizhu,
	zongshoufei,shoujubenhao,qtsbsyqk,qitahaocai,jiexianzi,rj11,rj45,mokuai,mianban,wangxian,shigongren,xianchangbeizhu,beizhuhuizong,shebeixiaoshou,cailiaofei,kaipiaoxinxi,pipeizhuangtai,shoukuanshijian,@username,@xiugai
	from yonghushuju
	where 1=1
	[and uuid=@uuid]
	[and xiaoqu=@xiaoqu]
	[and dizhi=@dizhi]
	[and yonghuzhuangtai=@yonghuzhuangtai]
	]]>
	</sql>


	<!-- 获取所有员工编号 -->
	<sql id="getUserInfoJobId">
	<![CDATA[
	SELECT Job_ID Job_ID
	FROM userinfo
	]]>
	</sql>

	<!-- 更新用户数据 -->
	<sql id="updateYonghuDataById">
		<![CDATA[
		UPDATE yonghushuju
		SET 	yonghuzhuangtai=@yonghuzhuangtai,
				xingming=@xingming,
				shenfenzheng=@shenfensheng,
				shoujuhao=@shoujuhao,
				fenguangxianhao=@fenguangxianhao,
				jiexuweizhi=@jiexuweizhi,
				kaijishijian=@kaijishijian,
				tingjishijian=@tingjishijian,
				youxiaoshijian=@youxiaoshijian,
				xiaoqu=@xiaoqu,
				dizhi=@dizhi,
				lianxidianhua=@lianxidianhua,
				wangluo=@wangluo,
				dianshi=@dianshi,
				dianhua=@dianhua,
				yewu=@yewu,
				fenguang=@fenguang,
				onumac=@onumac,
				stbmcid=@stbmcid,
				dianshiip=@dianshiip,
				wangluoip=@wangluoip,
				dianhuaip=@dianhuaip,
				dianhuavlan=@dianhuavlan,
				wangluovlan=@wangluovlan,
				[shangmenshijian=@shangmenshijian,]
				[danzheng=@danzheng,]
				[sxdhhm=@sxdhhm,]
				[onuyj=@onuyj,]
				[jidingheyj=@jidingheyj,]
				[shoushifei=@shoushifei,]
				[kuandaifei=@kuandaifei,]
				[chuzhuangfei=@chuzhuangfei,]
				[shebeixiaoshou=@shebeixiaoshou,]
				[cailiaofei=@cailiaofei,]
				[yunyingshang=@yunyingshang,]
				[bzygf=@bzygf,]
				[nianfei=@nianfei,]
				[beizhu=@beizhu,]
				[zongshoufei=@zongshoufei,]
				[shoujubenhao=@shoujubenhao,]
				[kaipiaoxinxi=@kaipiaoxinxi,]
				[qtsbsyqk=@qtsbsyqk,]
				[qitahaocai=@qitahaocai,]
				[jiexianzi=@jiexianzi,]
				[rj11=@rj11,]
				[rj45=@rj45,]
				[mokuai=@mokuai,]
				[mianban=@mianban,]
				[wangxian=@wangxian,]
				[shigongren=@shigongren,]
				[xianchangbeizhu=@xianchangbeizhu,]
				[beizhuhuizong=@beizhuhuizong,]
				[shebeixiaoshou=@shebeixiaoshou,]
				[cailiaofei=@cailiaofei,]
				[kaipiaoxinxi=@kaipiaoxinxi,]
				pipeizhuangtai=@pipeizhuangtai,
				shoukuanshijian=@shoukuanshijian,
				updateby=@username,
				updatedt=@updatedt
		WHERE UUID = @UUID
		]]>
	</sql>
	<!-- 根据已续费 用户 更新已安装用户网络数据 -->
	<sql id="updateAnZhuangWangluoDataByUser">
		<![CDATA[
		UPDATE  yonghushuju
		SET 	yonghuzhuangtai=@yonghuzhuangtai,
				youxiaoshijian=@tingjishijian,
				wangluo=@wangluo
	     WHERE yonghuzhuangtai = @yonghuzhuangtai
	     [AND wangluoip=@wangluoip]
	     [AND xiaoqu=@xiaoqu]
		 [AND dizhi=@dizhi]
		 AND wangluo<>'0'
		]]>
	</sql>

	<!-- 根据已续费 用户 更新已安装用户电视数据 -->
	<sql id="updateAnZhuangDianshiDataByUser">
		<![CDATA[
		UPDATE  yonghushuju
		SET 	yonghuzhuangtai=@yonghuzhuangtai,
				youxiaoshijian=@tingjishijian,
				dianshi=@dianshi
	    WHERE yonghuzhuangtai = @yonghuzhuangtai
	    [AND dianhuaip=@dianshiip]
	    [AND xiaoqu=@xiaoqu]
		[AND dizhi=@dizhi]
		AND dianshi<>'0'
		]]>
	</sql>

	<!-- 更新用户数据 -->
	<sql id="updateJiaofeiDataById">
		<![CDATA[
		UPDATE yonghushuju
		SET 	kaijishijian=@kaijishijian,
				tingjishijian=@tingjishijian,
				updateby=@username,
				updatedt=@updatedt
		WHERE UUID = @UUID
		]]>
	</sql>

	<!-- 比对查询已安装记录 -->
	<sql id="comparisonYianzhuangData">
		<![CDATA[
	    SELECT
	    t.UUID		 	        PK_ID
	    ,t.yonghuzhuangtai		yonghuzhuangtai
	    ,t.pipeizhuangtai		pipeizhuangtai
	    ,t.shoukuanshijian		shoukuanshijian
		,t.xingming	            xingming
		,t.shenfenzheng	        shenfensheng
		,t.shoujuhao	        shoujuhao
		,t.fenguangxianhao	    fenguangxianhao
		,t.jiexuweizhi	        jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,t.xiaoqu               xiaoqu
		,t.dizhi                dizhi
		,t.lianxidianhua        lianxidianhua
		,t.wangluo              wangluo
		,t.dianshi              dianshi
		,t.dianhua              dianhua
		,t.yewu                 yewu
		,t.fenguang             fenguang
		,t.onumac               onumac
		,t.stbmcid              stbmcid
		,t.dianshiip            dianshiip
		,t.wangluoip            wangluoip
		,t.dianhuaip            dianhuaip
		,t.dianhuavlan          dianhuavlan
		,t.wangluovlan          wangluovlan
		,t.shangmenshijian      shangmenshijian
		,t.danzheng             danzheng
		,t.sxdhhm               sxdhhm
		,t.onuyj                onuyj
		,t.jidingheyj           jidingheyj
		,t.shoushifei           shoushifei
		,t.kuandaifei           kuandaifei
		,t.chuzhuangfei         chuzhuangfei
		,t.shebeixiaoshou       shebeixiaoshou
		,t.cailiaofei           cailiaofei
		,t.yunyingshang         yunyingshang
		,t.bzygf                bzygf
		,t.nianfei              nianfei
		,t.beizhu               beizhu
		,t.zongshoufei          zongshoufei
		,t.shoujubenhao         shoujubenhao
		,t.kaipiaoxinxi         kaipiaoxinxi
		,t.qtsbsyqk             qtsbsyqk
		,t.qitahaocai           qitahaocai
		,t.jiexianzi            jiexianzi
		,t.rj11                 rj11
		,t.rj45                 rj45
		,t.mokuai               mokuai
		,t.mianban              mianban
		,t.wangxian             wangxian
		,t.shigongren           shigongren
		,t.xianchangbeizhu      xianchangbeizhu
		,t.beizhuhuizong        beizhuhuizong
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai = '已安装'
		[AND xiaoqu=@xiaoqu]
		[AND dizhi=@dizhi]
		UNION
	SELECT
	         h.UUID		 	        PK_ID
		,h.yonghuzhuangtai		yonghuzhuangtai
		,h.pipeizhuangtai		pipeizhuangtai
		,h.shoukuanshijian		shoukuanshijian
		,h.xingming	            xingming
		,h.shenfenzheng	        shenfensheng
		,h.shoujuhao	        shoujuhao
		,h.fenguangxianhao	    fenguangxianhao
		,h.jiexuweizhi	        jiexuweizhi
		,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
		,DATE_FORMAT(h.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
		,h.xiaoqu               xiaoqu
		,h.dizhi                dizhi
		,h.lianxidianhua        lianxidianhua
		,h.wangluo              wangluo
		,h.dianshi              dianshi
		,h.dianhua              dianhua
		,h.yewu                 yewu
		,h.fenguang             fenguang
		,h.onumac               onumac
		,h.stbmcid              stbmcid
		,h.dianshiip            dianshiip
		,h.wangluoip            wangluoip
		,h.dianhuaip            dianhuaip
		,h.dianhuavlan          dianhuavlan
		,h.wangluovlan          wangluovlan
		,h.shangmenshijian      shangmenshijian
		,h.danzheng             danzheng
		,h.sxdhhm               sxdhhm
		,h.onuyj                onuyj
		,h.jidingheyj           jidingheyj
		,h.shoushifei           shoushifei
		,h.kuandaifei           kuandaifei
		,h.chuzhuangfei         chuzhuangfei
		,h.shebeixiaoshou       shebeixiaoshou
		,h.cailiaofei           cailiaofei
		,h.yunyingshang         yunyingshang
		,h.bzygf                bzygf
		,h.nianfei              nianfei
		,h.beizhu               beizhu
		,h.zongshoufei          zongshoufei
		,h.shoujubenhao         shoujubenhao
		,h.kaipiaoxinxi         kaipiaoxinxi
		,h.qtsbsyqk             qtsbsyqk
		,h.qitahaocai           qitahaocai
		,h.jiexianzi            jiexianzi
		,h.rj11                 rj11
		,h.rj45                 rj45
		,h.mokuai               mokuai
		,h.mianban              mianban
		,h.wangxian             wangxian
		,h.shigongren           shigongren
		,h.xianchangbeizhu      xianchangbeizhu
		,h.beizhuhuizong        beizhuhuizong
		FROM huidandata h
		WHERE

		    h.xiaoqu=@xiaoqu
		AND h.dizhi=@dizhi
		AND h.Lifecycle_sta IN (3,4,2)
		]]>
	</sql>

	<!-- 查询所有查询条件列表 -->
	<sql id="getSenListAll">
		<![CDATA[
		SELECT distinct t.name	MODULE_KEY
				,t.disvalue	MODULE_VALUE
		FROM searchlist t where t.lifecyclestatus=1
	]]>
	</sql>

	<!-- 查询一定时间内用户数 -->
	<sql id="getResultYonghuCount">
		<![CDATA[
		SELECT t2.xiaoqu xiaoqu1,
		(SELECT COUNT(DISTINCT dizhi) FROM yonghushuju c WHERE c.yonghuzhuangtai='已安装'  AND c.xiaoqu=t2.xiaoqu
		[AND kaijishijian >= @kaijis]
		[AND kaijishijian <= @kaijie]
		[AND tingjishijian >= @tingjis]
		[AND tingjishijian <= @tingjie]
		[AND shoukuanshijian >= @shoukuanshijians]
		[AND shoukuanshijian <= @shoukuanshijiane]
		[AND youxiaoshijian >= @youxiaoshijians]
		[AND youxiaoshijian <= @youxiaoshijiane]
		[AND t2.xiaoqu =@xiaoqu] ) huNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已安装' AND t2.dianhua<>'0' AND  t2.dianhua<>''  AND (t2.wangluo='0' OR t2.wangluo='') AND (t2.dianshi='0' OR t2.dianshi='')) THEN  1   ELSE  0   END )  dh_anzhuangNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已安装' AND t2.wangluo<>'0' AND t2.wangluo<>''   AND (t2.dianshi='0' OR t2.dianshi='') AND (t2.dianhua='0' OR t2.dianhua='')) THEN  1   ELSE  0   END )  wl_anzhuangNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已安装' AND t2.dianshi<>'0' AND t2.dianshi<>'' AND (t2.dianhua='0' OR t2.dianhua='') AND (t2.wangluo='0' OR t2.wangluo='')) THEN  1   ELSE  0   END )  ds_anzhuangNum,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  1   ELSE  0   END )  anzhuangNum,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修 '  THEN  1   ELSE  0   END )  weixiuNum ,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已续费' AND   t2.dianhua<>'0' AND  t2.dianhua<>'' AND (t2.wangluo='0' OR t2.wangluo='') AND (t2.dianshi='0' OR t2.dianshi='')) THEN  1   ELSE  0   END )  dh_xufeiNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已续费' AND   t2.wangluo<>'0' AND t2.wangluo<>''  AND (t2.dianshi='0' OR t2.dianshi='') AND (t2.dianhua='0' OR t2.dianhua='')) THEN  1   ELSE  0   END )  wl_xufeiNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已续费' AND   t2.dianshi<>'0' AND t2.dianshi<>''  AND (t2.dianhua='0' OR t2.dianhua='') AND (t2.wangluo='0' OR t2.wangluo='')) THEN  1   ELSE  0   END )  ds_xufeiNum,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  1   ELSE  0   END )  xufeiNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已退订 ' AND t2.dianhua<>'0' AND  t2.dianhua<>'' AND (t2.wangluo='0' OR t2.wangluo='') AND (t2.dianshi='0' OR t2.dianshi='')) THEN  1   ELSE  0   END )  dh_tuidingNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已退订 ' AND t2.wangluo<>'0' AND t2.wangluo<>''  AND (t2.dianshi='0' OR t2.dianshi='') AND (t2.dianhua='0' OR t2.dianhua='')) THEN  1   ELSE  0   END )  wl_tuidingNum,
		SUM( CASE WHEN (t2.yonghuzhuangtai ='已退订 ' AND  t2.dianshi<>'0' AND t2.dianshi<>''  AND (t2.dianhua='0' OR t2.dianhua='') AND (t2.wangluo='0' OR t2.wangluo='')) THEN  1   ELSE  0   END )  ds_tuidingNum,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已退订 '  THEN  1   ELSE  0   END )  tuidingNum
		FROM
		xiaoqucode1 t1,yonghushuju t2
		WHERE
		t1.NAME =t2.xiaoqu
		[AND t2.xiaoqu =@xiaoqu]
		[AND t2.kaijishijian >= @kaijis]
		[AND t2.kaijishijian <= @kaijie]
		[AND t2.tingjishijian >= @tingjis]
		[AND t2.tingjishijian <= @tingjie]
		[AND t2.shoukuanshijian >= @shoukuanshijians]
		[AND t2.shoukuanshijian <= @shoukuanshijiane]
		[AND t2.youxiaoshijian >= @youxiaoshijians]
		[AND t2.youxiaoshijian <= @youxiaoshijiane]
		GROUP BY t2.xiaoqu

		]]>
	</sql>

	<!-- 查询用户数目增减 -->
	<sql id="getResultYonghuIncomeCount">
		<![CDATA[
		SELECT COUNT(t1.UUID) c
		FROM yonghushuju t1
		WHERE
		(1=1
		[AND t1.yonghuzhuangtai=@yonghuzhuangtai]
		[AND t1.xiaoqu=@xiaoqu]
		[AND kaijishijian < DATE_ADD(@kaijis, INTERVAL @num MONTH)]
		)
	]]>
	</sql>

	<!-- 查询运营商数量 -->
	<sql id="getYunYingShangData">
		<![CDATA[
		SELECT xiaoqu , yunyingshang ,
 SUM(
    CASE
      WHEN (
        t2.yonghuzhuangtai = '已安装'
        AND t2.dianhua <> '0'
        AND t2.dianhua <> ''
        AND (t2.wangluo = '0'
          OR t2.wangluo = '')
        AND (t2.dianshi = '0'
          OR t2.dianshi = '')
      )
      THEN 1
      ELSE 0
    END
  ) dh_anzhuangNum,
  SUM(
    CASE
      WHEN (
        t2.yonghuzhuangtai = '已安装'
        AND t2.wangluo <> '0'
        AND t2.wangluo <> ''
        AND (t2.dianshi = '0'
          OR t2.dianshi = '')
        AND (t2.dianhua = '0'
          OR t2.dianhua = '')
      )
      THEN 1
      ELSE 0
    END
  ) wl_anzhuangNum,

  SUM(
    CASE
      WHEN (
        t2.yonghuzhuangtai = '已安装'
        AND t2.dianshi <> '0'
        AND t2.dianshi <> ''
        AND (t2.dianhua = '0'
          OR t2.dianhua = '')
        AND (t2.wangluo = '0'
          OR t2.wangluo = '')
      )
      THEN 1
      ELSE 0
    END
  ) ds_anzhuangNum

FROM yonghushuju t2
WHERE  yonghuzhuangtai = '已安装'
		[AND t2.xiaoqu =@xiaoqu]
		[AND t2.kaijishijian >= @kaijis]
		[AND t2.kaijishijian <= @kaijie]
		[AND t2.tingjishijian >= @tingjis]
		[AND t2.tingjishijian <= @tingjie]
		[AND t2.shoukuanshijian >= @shoukuanshijians]
		[AND t2.shoukuanshijian <= @shoukuanshijiane]
		[AND t2.youxiaoshijian >= @youxiaoshijians]
		[AND t2.youxiaoshijian <= @youxiaoshijiane]
 GROUP BY yunyingshang	,xiaoqu
	]]>
	</sql>


	<!-- 查询收费增减 -->
	<sql id="getResultYonghuCostCount">
		<![CDATA[
		SELECT  SUM(zongshoufei) c
		FROM yonghushuju t1
		WHERE
		(1=1
		[AND t1.yonghuzhuangtai=@yonghuzhuangtai]
		[AND t1.xiaoqu=@xiaoqu]
		[AND kaijishijian < DATE_ADD(@kaijis, INTERVAL @num MONTH)]
		)
	]]>
	</sql>

	<!-- 收费统计 -->
	<sql id="getResultShoufeiTotal">
		<![CDATA[
		SELECT t2.xiaoqu xiaoqu1,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  IFNULL(t2.shoushifei,0)   ELSE  0   END ) AS az_shoushifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  IFNULL(t2.kuandaifei,0)  ELSE  0   END ) AS az_kuandaifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  IFNULL(t2.onuyj,0)+IFNULL(t2.jidingheyj,0)  ELSE  0   END ) AS az_onujidingheyj,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  IFNULL(t2.chuzhuangfei,0)+IFNULL(t2.shebeixiaoshou,0)+IFNULL(t2.cailiaofei,0)  ELSE  0   END ) AS az_zafei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0) ELSE  0   END ) AS az_zong,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  IFNULL(t2.shoushifei,0)   ELSE  0   END ) AS wx_shoushifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  IFNULL(t2.kuandaifei,0)   ELSE  0   END ) AS wx_kuandaifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  IFNULL(t2.onuyj,0)+IFNULL(t2.jidingheyj,0)   ELSE  0   END ) AS wx_onujidingheyj,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  IFNULL(t2.chuzhuangfei,0)+IFNULL(t2.shebeixiaoshou,0)+IFNULL(t2.cailiaofei,0)  ELSE  0   END ) AS wx_zafei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) AS wx_zong,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  IFNULL(t2.shoushifei,0)   ELSE  0   END ) AS xf_shoushifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  IFNULL(t2.kuandaifei,0)  ELSE  0   END ) AS xf_kuandaifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  IFNULL(t2.onuyj,0)+IFNULL(t2.jidingheyj,0)  ELSE  0   END ) AS xf_onujidingheyj,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) AS xf_zong,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已退订'  THEN  IFNULL(t2.shoushifei,0)   ELSE  0   END ) AS td_shoushifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已退订'  THEN  IFNULL(t2.kuandaifei,0)   ELSE  0   END ) AS td_kuandaifei,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已退订'  THEN  IFNULL(t2.onuyj,0)+IFNULL(t2.jidingheyj,0)   ELSE  0   END ) AS td_onujidingheyj,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已退订'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) AS td_zong,
		SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) +
		SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) +
		SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) -
		SUM( CASE t2.yonghuzhuangtai  WHEN '已退订'  THEN  IFNULL(t2.shoushifei,0) + IFNULL(t2.kuandaifei,0) + IFNULL(t2.onuyj,0) + IFNULL(t2.jidingheyj,0) + IFNULL(t2.chuzhuangfei,0) + IFNULL(t2.bzygf,0) + IFNULL(t2.nianfei,0) + IFNULL(t2.shebeixiaoshou,0)+ IFNULL(t2.cailiaofei,0)  ELSE  0   END ) AS zongji
		FROM xiaoqucode1 t1,yonghushuju t2
		WHERE t1.NAME =t2.xiaoqu
		[AND t2.xiaoqu =@xiaoqu]
		[AND t2.kaijishijian >= @kaijis]
		[AND t2.kaijishijian <= @kaijie]
		[AND t2.tingjishijian >= @tingjis]
		[AND t2.tingjishijian <= @tingjie]
		[AND t2.shoukuanshijian >= @shoukuanshijians]
		[AND t2.shoukuanshijian <= @shoukuanshijiane]
		[AND t2.youxiaoshijian >= @youxiaoshijians]
		[AND t2.youxiaoshijian <= @youxiaoshijiane]
		GROUP BY t2.xiaoqu
	]]>
	</sql>

	<!-- 施工人耗材统计 -->
	<sql id="getResultShigongTotal">
		<![CDATA[
		SELECT
		shigongren  AS shigongren,
		jiexianzi  AS jiexianzi,
		rj11       AS rj11,
		rj45       AS rj45,
		mokuai     AS mokuai,
		mianban    AS mianban,
		wangxian   AS wangxian,
		qitahaocai AS qitahaocai
		FROM
		yonghushuju
		WHERE 1=1
		[AND xiaoqu = @xiaoqu]
		[AND kaijishijian  BETWEEN @kaijis AND @tingjis]
		AND shigongren <>''
		ORDER BY shigongren
	]]>
	</sql>

	<!-- 施工人统计 -->
	<sql id="getResultShigongrenCount">
		<![CDATA[
		 SELECT t2.shigongren,
		 SUM( CASE t2.yonghuzhuangtai  WHEN '已安装'  THEN  1   ELSE  0   END )  anzhuangNum,
		 SUM( CASE t2.yonghuzhuangtai  WHEN '已维修'  THEN  1   ELSE  0   END )  weixiuNum,
		 SUM( CASE t2.yonghuzhuangtai  WHEN '已续费'  THEN  1   ELSE  0   END )  xufeiNum,
		 SUM( CASE t2.yonghuzhuangtai  WHEN '已退订'  THEN  1   ELSE  0   END )  tuidingNum
		 FROM xiaoqucode1 t1,yonghushuju t2
		 WHERE t1.NAME =t2.xiaoqu
		 [AND t2.xiaoqu = @xiaoqu]
		[AND t2.kaijishijian >= @kaijis]
		[AND t2.kaijishijian <= @kaijie]
		[AND t2.tingjishijian >= @tingjis]
		[AND t2.tingjishijian <= @tingjie]
		[AND t2.shoukuanshijian >= @shoukuanshijians]
		[AND t2.shoukuanshijian <= @shoukuanshijiane]
		[AND t2.youxiaoshijian >= @youxiaoshijians]
		[AND t2.youxiaoshijian <= @youxiaoshijiane]
		 GROUP BY t2.shigongren
	]]>
	</sql>

	<!-- 小区耗材统计 -->
	<sql id="getResultXiaoquHaocai">
		<![CDATA[
		 SELECT t2.xiaoqu xiaoqu1,
		IFNULL(SUM(jiexianzi),0)   jiexianziNum ,
		 IFNULL(SUM(rj11),0)        rj11Num,
		 IFNULL(SUM(rj45),0)        rj45Num,
		 IFNULL(SUM(mokuai),0)      mokuaiNum,
		IFNULL( SUM(mianban),0)     mianbanNum,
		 IFNULL(SUM(wangxian),0)    wangxianNum
		 FROM xiaoqucode1 t1,yonghushuju t2
		 WHERE t1.NAME =t2.xiaoqu
		 [AND t2.xiaoqu = @xiaoqu]
		[AND t2.kaijishijian >= @kaijis]
		[AND t2.kaijishijian <= @kaijie]
		[AND t2.tingjishijian >= @tingjis]
		[AND t2.tingjishijian <= @tingjie]
		[AND t2.shoukuanshijian >= @shoukuanshijians]
		[AND t2.shoukuanshijian <= @shoukuanshijiane]
		[AND t2.youxiaoshijian >= @youxiaoshijians]
		[AND t2.youxiaoshijian <= @youxiaoshijiane]
		 GROUP BY t2.xiaoqu
	]]>
	</sql>

	<!-- change by 赵兴华 2015-01-19    查询待缴费用户数据LIST-->
	<sql id="GetDaijiaofeiList">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.UUID uuid
		,t.xingming xingming
		,t.shenfenzheng shenfenzheng
		,t.lianxidianhua lianxidianhua
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.nianfei nianfei
		,t.yewu yewu
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.shigongren shigongren
		,t.beizhuhuizong beizhuhuizong
		,t.yunyingshang yunyingshang
		,c.netcode netcode
		FROM yonghushuju t ,community c
		WHERE
		t.yonghuzhuangtai='待缴费'
	 	AND c.CommunityName = t.xiaoqu
	 	AND t.isuse = 0
	 	[AND t.uuid=@UUID]
		]]>
	</sql>

	<!-- change by 赵兴华 2015-01-19    查询待退订和带修改密码用户数据LIST -->
	<sql id="GetOperateList">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.nianfei nianfei
		,t.yewu yewu
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.shigongren shigongren
		,t.beizhuhuizong beizhuhuizong
		,t.yunyingshang yunyingshang
		,c.netcode netcode
		,t.createdt createdt
		FROM yonghushuju t, community c
		WHERE
		(t.yonghuzhuangtai='待修改' or t.yonghuzhuangtai='待退订')
	 	AND c.CommunityName = t.xiaoqu
	 	AND t.isuse = 0
	 	[AND t.uuid=@UUID]
		]]>
	</sql>

	<!-- 根据UUID获取数据 -->
	<sql id="GetByUUID">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.UUID uuid
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xingming xingming
		,t.shenfenzheng shenfenzheng
		,t.shoujuhao shoujuhao
		,t.fenguangxianhao fenguangxianhao
		,t.jiexuweizhi jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.yewu yewu
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian	shoukuanshijian
		,t.createdt createdt
		,t.yunyingshang yunyingshang
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.weixiuleixing weixiuleixing
		,t.youxiaoshijian youxiaoshijian
		,t.userId userId
		FROM yonghushuju t
		WHERE
	 	t.isuse = 0
	 	AND t.uuid=@uuid
		]]>
	</sql>


	<!-- 根据UUID获取数据 -->
	<sql id="GetByUUIDFromHuidan">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.UUID uuid
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xingming xingming
		,t.shenfenzheng shenfenzheng
		,t.shoujuhao shoujuhao
		,t.fenguangxianhao fenguangxianhao
		,t.jiexuweizhi jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.yewu yewu
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian	shoukuanshijian
		,t.createdt createdt
		,t.yunyingshang yunyingshang
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.youxiaoshijian youxiaoshijian
		,t.userId userId
		,t.yewutype yewutype
		,t.CommunityPile_ID
		,t.CommunityPile_ID2
		,t.fenguangID
		,t.onumac
		,t.stbmcid
		FROM huidandata t
		WHERE
	 	t.uuid=@uuid
		]]>
	</sql>

	<!-- 回单导入，确认界面，开户 -->
	<sql id="GetByUUIDFormHuidanData">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.UUID uuid
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.xingming xingming
		,t.shenfenzheng shenfenzheng
		,t.shoujuhao shoujuhao
		,t.fenguangxianhao fenguangxianhao
		,t.jiexuweizhi jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.wangluoip wangluoip
		,t.dianshi dianshi
		,t.dianshiip dianshiip
		,t.dianhua dianhua
		,t.dianhuaip dianhuaip
		,t.yewu yewu
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian	shoukuanshijian
		,t.createdt createdt
		,t.yunyingshang yunyingshang
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.youxiaoshijian youxiaoshijian
		FROM huidandata t
		WHERE
	 	t.uuid=@uuid
		]]>
	</sql>


	<!-- 查询维修待处理用户数据LIST -->
	<sql id="GetDaiweixiuList">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.kuandaifei kuandaifei
		,t.shoushifei shoushifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.nianfei nianfei
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.zongshoufei zongshoufei
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.qitahaocai qitahaocai
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.shigongren shigongren
		,t.beizhuhuizong beizhuhuizong
		,t.weixiuleixing weixiuleixing
		,t.yunyingshang yunyingshang
		,t.CommunityPile_ID CommunityPile_ID
		,t.CommunityPile_ID2 CommunityPile_ID2
		,t.fenguangID fenguangID
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='维修待处理'
	 	[AND t.uuid=@UUID]
	 	[AND t.weixiuleixing=@weixiuleixing]
	 	[AND t.xiaoqu=@xiaoqu]
	 	[AND t.dizhi LIKE @dizhi]
	 	[AND t.shoukuanshijian=@shoukuanshijian]
	 	ORDER BY t.weixiuleixing,t.xiaoqu,t.dizhi,t.shoukuanshijian
		]]>
	</sql>

		<!-- 查询维修待处理用户数据LIST -->

	<sql id="GetEBBOXIDByPGDuuid">
		<![CDATA[
		SELECT
		    EqBoxNum
		  FROM
		    product p
		    LEFT JOIN communitypile Y
		      ON y.CommunityPile_ID=@UUID
		  WHERE p.Product_ID = y.Product_ID
		]]>
	</sql>

	<sql id="GetEBNBOXIDByUSERuuid">
		<![CDATA[
		SELECT
		    EqBoxNum
		  FROM
		    product p
		    LEFT JOIN communitypile Y
		      ON y.CommunityPile_ID=@UUID
		  WHERE p.Product_ID = y.Product_ID
		]]>
	</sql>

	<!-- 获取用修改密码的记录 -->
	<sql id="GetOperateList">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.kuandaifei kuandaifei
		,t.shoushifei shoushifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.nianfei nianfei
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.zongshoufei zongshoufei
		,t.yewu yewu
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.qitahaocai qitahaocai
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.shigongren shigongren
		,t.beizhuhuizong beizhuhuizong
		,t.weixiuleixing weixiuleixing
		,t.yunyingshang yunyingshang
		FROM yonghushuju t
		WHERE
	 	t.uuid=@UUID
		]]>
	</sql>

	<!-- 查询待缴费用户count -->
	<sql id="GetDaijiaofeiCount">
		<![CDATA[
		SELECT count(*) CNT
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='待缴费'
		]]>
	</sql>
	<!-- 查询待退订用户count -->
	<sql id="GetOperateCount">
		<![CDATA[
		SELECT count(*) CNT
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='待修改'
		or
		t.yonghuzhuangtai='待退订'
		]]>
	</sql>

	<!-- 查询待缴费用户count -->
	<sql id="GetDaiweixiuCount">
		<![CDATA[
		SELECT count(*) CNT
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='维修待处理'
		[AND t.weixiuleixing=@weixiuleixing]
	 	[AND t.xiaoqu=@xiaoqu]
	 	[AND t.dizhi LIKE @dizhi]
	 	[AND t.shoukuanshijian=@shoukuanshijian]
		]]>
	</sql>

	<!-- 审核后删除待缴费用户 -->
	<sql id="DeleteDaijiaofei">
		<![CDATA[
		DELETE
		FROM yonghushuju
		WHERE
		UUID=@UUID
		AND yonghuzhuangtai='待缴费'
		]]>
	</sql>

	<sql id="DeleteOperate">
		<![CDATA[
		DELETE
		FROM yonghushuju
		WHERE
		UUID=@UUID
		]]>
	</sql>


	<!-- 删除待维修用户 -->
	<sql id="DeleteDaiweixiu">
		<![CDATA[
		DELETE
		FROM yonghushuju
		WHERE
		UUID=@UUID
		]]>
	</sql>

	<sql id="RLIKExiaoqudizhi">
		<![CDATA[
		SELECT dizhi dz
		FROM yonghushuju t
		WHERE
		 t.yonghuzhuangtai='已安装'
		[AND t.xiaoqu=@xiaoqu]
		AND t.dizhi LIKE @dizhi
		]]>
	</sql>

	<sql id="findCounNum">
		<![CDATA[
		SELECT *
		FROM yonghushuju t
		WHERE
		 t.yonghuzhuangtai='已安装'
		[AND t.xiaoqu=@xiaoqu]
		[AND t.dizhi LIKE @dizhi]
		[AND t.wangluoip=@wangluoip]
		[AND t.dianhuaip=@dianhuaip]
		]]>
	</sql>


	<sql id="zhangmuList">
		<![CDATA[
		SELECT
		distinct t.UUID PK_ID,
		zhuangtai zhuangtai,
		cunkuanren cunkuanren,
		DATE_FORMAT(cunkuanshijian,'%Y-%m-%d') cunkuanshijian,
		cunkuanyinhang cunkuanyinhang,
		wangdianhao  wangdianhao,
		cunkuanjine cunkuanjine,
		xinxishuliang xinxishuliang,
		zongshoufeiheji zongshoufeiheji,
		(cunkuanjine-zongshoufeiheji) chazhi,
		(zongshoufeiheji-IFNULL(d.zongshoufei,0)) chazhi1
		FROM zhangmu t
		LEFT JOIN  (SELECT zmid,SUM(zongshoufei) zongshoufei
				     FROM caiwushuju
				     WHERE hedui = '已核对' group by zmid
	                ) d on d.zmid=t.UUID
	    left  join caiwushuju e on t.UUID=e.zmid
		WHERE
		t.zhuangtai=@zhuangtai
		[AND t.cunkuanren LIKE @cunkuanren]
		[AND t.cunkuanshijian >= @cunkuanshijians]
		[AND t.cunkuanshijian <= @cunkuanshijiane]
		[AND t.cunkuanyinhang LIKE @cunkuanyinhang]
		[AND t.wangdianhao LIKE @wangdianhao]
		[AND t.cunkuanjine LIKE @cunkuanjine]
		[AND (zongshoufeiheji - IFNULL(d.zongshoufei, 0))= (@chazhi+0)]
		[AND e.xiaoqu like @xiaoqu]
		[AND e.dizhi like @dizhi]
		[AND e.shoujuhao like @shoujuhao]
		]]>
	</sql>
	<sql id="zhangmuList3">
		<![CDATA[
		SELECT
		UUID PK_ID,
		zhuangtai zhuangtai,
		cunkuanren cunkuanren,
		DATE_FORMAT(cunkuanshijian,'%Y-%m-%d') cunkuanshijian,
		cunkuanyinhang cunkuanyinhang,
		wangdianhao  wangdianhao,
		cunkuanjine cunkuanjine,
		xinxishuliang xinxishuliang,
		zongshoufeiheji zongshoufeiheji
		FROM zhangmu t
		WHERE
		t.zhuangtai=@zhuangtai
		[AND t.cunkuanren=@cunkuanren]
		[AND t.cunkuanshijian >= @cunkuanshijians]
		[AND t.cunkuanshijian <= @cunkuanshijiane]
		[AND t.cunkuanyinhang=@cunkuanyinhang]
		[AND t.wangdianhao=@wangdianhao]
		[AND t.cunkuanjine=@cunkuanjine]
		]]>
	</sql>

	<!-- 查询状态账目LIST -->
	<sql id="countZhangmuList">
		<![CDATA[
		SELECT count(*) CNT
		FROM zhangmu t
		WHERE
		t.zhuangtai=@zhuangtai
		[AND t.cunkuanren LIKE @cunkuanren]
		[AND t.cunkuanshijian >= @cunkuanshijians]
		[AND t.cunkuanshijian <= @cunkuanshijiane]
		[AND t.cunkuanyinhang LIKE @cunkuanyinhang]
		[AND t.wangdianhao LIKE @wangdianhao]
		[AND t.cunkuanjine LIKE @cunkuanjine]
		]]>
	</sql>

	<!-- 查询对应账目的信息数量 -->
	<sql id="countToZhangmuList">
		<![CDATA[
		SELECT count(*) CNT
		FROM caiwushuju t
		WHERE 1=1
		[AND t.zmid=@zmid]
		]]>
	</sql>

	<!-- 查询对应账目的总收费 -->
	<sql id="sumZongshoufeiToZhangmuList">
		<![CDATA[
		SELECT SUM(zongshoufei) zongshoufei
		FROM caiwushuju t
		WHERE 1=1
		[AND t.zmid=@zmid]
		]]>
	</sql>

	<sql id="getZhangmuXinxi">
		<![CDATA[
		SELECT
		zhuangtai zhuangtai,
		cunkuanren cunkuanren,
		DATE_FORMAT(cunkuanshijian,'%Y-%m-%d')	cunkuanshijian,
		cunkuanyinhang cunkuanyinhang,
		wangdianhao  wangdianhao,
		cunkuanjine cunkuanjine,
		xinxishuliang xinxishuliang,
		zongshoufeiheji zongshoufeiheji,
		(cunkuanjine-zongshoufeiheji) chazhi,
		b.zongshoufei,
		(zongshoufeiheji-IFNULL(b.zongshoufei ,0)) chazhi1
		FROM zhangmu t
   		left join (SELECT SUM(zongshoufei) zongshoufei,zmid FROM caiwushuju WHERE  hedui = '已核对' group by zmid) b on t.uuid=b.zmid
		WHERE 1=1
		[AND t.uuid=@UUID]
		]]>
	</sql>

	<sql id="getZhangmuHeduiXinxi">
		<![CDATA[

		SELECT
		zhuangtai zhuangtai,
		(SELECT COUNT(*) FROM caiwushuju  WHERE zmid=@UUID AND hedui = '已核对') AS yihedui,
		cunkuanren cunkuanren,
		DATE_FORMAT(cunkuanshijian,'%Y-%m-%d')	cunkuanshijian,
		cunkuanyinhang cunkuanyinhang,
		wangdianhao  wangdianhao,
		cunkuanjine cunkuanjine,
		xinxishuliang xinxishuliang,
		zongshoufeiheji zongshoufeiheji,
		(zongshoufeiheji-IFNULL((SELECT SUM(zongshoufei) FROM caiwushuju WHERE zmid=@UUID AND hedui = '已核对') ,0)) chazhi
		FROM zhangmu t ,caiwushuju
		WHERE 1=1
		AND t.uuid=@UUID
		GROUP BY hedui
		]]>
	</sql>

	<!-- 查询未匹配用户数据LIST -->
	<sql id="GetWeipipeiDataList">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		FROM yonghushuju t
		WHERE 1=1
		AND t.zongshoufei <>'0'
		AND t.zongshoufei<>''
		AND t.pipeizhuangtai='未匹配'
	 	AND (t.yonghuzhuangtai='已安装' OR t.yonghuzhuangtai='已续费' OR t.yonghuzhuangtai='已维修' OR t.yonghuzhuangtai='已收件')
		[AND t.xiaoqu LIKE @quyu1]
		[AND t.dizhi LIKE @address]
		[AND t.yonghuzhuangtai=@state]
		[AND t.kaijishijian >= @kaijis]
		[AND t.kaijishijian <= @kaijie]
		[AND t.tingjishijian >= @tingjis]
		[AND t.tingjishijian <= @tingjie]
		[AND t.shoukuanshijian >= @shoukuanshijians]
		[AND t.shoukuanshijian <= @shoukuanshijiane]
		[AND t.xingming	LIKE @xingming]
		[AND t.shenfenzheng	LIKE @shenfensheng]
		[AND t.shoujuhao LIKE	@shoujuhao]
		[AND t.fenguangxianhao LIKE	@fenguangxianhao]
		[AND t.jiexuweizhi LIKE	@jiexuweizhi]
		[AND t.lianxidianhua LIKE @lianxidianhua]
		[AND t.wangluo LIKE @wangluo]
		[AND t.dianshi LIKE @dianshi]
		[AND t.dianhua LIKE @dianhua]
		[AND t.yewu LIKE @yewu]
		[AND t.fenguang LIKE @fenguang]
		[AND t.onumac LIKE @onumac]
		[AND t.stbmcid LIKE @stbmcid]
		[AND t.dianshiip LIKE @dianshiip]
		[AND t.wangluoip LIKE @wangluoip]
		[AND t.dianhuaip LIKE @dianhuaip]
		[AND t.dianhuavlan LIKE @dianhuavlan]
		[AND t.wangluovlan LIKE @wangluovlan]
		[AND t.shangmenshijian LIKE @shangmenshijian]
		[AND t.danzheng LIKE @danzheng]
		[AND t.sxdhhm LIKE @sxdhhm]
		[AND t.onuyj LIKE @onuyj]
		[AND t.jidingheyj LIKE @jidingheyj]
		[AND t.shoushifei LIKE @shoushifei]
		[AND t.kuandaifei LIKE @kuandaifei]
		[AND t.chuzhuangfei LIKE @chuzhuangfei]
		[AND t.yunyingshang LIKE @yunyingshang]
		[AND t.bzygf LIKE @bzygf]
		[AND t.nianfei LIKE @nianfei]
		[AND t.beizhu LIKE @beizhu]
		[AND t.zongshoufei LIKE @zongshoufei]
		[AND t.shoujubenhao LIKE @shoujubenhao]
		[AND t.qtsbsyqk LIKE @qtsbsyqk]
		[AND t.qitahaocai LIKE @qitahaocai]
		[AND t.jiexianzi LIKE @jiexianzi]
		[AND t.rj11 LIKE @rj11]
		[AND t.rj45 LIKE @rj45]
		[AND t.mokuai LIKE @mokuai]
		[AND t.mianban LIKE @mianban]
		[AND t.wangxian LIKE @wangxian]
		[AND t.shigongren LIKE @shigongren]
		[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
		[AND t.beizhuhuizong LIKE @beizhuhuizong]
		[AND t.shoukuanshijian LIKE @shoukuanshijian]
		[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
		#
		]]>
	</sql>

	<!-- 查询已匹配用户数据LIST -->
	<sql id="GetYipipeiDataList">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.hedui		hedui
		,t.zhifuleixing		zhifuleixing
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian shoukuanshijian
		FROM caiwushuju t
		WHERE 1=1
		AND t.zmid = @zmid
		[AND t.hedui = @hedui]
		order by t.createdt desc
		]]>
	</sql>

	<sql id="GetWeipipeiDataCount">
		<![CDATA[
		SELECT count(*) CNT
		FROM yonghushuju t
		WHERE 1=1
		AND t.zongshoufei <>'0'
		AND t.zongshoufei<>''
		AND t.pipeizhuangtai='未匹配'
	 	AND (t.yonghuzhuangtai='已安装' OR t.yonghuzhuangtai='已续费' OR t.yonghuzhuangtai='已维修')
		[AND t.dizhi LIKE @address]
		[AND t.yonghuzhuangtai=@state]
		[AND t.kaijishijian >= @kaijis]
		[AND t.kaijishijian <= @kaijie]
		[AND t.tingjishijian >= @tingjis]
		[AND t.tingjishijian <= @tingjie]
		[AND t.shoukuanshijian >= @shoukuanshijians]
		[AND t.shoukuanshijian <= @shoukuanshijiane]
		[AND t.xingming	LIKE @xingming]
		[AND t.shenfenzheng	LIKE @shenfensheng]
		[AND t.shoujuhao LIKE	@shoujuhao]
		[AND t.fenguangxianhao LIKE	@fenguangxianhao]
		[AND t.jiexuweizhi LIKE	@jiexuweizhi]
		[AND t.lianxidianhua LIKE @lianxidianhua]
		[AND t.wangluo LIKE @wangluo]
		[AND t.dianshi LIKE @dianshi]
		[AND t.dianhua LIKE @dianhua]
		[AND t.yewu LIKE @yewu]
		[AND t.fenguang LIKE @fenguang]
		[AND t.onumac LIKE @onumac]
		[AND t.stbmcid LIKE @stbmcid]
		[AND t.dianshiip LIKE @dianshiip]
		[AND t.wangluoip LIKE @wangluoip]
		[AND t.dianhuaip LIKE @dianhuaip]
		[AND t.dianhuavlan LIKE @dianhuavlan]
		[AND t.wangluovlan LIKE @wangluovlan]
		[AND t.shangmenshijian LIKE @shangmenshijian]
		[AND t.danzheng LIKE @danzheng]
		[AND t.sxdhhm LIKE @sxdhhm]
		[AND t.onuyj LIKE @onuyj]
		[AND t.jidingheyj LIKE @jidingheyj]
		[AND t.shoushifei LIKE @shoushifei]
		[AND t.kuandaifei LIKE @kuandaifei]
		[AND t.chuzhuangfei LIKE @chuzhuangfei]
		[AND t.yunyingshang LIKE @yunyingshang]
		[AND t.bzygf LIKE @bzygf]
		[AND t.nianfei LIKE @nianfei]
		[AND t.beizhu LIKE @beizhu]
		[AND t.zongshoufei LIKE @zongshoufei]
		[AND t.shoujubenhao LIKE @shoujubenhao]
		[AND t.qtsbsyqk LIKE @qtsbsyqk]
		[AND t.qitahaocai LIKE @qitahaocai]
		[AND t.jiexianzi LIKE @jiexianzi]
		[AND t.rj11 LIKE @rj11]
		[AND t.rj45 LIKE @rj45]
		[AND t.mokuai LIKE @mokuai]
		[AND t.mianban LIKE @mianban]
		[AND t.wangxian LIKE @wangxian]
		[AND t.shigongren LIKE @shigongren]
		[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
		[AND t.beizhuhuizong LIKE @beizhuhuizong]
		[AND t.shoukuanshijian LIKE @shoukuanshijian]
		[AND t.kaipiaoxinxi LIKE @shoukuanshijian]
		[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
		#
		]]>
	</sql>

	<sql id="GetYipipeiDataCount">
		<![CDATA[
		SELECT count(*) CNT
		FROM caiwushuju t
		WHERE 1=1
	    AND t.zmid = @zmid
	    [AND t.hedui = @hedui]
		]]>
	</sql>

	<sql id="GetYipipeiDatasCount">
		<![CDATA[
		SELECT count(*) CNT
	    FROM caiwushuju t
	    WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai=@state]

	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.xingming	LIKE @xingming]
	[AND t.shenfenzheng	LIKE @shenfensheng]
	[AND t.shoujuhao LIKE	@shoujuhao]
	[AND t.fenguangxianhao LIKE	@fenguangxianhao]
	[AND t.jiexuweizhi LIKE	@jiexuweizhi]
	[AND t.lianxidianhua LIKE @lianxidianhua]
	[AND t.wangluo LIKE @wangluo]
	[AND t.dianshi LIKE @dianshi]
	[AND t.dianhua LIKE @dianhua]
	[AND t.yewu LIKE @yewu]
	[AND t.fenguang LIKE @fenguang]
	[AND t.onumac LIKE @onumac]
	[AND t.stbmcid LIKE @stbmcid]
	[AND t.dianshiip LIKE @dianshiip]
	[AND t.wangluoip LIKE @wangluoip]
	[AND t.dianhuaip LIKE @dianhuaip]
	[AND t.dianhuavlan LIKE @dianhuavlan]
	[AND t.wangluovlan LIKE @wangluovlan]
	[AND t.shangmenshijian LIKE @shangmenshijian]
	[AND t.danzheng LIKE @danzheng]
	[AND t.sxdhhm LIKE @sxdhhm]
	[AND t.onuyj LIKE @onuyj]
	[AND t.jidingheyj LIKE @jidingheyj]
	[AND t.shoushifei LIKE @shoushifei]
	[AND t.kuandaifei LIKE @kuandaifei]
	[AND t.chuzhuangfei LIKE @chuzhuangfei]
	[AND t.yunyingshang LIKE @yunyingshang]
	[AND t.bzygf LIKE @bzygf]
	[AND t.nianfei LIKE @nianfei]
	[AND t.beizhu LIKE @beizhu]
	[AND t.zongshoufei LIKE @zongshoufei]
	[AND t.shoujubenhao LIKE @shoujubenhao]
	[AND t.qtsbsyqk LIKE @qtsbsyqk]
	[AND t.qitahaocai LIKE @qitahaocai]
	[AND t.jiexianzi LIKE @jiexianzi]
	[AND t.rj11 LIKE @rj11]
	[AND t.rj45 LIKE @rj45]
	[AND t.mokuai LIKE @mokuai]
	[AND t.mianban LIKE @mianban]
	[AND t.wangxian LIKE @wangxian]
	[AND t.shigongren LIKE @shigongren]
	[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
	[AND t.beizhuhuizong LIKE @beizhuhuizong]
	[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
	[AND t.pipeizhuangtai LIKE @pipeizhuangtai]
	[AND t.shoukuanshijian LIKE @shoukuanshijian]
	AND zmid IN(#)
		]]>
	</sql>

	<!-- 根据账目uuid取账目的状态 -->
	<sql id="GetZhangMuZhuangTai">
		<![CDATA[
		SELECT zhuangtai zhuangtai,
		 xinxishuliang xinxishuliang
		FROM zhangmu t
		WHERE 1=1
	    AND t.uuid = @uuid
		]]>
	</sql>

	<!-- 删除账目中财务信息 -->
	<sql id="DeleteCaiWuData">
		<![CDATA[
		DELETE
		FROM caiwushuju
		WHERE
		UUID=@UUID
		]]>
	</sql>

	<!-- 删除账目 -->
	<sql id="DeleteZhangmu">
		<![CDATA[
		DELETE
		FROM zhangmu
		WHERE
		UUID=@zmuuid
		]]>
	</sql>

	<!-- 根据uuid查出要恢复匹配状态的数据id -->
	<sql id="InZhangmuGetShujuID">
		<![CDATA[
		SELECT shujuid shujuid
		FROM caiwushuju t
		WHERE 1=1
	    AND t.UUID = @UUID
		]]>
	</sql>

	<!-- 根据uuid查出要是否是审核数据 -->
	<sql id="getHeduiZhuangtai">
		<![CDATA[
		SELECT hedui hedui
		FROM caiwushuju t
		WHERE
	    t.UUID = @UUID
		]]>
	</sql>


	<!-- 获取日记账-->
	<sql id="getYinHangRiJiZhang">
		<![CDATA[
		SELECT
	     cunkuanshijian,
	     cunkuanyinhang,
	     cunkuanjine
        FROM  zhangmu
        WHERE
	      zhuangtai = '2' [AND uuid =  @UUID]
		]]>
	</sql>

	<!-- 根据存款时间得到当日的存款银行 -->
	<sql id="byDategetYinHangRiJiZhangWangdian">
		<![CDATA[
		SELECT  cunkuanyinhang cunkuanyinhang,wangdianhao wangdianhao, SUM(cunkuanjine) cunkuanjine
		FROM zhangmu
		WHERE zhuangtai='2'
		AND cunkuanshijian=@cunkuanshijian
		GROUP BY wangdianhao
		]]>
	</sql>

	<!-- 根据UUID获取存款时间 -->
	<sql id="byUUIDgetDate">
		<![CDATA[
		SELECT  DATE_FORMAT(cunkuanshijian,'%Y-%m-%d') cunkuanshijian
		FROM zhangmu
		WHERE zhuangtai='2'
		AND UUID=@UUID
		]]>
	</sql>

	<!-- 根据zmid获取账目中每小区数据的金额 -->
	<sql id="byUUIDgetJinE">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.xiaoqu xiaoqu
		,IFNULL(SUM(t.onuyj),0) onuyj
		,IFNULL(SUM(t.jidingheyj),0) jidingheyj
		,IFNULL(SUM(t.shoushifei),0) shoushifei
		,IFNULL(SUM(t.kuandaifei),0) kuandaifei
		,IFNULL(SUM(t.chuzhuangfei),0) chuzhuangfei
		,IFNULL(SUM(t.shebeixiaoshou),0) shebeixiaoshou
		,IFNULL(SUM(t.cailiaofei),0) cailiaofei
		,IFNULL(SUM(t.bzygf),0) bzygf
		,IFNULL(SUM(t.nianfei),0) nianfei
		FROM caiwushuju t
		WHERE 1=1
		AND t.zmid = @zmid
		GROUP BY xiaoqu
		]]>
	</sql>


	<!-- 根据zmids获取多账目中的信息 -->
	<sql id="byUUIDsgetdata">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.hedui		hedui
		,t.zhifuleixing		zhifuleixing
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xingming	xingming
		,t.shenfenzheng	shenfensheng
		,t.shoujuhao	shoujuhao
		,t.fenguangxianhao	fenguangxianhao
		,t.jiexuweizhi	jiexuweizhi
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.lianxidianhua lianxidianhua
		,t.wangluo wangluo
		,t.dianshi dianshi
		,t.dianhua dianhua
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.wangluoip wangluoip
		,t.dianhuaip dianhuaip
		,t.dianhuavlan dianhuavlan
		,t.wangluovlan wangluovlan
		,t.shangmenshijian shangmenshijian
		,t.danzheng danzheng
		,t.sxdhhm sxdhhm
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.shoushifei shoushifei
		,t.kuandaifei kuandaifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.yunyingshang yunyingshang
		,t.bzygf bzygf
		,t.nianfei nianfei
		,t.beizhu beizhu
		,t.zongshoufei zongshoufei
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.qtsbsyqk qtsbsyqk
		,t.qitahaocai qitahaocai
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.shigongren shigongren
		,t.xianchangbeizhu xianchangbeizhu
		,t.beizhuhuizong beizhuhuizong
		,t.shoukuanshijian shoukuanshijian
		FROM caiwushuju t
		WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.xiaoqu LIKE @quyu1]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai=@state]
	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.xingming	LIKE @xingming]
	[AND t.shenfenzheng	LIKE @shenfensheng]
	[AND t.shoujuhao LIKE	@shoujuhao]
	[AND t.fenguangxianhao LIKE	@fenguangxianhao]
	[AND t.jiexuweizhi LIKE	@jiexuweizhi]
	[AND t.lianxidianhua LIKE @lianxidianhua]
	[AND t.wangluo LIKE @wangluo]
	[AND t.dianshi LIKE @dianshi]
	[AND t.dianhua LIKE @dianhua]
	[AND t.yewu LIKE @yewu]
	[AND t.fenguang LIKE @fenguang]
	[AND t.onumac LIKE @onumac]
	[AND t.stbmcid LIKE @stbmcid]
	[AND t.dianshiip LIKE @dianshiip]
	[AND t.wangluoip LIKE @wangluoip]
	[AND t.dianhuaip LIKE @dianhuaip]
	[AND t.dianhuavlan LIKE @dianhuavlan]
	[AND t.wangluovlan LIKE @wangluovlan]
	[AND t.shangmenshijian LIKE @shangmenshijian]
	[AND t.danzheng LIKE @danzheng]
	[AND t.sxdhhm LIKE @sxdhhm]
	[AND t.onuyj LIKE @onuyj]
	[AND t.jidingheyj LIKE @jidingheyj]
	[AND t.shoushifei LIKE @shoushifei]
	[AND t.kuandaifei LIKE @kuandaifei]
	[AND t.chuzhuangfei LIKE @chuzhuangfei]
	[AND t.yunyingshang LIKE @yunyingshang]
	[AND t.bzygf LIKE @bzygf]
	[AND t.nianfei LIKE @nianfei]
	[AND t.beizhu LIKE @beizhu]
	[AND t.zongshoufei LIKE @zongshoufei]
	[AND t.shoujubenhao LIKE @shoujubenhao]
	[AND t.qtsbsyqk LIKE @qtsbsyqk]
	[AND t.qitahaocai LIKE @qitahaocai]
	[AND t.jiexianzi LIKE @jiexianzi]
	[AND t.rj11 LIKE @rj11]
	[AND t.rj45 LIKE @rj45]
	[AND t.mokuai LIKE @mokuai]
	[AND t.mianban LIKE @mianban]
	[AND t.wangxian LIKE @wangxian]
	[AND t.shigongren LIKE @shigongren]
	[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
	[AND t.beizhuhuizong LIKE @beizhuhuizong]
	[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
	[AND t.pipeizhuangtai LIKE @pipeizhuangtai]
	[AND t.shoukuanshijian LIKE @shoukuanshijian]
	and zmid IN(#)
		]]>
	</sql>

	<!-- 获取工作量统计初始数据集合 -->
	<sql id="GetWorkloadDataList">
		<![CDATA[
		SELECT t.UUID	PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
		,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,CASE WHEN t.wangluo IS NULL OR t.wangluo="" THEN '0' ELSE t.wangluo END wangluo
		,CASE WHEN t.dianshi IS NULL OR t.dianshi="" THEN '0' ELSE t.dianshi END dianshi
		,CASE WHEN t.dianhua IS NULL OR t.dianhua="" THEN '0' ELSE t.dianhua END dianhua
		,t.yewu yewu
		,t.shigongren shigongren

	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.xiaoqu LIKE @quyu1]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai=@state]
	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.youxiaoshijian >= @youxiaoshijians]
	[AND t.youxiaoshijian <= @youxiaoshijiane]
	[AND t.xingming	LIKE @xingming]
	[AND t.shenfenzheng	LIKE @shenfensheng]
	[AND t.shoujuhao LIKE	@shoujuhao]
	[AND t.fenguangxianhao LIKE	@fenguangxianhao]
	[AND t.jiexuweizhi LIKE	@jiexuweizhi]
	[AND t.lianxidianhua LIKE @lianxidianhua]
	[AND t.wangluo LIKE @wangluo]
	[AND t.dianshi LIKE @dianshi]
	[AND t.dianhua LIKE @dianhua]
	[AND t.yewu LIKE @yewu]
	[AND t.fenguang LIKE @fenguang]
	[AND t.onumac LIKE @onumac]
	[AND t.stbmcid LIKE @stbmcid]
	[AND t.dianshiip LIKE @dianshiip]
	[AND t.wangluoip LIKE @wangluoip]
	[AND t.dianhuaip LIKE @dianhuaip]
	[AND t.dianhuavlan LIKE @dianhuavlan]
	[AND t.wangluovlan LIKE @wangluovlan]
	[AND t.shangmenshijian LIKE @shangmenshijian]
	[AND t.danzheng LIKE @danzheng]
	[AND t.sxdhhm LIKE @sxdhhm]
	[AND t.onuyj LIKE @onuyj]
	[AND t.jidingheyj LIKE @jidingheyj]
	[AND t.shoushifei LIKE @shoushifei]
	[AND t.kuandaifei LIKE @kuandaifei]
	[AND t.chuzhuangfei LIKE @chuzhuangfei]
	[AND t.yunyingshang LIKE @yunyingshang]
	[AND t.bzygf LIKE @bzygf]
	[AND t.nianfei LIKE @nianfei]
	[AND t.beizhu LIKE @beizhu]
	[AND t.zongshoufei LIKE @zongshoufei]
	[AND t.shoujubenhao LIKE @shoujubenhao]
	[AND t.qtsbsyqk LIKE @qtsbsyqk]
	[AND t.qitahaocai LIKE @qitahaocai]
	[AND t.jiexianzi LIKE @jiexianzi]
	[AND t.rj11 LIKE @rj11]
	[AND t.rj45 LIKE @rj45]
	[AND t.mokuai LIKE @mokuai]
	[AND t.mianban LIKE @mianban]
	[AND t.wangxian LIKE @wangxian]
	[AND t.shigongren LIKE @shigongren]
	[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
	[AND t.beizhuhuizong LIKE @beizhuhuizong]
	[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
	[AND t.pipeizhuangtai LIKE @pipeizhuangtai]
	[AND t.shoukuanshijian LIKE @shoukuanshijian]
	order by t.xiaoqu,t.dizhi,t.tingjishijian,t.createdt desc
		]]>
	</sql>

	<!-- 获取单位时间内无重复施工人 -->
	<sql id="GetShiGongrenList">
		<![CDATA[
		SELECT
		DISTINCT t.shigongren shigongren
		,t.xiaoqu xiaoqu
	FROM yonghushuju t
	WHERE 1=1
	[AND t.xiaoqu=@quyu]
	[AND t.xiaoqu LIKE @quyu1]
	[AND t.dizhi LIKE @address]
	[AND t.yonghuzhuangtai=@state]
	[AND t.kaijishijian >= @kaijis]
	[AND t.kaijishijian <= @kaijie]
	[AND t.tingjishijian >= @tingjis]
	[AND t.tingjishijian <= @tingjie]
	[AND t.shoukuanshijian >= @shoukuanshijians]
	[AND t.shoukuanshijian <= @shoukuanshijiane]
	[AND t.youxiaoshijian >= @youxiaoshijians]
	[AND t.youxiaoshijian <= @youxiaoshijiane]
	[AND t.xingming	LIKE @xingming]
	[AND t.shenfenzheng	LIKE @shenfensheng]
	[AND t.shoujuhao LIKE	@shoujuhao]
	[AND t.fenguangxianhao LIKE	@fenguangxianhao]
	[AND t.jiexuweizhi LIKE	@jiexuweizhi]
	[AND t.lianxidianhua LIKE @lianxidianhua]
	[AND t.wangluo LIKE @wangluo]
	[AND t.dianshi LIKE @dianshi]
	[AND t.dianhua LIKE @dianhua]
	[AND t.yewu LIKE @yewu]
	[AND t.fenguang LIKE @fenguang]
	[AND t.onumac LIKE @onumac]
	[AND t.stbmcid LIKE @stbmcid]
	[AND t.dianshiip LIKE @dianshiip]
	[AND t.wangluoip LIKE @wangluoip]
	[AND t.dianhuaip LIKE @dianhuaip]
	[AND t.dianhuavlan LIKE @dianhuavlan]
	[AND t.wangluovlan LIKE @wangluovlan]
	[AND t.shangmenshijian LIKE @shangmenshijian]
	[AND t.danzheng LIKE @danzheng]
	[AND t.sxdhhm LIKE @sxdhhm]
	[AND t.onuyj LIKE @onuyj]
	[AND t.jidingheyj LIKE @jidingheyj]
	[AND t.shoushifei LIKE @shoushifei]
	[AND t.kuandaifei LIKE @kuandaifei]
	[AND t.chuzhuangfei LIKE @chuzhuangfei]
	[AND t.yunyingshang LIKE @yunyingshang]
	[AND t.bzygf LIKE @bzygf]
	[AND t.nianfei LIKE @nianfei]
	[AND t.beizhu LIKE @beizhu]
	[AND t.zongshoufei LIKE @zongshoufei]
	[AND t.shoujubenhao LIKE @shoujubenhao]
	[AND t.qtsbsyqk LIKE @qtsbsyqk]
	[AND t.qitahaocai LIKE @qitahaocai]
	[AND t.jiexianzi LIKE @jiexianzi]
	[AND t.rj11 LIKE @rj11]
	[AND t.rj45 LIKE @rj45]
	[AND t.mokuai LIKE @mokuai]
	[AND t.mianban LIKE @mianban]
	[AND t.wangxian LIKE @wangxian]
	[AND t.shigongren LIKE @shigongren]
	[AND t.xianchangbeizhu LIKE @xianchangbeizhu]
	[AND t.beizhuhuizong LIKE @beizhuhuizong]
	[AND t.kaipiaoxinxi LIKE @kaipiaoxinxi]
	[AND t.pipeizhuangtai LIKE @pipeizhuangtai]
	[AND t.shoukuanshijian LIKE @shoukuanshijian]
	GROUP BY xiaoqu,shigongren
		]]>
	</sql>

	<!-- 获取入户数 -->
	<sql id="GetRuhuList">
		<![CDATA[
		SELECT COUNT(DISTINCT dizhi) num
		FROM yonghushuju t
		WHERE 1=1
		[AND t.kaijishijian = @kaijis]
		[AND t.tingjishijian = @tingjis]
		[AND t.shoukuanshijian = @shoukuanshijians]
		 AND t.shigongren  = @shigongren
		 AND t.xiaoqu=@xiaoqu
		 AND t.yonghuzhuangtai='已安装'
		]]>
	</sql>

	<!-- 获取首次入户数 -->
	<sql id="GetShouciRuhuList">
		<![CDATA[
		SELECT  COUNT(*) num
		FROM yonghushuju t
		WHERE 1=1
		[AND t.kaijishijian < @kaijis]
		AND t.xiaoqu=@xiaoqu
		AND t.dizhi = @dizhi
		AND t.yonghuzhuangtai='已安装'
		]]>
	</sql>

	<!-- 获取首次入户数 -->
	<sql id="getShouciRuhu">
		<![CDATA[
			#
		]]>
	</sql>

	 <!-- 获取小区备注 lhh-->
	<sql id="getXiaoqukuBeizhu">
		<![CDATA[
		select Remark Remark
		,Update_time Update_time
		,Update_person Update_person
		,Product_ID Product_ID
		from
		 communitypile

		WHERE CommunityPile_ID = @CommunityPile_ID
		]]>
	</sql>

	<!-- 获取入库Remark lhh-->
	<sql id="getRukuBeizhu">
		<![CDATA[
		SELECT
			 EqRemark EqRemark
		FROM
		 	 product
		WHERE product_ID = @product_ID
		]]>
	</sql>

	 <!-- 获取备注 lhh-->
	<sql id="getShebeiRemark">
		<![CDATA[
		select
			 c.Remark Remark
			,c.CommunityPile_ID CommunityPile_ID
			,FaultPile_ID FaultPile_ID
			,p.EqBoxNum EqBoxNum
			,p.EqType EqType
			,p.EqVersion EqVersion
			,p.EqMAC EqMAC
			,p.EqRemark EqRemark
		FROM
		    communitypile c , product p
		WHERE
			c.Product_ID = p.Product_ID
		AND c.Product_ID = @Product_ID

		]]>
	</sql>

	<!-- 获取随即ID lhh-->
	<sql id="getSEQ1">
		<![CDATA[
		select nextval('CKSeq') CNT
		]]>
	</sql>

	<!-- 获取随即ID lhh-->
	<sql id="getSEQ2">
		<![CDATA[
		select nextval('FaultSeq') CNT
		]]>
	</sql>
	<sql id="getDaipipeiShebeiInfo">
		<![CDATA[
	SELECT
	 c.CommunityPile_ID CommunityPile_ID
	,p.EqBoxNum EqBoxNum
	,e.eqsta_name eqsta_name
	,DATE_FORMAT(p.EqInTime,'%Y-%m-%d') EqInTime
	,u.NAME   rukuren
	,p.EqType EqType
	,p.EqVersion EqVersion
	,DATE_FORMAT(c.FirstEnterDate,'%Y-%m-%d') FirstEnterDate
	,cc.store_name  CommunityName
	,u1.NAME lingquren
	,c.Install_site Install_site
	,c.Install_time Install_time
	,p.EqRegister EqRegister
	,p.EqMAC EqMAC
	,p.EqMCID EqMCID
	,p.EqIp EqIp
	,p.EqRemark EqRemark
	,c.Remark CpRemark
	,p.EqInPerson EqInPerson
	,DATE_FORMAT(p.EqInTime,'%Y-%m-%d') EqInTime
	,p.Product_ID Product_ID
		FROM product p,communitypile c,eqsta e  ,store1 cc,userinfo u ,userinfo u1
	WHERE
		p.Product_ID = c.Product_ID
		AND c.Community_ID = cc.UUID
		AND p.EqInperson = u.job_id
		AND c.Get_person = u1._ID
		AND e.EqSta_ID = c.EqSta_ID
		AND c.CommunityPile_ID = @CommunityPile_ID
		]]>
	</sql>

	<!-- 出库到小区库，查询出需要插入记录库的数据。lhh -->
	<sql id="getdinfoFromProduct">
	<![CDATA[
		SELECT
			 p.NAME NAME
			,p.Price Price
			,p.EqBoxNum EqBoxNum
			,p.EqState EqState
			,p.EqRemark EqRemark
			,p.EqQuantity EqQuantity
			,p.EqType EqType
			,p.EqVersion EqVersion
			,p.EqRegister EqRegister
			,p.EqMAC EqMAC
			,u.NAME EqInPerson
			,p.EqInTime EqInTime
			,p.Create_person Create_person
			,p.Create_time Create_time
			,p.Update_person Update_person
			,p.Update_time Update_time
			,p.EqMCID EqMCID
			,p.EqIp EqIp
		FROM
			product p,userinfo u
		WHERE
			Product_ID = @Product_ID
		AND p.EqInPerson = u.Job_ID
	]]>
	</sql>

	<!-- 库存，小区库状态改变后，用于插入记录表数据 lhh-->
	<sql id="insertDaipipeiInfo">
	<![CDATA[
		INSERT INTO recordpile
			(CommunityPile_ID
			,EqSta_ID
			,EnterDate
			,NAME
			,Price
			,EqRemark
			,EqQuantity
			,EqType
			,EqVersion
			,EqRegister
			,EqMAC
			,EqMCID
			,EqInPerson
			,EqInTime
			,EqIp
			,Create_person
			,Create_time
			,Update_person
			,Update_time
			,CpRemark
			,Product_ID
			,Get_Person
			,Install_site
			,Install_time
			,FaultPile_ID
			,EqBoxNum
			,CpInTime
			,CpInName)

			SELECT
			c.CommunityPile_ID
			,e.eqsta_name
			,SYSDATE()
			,r.NAME
			,r.Price
			,r.EqRemark
			,c.Quantity
			,r.EqType
			,r.EqVersion
			,r.EqRegister
			,r.EqMAC
			,r.EqMCID
			,u.NAME
			,r.EqInTime
			,r.EqIp
			,c.Create_person
			,c.Create_time
			,c.Update_person
			,c.Update_time
			,c.Remark
			,r.Product_ID
			,u1.NAME
			,c.Install_site
			,c.Install_time
			,c.FaultPile_ID
			,r.EqBoxNum
			,c.FirstEnterDate
			,cc.CommunityName
		FROM product r,communitypile c,eqsta e ,userinfo u,userinfo u1,community cc
		WHERE
		     r.Product_ID = c.Product_ID
		 AND r.EqInPerson = u.job_id
		 AND c.get_person = u1._id
		 AND c.Community_ID = cc.Community_ID
		 AND e.EqSta_ID=c.EqSta_ID
		 [AND c.CommunityPile_ID = @CommunityPile_ID]
		 [AND c.Product_ID = @Product_ID]
	]]>
	</sql>

	<sql id="insertRecordPileByProductId">
	<![CDATA[
		INSERT INTO recordpile
		(
			Product_ID
			,EqSta_ID
			,EnterDate
			,EqBoxNum
			,EqRemark
			,EqType
			,EqVersion
			,EqRegister
			,EqMAC
			,EqMCID
			,EqIp
			,EqInPerson
			,EqInTime
			,Create_Person
			,Create_Time
			,Update_Person
			,Update_Time
		)
		SELECT
			 p.Product_ID
		    ,e.EqSta_Name
		    ,SYSDATE()
			,p.EqBoxNum
			,p.EqRemark
			,p.EqType
			,p.EqVersion
			,p.EqRegister
			,p.EqMAC
			,P.EqMCID
			,p.EqIp
			,u.Name
			,P.EqInTime
			,p.Create_Person
			,p.Create_Time
			,p.Update_Person
			,p.Update_Time
		FROM Product p , eqsta e , userinfo u
		WHERE
			p.Product_ID = @Product_ID
			AND p.Eqstate = e.EqSta_ID
			AND u.Job_ID = p.EqInPerson
	]]>
	</sql>

	<sql id="insertRecordPileFromyichangKu">
	<![CDATA[
		INSERT INTO recordpile
		(
			Product_ID
			,EqSta_ID
			,EnterDate
			,EqBoxNum
			,EqRemark
			,EqType
			,EqVersion
			,EqRegister
			,EqMAC
			,EqMCID
			,EqIp
			,EqInPerson
			,EqInTime
			,Create_Person
			,Create_Time
		)
		SELECT
			 p.Product_ID
		  	,e1.EqSta_Name
		    ,SYSDATE()
			,p.EqBoxNum
			,CONCAT(p.EqRemark,@beizhu)
			,p.EqType
			,p.EqVersion
			,p.EqRegister
			,p.EqMAC
			,P.EqMCID
			,p.EqIp
			,u.NAME
			,P.EqInTime
			,@Create_Person
			,@Create_Time
		FROM Product p , eqsta e ,communitypile c ,eqsta e1 ,userinfo u
		WHERE
			p.Product_ID = @Product_ID
			AND p.Eqstate = e.EqSta_ID
			AND p.Product_ID = c.Product_ID
			AND P.EqInPerson = u.Job_id
			AND c.EqSta_Id = e1.EqSta_ID
	]]>
	</sql>

	<!-- 获取异常库的数据信息 lhh-->
	<sql id="GetKuDataList">
        <![CDATA[
			SELECT
				 c.Product_ID	  PK_ID
				,p.EqBoxNum EqBoxNum
				,e.EqSta_Name
				,p.EqInTime EqInTime
				,u.NAME rukuren
				,p.EqType EqType
				,p.EqVersion EqVersion
				,c.FirstEnterDate  FirstEnterDate
				,(SELECT store_name FROM store1 cc WHERE c.Community_ID = cc.UUID) CommunityName
				,(SELECT NAME FROM userinfo  uu WHERE c.get_person = uu._ID) lingquren
				,c.Install_site Install_site
				,c.Install_time Install_time
				,p.EqRegister EqRegister
				,p.EqMAC EqMAC
				,p.EqMCID EqMCID
				,p.EqIp EqIp
				,c.Remark Remark
			FROM
				communitypile c, product p,eqsta e ,userinfo u ,userinfo u1
			WHERE
				c.Product_ID=P.Product_ID
				AND c.EqSta_ID = e.EqSta_ID
				AND p.EqInPerson = u.Job_ID
				AND c.Get_person = u1._ID
				[AND E.EqSta_Type = @EqSta_Type]
				[AND C.CommunityPile_ID = @CommunityPile_ID]
				[AND C.EqSta_ID = @EqSta_ID]
				[AND C.Community_ID = @Community_ID]
				[AND c.Install_site LIKE @Install_site]
				[AND p.EqMAC LIKE @EqMAC]
				[AND p.EqMCID LIKE @EqMCID]
				[AND P.EqInTime >= @kaishi1]
				[AND P.EqInTime <= @jieshu1]
				[AND c.FirstEnterDate >= @kaishi2]
				[AND c.FirstEnterDate <= @jieshu2]
				[AND c.install_time >= @kaishi3]
				[AND c.install_time <= @jieshu3]
				[AND p.EqBoxNum LIKE @EqBoxNum]
				[AND u.Name LIKE @rukuren]
				[AND p.EqType LIKE @EqType]
				[AND p.EqVersion LIKE @EqVersion]
				[AND u1.Name LIKE @Lingquren]
				[AND p.EqRegister LIKE @EqRegister]
				[AND p.EqIp LIKE @EqIp]
				[AND c.Remark  LIKE @EqRemark]
		]]>
    </sql>

    <!-- 获取小区库的数据信息 lhh-->
    <sql id="GetXiaoQuKuDataList">
        <![CDATA[
			SELECT
					 C.CommunityPile_ID	  PK_ID
					,p.EqState        eqstate
			        ,p.EqBoxNum       eqboxnum
			        ,e.EqSta_Name     eqsta_name
			        ,DATE_FORMAT(p.EqInTime,'%Y-%m-%d')      create_time
			        ,u.NAME           create_person
			        ,p.EqType         eqtype
			        ,p.EqVersion      eqversion
			        ,p.EqMAC          eqmac
			        ,p.EqMCID         eqmcid
			        ,p.EqIp           eqip
			        ,c.Remark         eqremark
			        ,p.eqregister     eqregister
			        ,c.FirstEnterDate FirstEnterDate
					,cc.store_name CommunityName
					,u1.NAME          getPerson
					,c.Install_site   Install_site
					,c.Install_time   Install_time
					,c.EqSta_ID EqSta_ID
					,c.Get_person         Get_person
					,c.Community_ID Community_ID
			FROM
					communitypile C,product p , eqsta e ,userinfo u ,store1 cc ,userinfo u1
			WHERE
					C.Product_ID=P.Product_ID
					AND E.EqSta_ID = C.EqSta_ID
					AND p.EqInPerson = u.Job_ID
					AND c.Community_ID = cc.UUID
					AND c.Get_person = u1._ID
					[AND E.EQSTA_TYPE = @EQSTA_TYPE]
					[AND C.CommunityPile_ID = @CommunityPile_ID]
					[AND C.EqSta_ID = @EqSta_ID]
					[AND C.Community_ID = @Community_ID]
					[AND c.Install_site LIKE @Install_site]
					[AND p.EqRegister LIKE @EqRegister]
					[AND p.EqMAC LIKE @EqMAC]
					[AND p.EqMCID LIKE @EqMCID]
					[AND P.EqInTime >= @kaishi1]
					[AND P.EqInTime <= @jieshu1]
					[AND c.FirstEnterDate >= @kaishi2]
					[AND c.FirstEnterDate <= @jieshu2]
					[AND c.Install_time >= @kaishi3]
					[AND c.Install_time <= @jieshu3]
					[AND p.EqBoxNum LIKE @EqBoxNum]
					[AND u.Name LIKE @rukuren]
					[AND p.EqType LIKE @EqType]
					[AND p.EqVersion LIKE @EqVersion]
					[AND u1.Name LIKE @Lingquren]
					[AND p.EqIp LIKE @EqIp]
					[AND c.Remark  LIKE @EqRemark]

		]]>
	</sql>

    <!-- 设备出库数量的 lhh -->
	<sql id="GetChuKuCount">
         <![CDATA[
			SELECT
					COUNT(*) CNT
			FROM
					communitypile C,product p , eqsta e ,userinfo u
			WHERE
					C.Product_ID=P.Product_ID
					AND E.EqSta_ID = C.EqSta_ID
					AND p.EqInPerson = u.Job_ID
					[AND E.EQSTA_TYPE = @EQSTA_TYPE]
					[AND C.CommunityPile_ID = @CommunityPile_ID]
					[AND C.EqSta_ID = @EqSta_ID]
					[AND C.Community_ID = @Community_ID]
					[AND c.Install_site LIKE @Install_site]
					[AND p.EqRegister LIKE @EqRegister]
					[AND p.EqMAC LIKE @EqMAC]
					[AND p.EqMCID LIKE @EqMCID]
					[AND P.EqInTime >= @kaishi1]
					[AND P.EqInTime <= @jieshu1]
					[AND c.FirstEnterDate >= @kaishi2]
					[AND c.FirstEnterDate <= @jieshu2]
					[AND c.Install_time >= @kaishi3]
					[AND c.Install_time <= @jieshu3]
					[AND p.EqBoxNum LIKE @EqBoxNum]
					[AND u.Name LIKE @rukuren]
					[AND p.EqType LIKE @EqType]
					[AND p.EqVersion LIKE @EqVersion]
					[AND u.Name LIKE @Lingquren]
					[AND p.EqIp LIKE @EqIp]
					[AND c.Remark  LIKE @EqRemark]
		]]>
	</sql>

    <!-- 根基设备状态  不同  得到 设备 数量 lhh-->
	<sql id="GetTheKuCunCount">
         <![CDATA[
			SELECT
					COUNT(*) CNT
			FROM
					communitypile C,product p , eqsta e ,userinfo u
			WHERE
					C.Product_ID=P.Product_ID
					AND E.EqSta_ID = C.EqSta_ID
					AND p.EqInPerson = u.Job_ID
					AND E.EQSTA_TYPE = @EQSTA_TYPE
		]]>
	</sql>

	  <!-- 根据设备ID 追溯历史状态信息 lhh-->
	<sql id="getHistoryInfo">
         <![CDATA[
         SELECT
				 r.EqBoxNum EqBoxNum
				,s.EqSta_Name EqSta_ID
				,r.EqInTime EqInTime
				,u2.NAME  EqInPerson
				,r.EqType EqType
				,r.EqVersion EqVersion
				,c.FirstEnterDate CpInTime
				,t.store_name CpInName
				,u.NAME Get_Person
				,c.Install_site Install_site
				,c.Install_time Install_time
				,r.EqRegister EqRegister
				,r.EqMAC EqMAC
				,r.EqMCID EqMCID
				,r.EqIp EqIp
				,r.EqRemark rRemark
				,c.Remark EqRemark
				,c.Create_person Create_person
				,c.Create_time Create_time
				,c.Update_person Update_person
				,c.Update_time Update_time
			FROM
				communitypile c RIGHT OUTER JOIN Product r  ON c.Product_ID=r.Product_ID
				LEFT OUTER JOIN store1 t ON c.Community_ID=t.UUID
				LEFT OUTER JOIN userinfo u ON c.Get_person=u._ID
				,eqsta s
				,userinfo u2
			WHERE
				r.Product_ID = @Product_ID
				AND s.EqSta_ID=c.EqSta_ID
				AND u2.Job_ID=r.EqInPerson

			UNION ALL
		SELECT * FROM (
			SELECT
				r.EqBoxNum EqBoxNum
				,r.EqSta_ID EqSta_ID
				,r.EqInTime EqInTime
				,r.EqInPerson EqInPerson
				,r.EqType EqType
				,r.EqVersion EqVersion
				,r.CpInTime CpInTime
				,r.CpInName CpInName
				,r.Get_Person Get_Person
				,r.Install_site Install_site
				,r.Install_time Install_time
				,r.EqRegister EqRegister
				,r.EqMAC EqMAC
				,r.EqMCID EqMCID
				,r.EqIp EqIp
				,r.EqRemark rRemark
				,r.CpRemark EqRemark
				,r.Create_person Create_person
				,r.Create_time Create_time
				,r.Update_person Update_person
				,r.Update_time Update_time
			FROM
				recordpile r , communitypile c
			WHERE
				r.Product_ID = @Product_ID
				AND r.Product_ID = c.Product_ID
				ORDER BY  r.EnterDate DESC) yy
		]]>
	</sql>
	 <!-- 根据设备ID 追溯历史状态信息 数量 lhh-->
	<sql id="getHistoryInfoCount">
         <![CDATA[
			SELECT
				COUNT(*) CNT
			FROM
				recordpile r , communitypile c
			WHERE
				    r.Product_ID = @Product_ID
				AND r.Product_ID = c.Product_ID

		]]>
	</sql>

	<!-- 设备状态查询lhh -->
	<sql id="getStatus1CodeAll">
		<![CDATA[
		SELECT 	 t.EqSta_ID	    MODULE_KEY
				,t.EqSta_Name	MODULE_VALUE
		FROM eqsta t
		WHERE 1=1
		[AND t.EqSta_Type = @EqSta_Type]
		[AND t.EqSta_Type = @EqSta_Type1]
		[OR  t.EqSta_Type = @EqSta_Type2]
		[OR  t.EqSta_Type = @EqSta_Type3]
	]]>
	</sql>

	<!-- 查找运维部工作人员的sql -->
	<sql id="getLingqurenID">
        <![CDATA[
            SELECT
                         u._ID	        MODULE_KEY
				        ,u.NAME      	MODULE_VALUE
		    FROM
		                userinfo u,dept d
		    WHERE
		                d.Dept_ID = u.Dept_ID
            AND
                       d.Dept_ID=11
		]]>
	</sql>

	<!-- 判断是否入库小区 -->
	<sql id="isInCommunity">
        <![CDATA[
           SELECT Community_ID Community_ID
          	, CommunityPile_ID CommunityPile_ID
           FROM communitypile
           WHERE Product_ID = @Product_ID
		]]>
	</sql>

	<!-- 删除 重新入库后的小区库数据 -->
	<sql id="DeletecommunitypileInfo">
        <![CDATA[
        DELETE
		FROM
			communitypile
		WHERE
			Product_ID = @Product_ID
		]]>
	</sql>

	<!-- 工单数据查询。用于核对 -->
	<sql id="GongdanCheckDataInfo">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.yonghuzhuangtai yonghuzhuangtai
			,h.xiaoqu xiaoqu
			,h.dizhi dizhi
			,h.wangluo wangluo
			,h.dianshi dianshi
			,h.dianhua dianhua
			,DATE_FORMAT(h.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
			,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
			,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
			,h.zongshoufei zongshoufei
			,h.pipeizhuangtai pipeizhuangtai
			,h.xingming xingming
			,h.shenfenzheng shenfenzheng
			,h.shoujuhao shoujuhao
			,h.fenguangxianhao fenguangxianhao
			,h.jiexuweizhi jiexuweizhi
			,h.lianxidianhua lianxidianhua
			,h.yewu yewu
			,h.fenguang fenguang
			,h.onumac onumac
			,h.stbmcid stbmcid
			,h.dianshiip dianshiip
			,h.wangluoip wangluoip
			,h.dianhuaip dianhuaip
			,h.dianhuavlan dianhuavlan
			,h.wangluovlan wangluovlan
			,h.shangmenshijian shangmenshijian
			,h.danzheng danzheng
			,h.sxdhhm sxdhhm
			,h.onuyj  onuyj
			,h.jidingheyj jidingheyj
			,h.shoushifei shoushifei
			,h.kuandaifei kuandaifei
			,h.chuzhuangfei chuzhuangfei
			,h.shebeixiaoshou shebeixiaoshou
			,h.cailiaofei cailiaofei
			,h.yunyingshang yunyingshang
			,h.bzygf bzygf
			,h.nianfei nianfei
			,h.beizhu beizhu
			,h.shoujubenhao shoujubenhao
			,h.kaipiaoxinxi kaipiaoxinxi
			,h.qtsbsyqk qtsbsyqk
			,h.qitahaocai qitahaocai
			,h.jiexianzi jiexianzi
			,h.rj11 rj11
			,h.rj45 rj45
			,h.mokuai mokuai
			,h.mianban mianban
			,h.wangxian wangxian
			,h.shigongren shigongren
			,h.xianchangbeizhu xianchangbeizhu
			,h.beizhuhuizong beizhuhuizong
			,h.heduibeizhu heduibeizhu
			,h.biduikbn
			,h.bdfenguang
			,h.bdonumac
			,h.bdstbmcid
			,h.bddianshiip
			,h.yjfenguang
			,h.yjonumac
			,h.yjstbmcid
			,h.yjdianshiip
			,h.fenguangID
			,h.CommunityPile_ID
			,h.CommunityPile_ID2
		FROM
		     huidandata h
		WHERE
			1=1
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.dizhi LIKE @dizhi]
			[AND h.kaijishijian >= @kaijis]
			[AND h.kaijishijian <= @kaijie]
			[AND h.tingjishijian >= @tingjis]
			[AND h.tingjishijian <= @tingjie]
			[AND h.shoukuanshijian >= @shoukuanshijians]
			[AND h.shoukuanshijian <= @shoukuanshijiane]
			[AND h.yonghuzhuangtai = @yonghuzhuangtai]
			[AND h.uuid = @uuid]
			[AND h.heduibeizhu = @heduibeizhu]
			[AND h.yonghuzhuangtai <> @daihedui]
			[AND h.yonghuzhuangtai <> @yirudang]
			[AND h.Lifecycle_sta = @Lifecycle_sta]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="GongdanCheckDataCount">
        <![CDATA[
       SELECT
			COUNT(*) CNT
		FROM
		     huidandata h
		WHERE
			1=1
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.dizhi LIKE @dizhi]
			[AND h.kaijishijian >= @kaijis]
			[AND h.kaijishijian <= @kaijie]
			[AND h.tingjishijian >= @tingjis]
			[AND h.tingjishijian <= @tingjie]
			[AND h.shoukuanshijian >= @shoukuanshijians]
			[AND h.shoukuanshijian <= @shoukuanshijiane]
			[AND h.yonghuzhuangtai = @yonghuzhuangtai]
			[AND h.yonghuzhuangtai <> @daihedui]
			[AND h.yonghuzhuangtai <> @yirudang]
			[AND h.heduibeizhu = @heduibeizhu]
			[AND h.Lifecycle_sta = @Lifecycle_sta]
		]]>
	</sql>

	<!-- 工单数据查询。用于核对 -->
	<sql id="HuidanAuditDataInfo">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.yonghuzhuangtai yonghuzhuangtai
			,h.xiaoqu xiaoqu
			,h.dizhi dizhi
			,h.wangluo wangluo
			,h.dianshi dianshi
			,h.dianhua dianhua
			,DATE_FORMAT(h.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
			,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
			,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
			,h.zongshoufei zongshoufei
			,h.pipeizhuangtai pipeizhuangtai
			,h.xingming xingming
			,h.shenfenzheng shenfenzheng
			,h.shoujuhao shoujuhao
			,h.fenguangxianhao fenguangxianhao
			,h.jiexuweizhi jiexuweizhi
			,h.lianxidianhua lianxidianhua
			,h.yewu yewu
			,h.fenguang fenguang
			,h.onumac onumac
			,h.stbmcid stbmcid
			,h.dianshiip dianshiip
			,h.wangluoip wangluoip
			,h.dianhuaip dianhuaip
			,h.dianhuavlan dianhuavlan
			,h.wangluovlan wangluovlan
			,h.shangmenshijian shangmenshijian
			,h.danzheng danzheng
			,h.sxdhhm sxdhhm
			,h.onuyj  onuyj
			,h.jidingheyj jidingheyj
			,h.shoushifei shoushifei
			,h.kuandaifei kuandaifei
			,h.chuzhuangfei chuzhuangfei
			,h.shebeixiaoshou shebeixiaoshou
			,h.cailiaofei cailiaofei
			,h.yunyingshang yunyingshang
			,h.bzygf bzygf
			,h.nianfei nianfei
			,h.beizhu beizhu
			,h.shoujubenhao shoujubenhao
			,h.kaipiaoxinxi kaipiaoxinxi
			,h.qtsbsyqk qtsbsyqk
			,h.qitahaocai qitahaocai
			,h.jiexianzi jiexianzi
			,h.rj11 rj11
			,h.rj45 rj45
			,h.mokuai mokuai
			,h.mianban mianban
			,h.wangxian wangxian
			,h.shigongren shigongren
			,h.xianchangbeizhu xianchangbeizhu
			,h.beizhuhuizong beizhuhuizong
			,h.heduibeizhu heduibeizhu
		FROM
		     huidanaudit h
		WHERE
			1=1
			[AND h.yewutype = @yewutype]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="HuidanAuditDataCount">
        <![CDATA[
       SELECT
			COUNT(*) CNT
		FROM
		     huidanaudit h
		WHERE
			1=1
			[AND h.yewutype = @yewutype]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="QiegaiAuditDataInfo">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.yonghuzhuangtai yonghuzhuangtai
			,h.xiaoqu xiaoqu
			,h.dizhi dizhi
			,h.wangluo wangluo
			,h.dianshi dianshi
			,h.dianhua dianhua
			,DATE_FORMAT(h.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
			,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
			,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
			,h.zongshoufei zongshoufei
			,h.pipeizhuangtai pipeizhuangtai
			,h.xingming xingming
			,h.shenfenzheng shenfenzheng
			,h.shoujuhao shoujuhao
			,h.fenguangxianhao fenguangxianhao
			,h.jiexuweizhi jiexuweizhi
			,h.lianxidianhua lianxidianhua
			,h.yewu yewu
			,h.fenguang fenguang
			,h.onumac onumac
			,h.stbmcid stbmcid
			,h.dianshiip dianshiip
			,h.wangluoip wangluoip
			,h.dianhuaip dianhuaip
			,h.dianhuavlan dianhuavlan
			,h.wangluovlan wangluovlan
			,h.shangmenshijian shangmenshijian
			,h.danzheng danzheng
			,h.sxdhhm sxdhhm
			,h.onuyj  onuyj
			,h.jidingheyj jidingheyj
			,h.shoushifei shoushifei
			,h.kuandaifei kuandaifei
			,h.chuzhuangfei chuzhuangfei
			,h.shebeixiaoshou shebeixiaoshou
			,h.cailiaofei cailiaofei
			,h.yunyingshang yunyingshang
			,h.bzygf bzygf
			,h.nianfei nianfei
			,h.beizhu beizhu
			,h.shoujubenhao shoujubenhao
			,h.kaipiaoxinxi kaipiaoxinxi
			,h.qtsbsyqk qtsbsyqk
			,h.qitahaocai qitahaocai
			,h.jiexianzi jiexianzi
			,h.rj11 rj11
			,h.rj45 rj45
			,h.mokuai mokuai
			,h.mianban mianban
			,h.wangxian wangxian
			,h.shigongren shigongren
			,h.xianchangbeizhu xianchangbeizhu
			,h.beizhuhuizong beizhuhuizong
			,h.heduibeizhu heduibeizhu
		FROM
		     qiegaiaudit h
		WHERE
			1=1
			[AND h.yewutype = @yewutype]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="QiegaiAuditDataCount">
        <![CDATA[
       SELECT
			COUNT(*) CNT
		FROM
		     qiegaiaudit h
		WHERE
			1=1
			[AND h.yewutype = @yewutype]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="updateHeduiBeizhu">
        <![CDATA[
        UPDATE  huidandata
		SET
			    beizhuhuizong = CONCAT(beizhuhuizong,@beizhu)
			   ,heduibeizhu = '是'
			   ,updateby = @updateby
			   ,updatedt = @updatedt

		WHERE UUID = @UUID

		]]>
	</sql>
		<sql id="updateHeduiBeizhuAudit">
        <![CDATA[
        UPDATE  huidanaudit
		SET
			    beizhuhuizong = CONCAT(beizhuhuizong,@beizhu)
			   ,heduibeizhu = '是'
			   ,updateby = @updateby
			   ,updatedt = @updatedt

		WHERE UUID = @UUID

		]]>
	</sql>

	<!-- 数据设备核对。核对提交 -->
	<sql id="updateHeduitijiao">
        <![CDATA[
        UPDATE  huidandata
		SET
			    beizhuhuizong = CONCAT(beizhuhuizong,@beizhu)
			   ,Lifecycle_sta = 5
			   ,updateby = @updateby
			   ,updatedt = @updatedt

		WHERE UUID = @UUID

		]]>
	</sql>

	<!-- 数据配置导入更新 -->
	<sql id="updateDataImport">
        <![CDATA[
        UPDATE communitypile c,product t
        SET c.Install_site=@Install_site
	        , c.Install_time=@Install_time
	        , t.EqRegister=@EqRegister
	        , t.EqIp=@EqIp
	        , t.EqMCID=@mcid
	        , c.Remark=@Remark
	        , c.EqSta_ID=@EqSta_ID
	        , c.Update_person=@Update_person
	        , c.Update_time=@Update_time
        WHERE
	        c.Product_ID=t.Product_ID
	        AND c.CommunityPile_ID=@CommunityPile_ID

		]]>
	</sql>

	<!-- 回单数据设备  插入 数据管理 -->
	<sql id="insertYonghushujuByhuidandata">
        <![CDATA[
     INSERT INTO yonghushuju
			(yonghuzhuangtai,xingming,shenfenzheng,shoujuhao,fenguangxianhao,jiexuweizhi,
			kaijishijian,tingjishijian,youxiaoshijian,xiaoqu,dizhi,lianxidianhua,wangluo,dianshi,dianhua,yewu,fenguang,onumac,stbmcid,dianshiip,wangluoip,
			dianhuaip,dianhuavlan,wangluovlan,shangmenshijian,danzheng,sxdhhm,onuyj,jidingheyj,shoushifei,kuandaifei,chuzhuangfei,yunyingshang,bzygf,nianfei,beizhu,
			zongshoufei,shoujubenhao,qtsbsyqk,qitahaocai,jiexianzi,rj11,rj45,mokuai,mianban,wangxian,shigongren,xianchangbeizhu,beizhuhuizong,shebeixiaoshou,cailiaofei,kaipiaoxinxi,pipeizhuangtai,shoukuanshijian,createby,createdt)
			SELECT
			yonghuzhuangtai,xingming,shenfenzheng,shoujuhao,fenguangxianhao,jiexuweizhi,
			DATE_FORMAT(kaijishijian,'%Y-%m-%d'),DATE_FORMAT(tingjishijian,'%Y-%m-%d'),DATE_FORMAT(youxiaoshijian,'%Y-%m-%d'),xiaoqu,dizhi,lianxidianhua,CASE WHEN wangluo='' THEN '0' ELSE  wangluo END ,CASE WHEN dianshi='' THEN '0' ELSE  dianshi END,CASE WHEN dianhua='' THEN '0' ELSE  dianhua END,yewu,fenguang,onumac,stbmcid,dianshiip,wangluoip,
			dianhuaip,dianhuavlan,wangluovlan,shangmenshijian,danzheng,sxdhhm,onuyj,jidingheyj,shoushifei,kuandaifei,chuzhuangfei,yunyingshang,bzygf,nianfei,beizhu,
			zongshoufei,shoujubenhao,qtsbsyqk,qitahaocai,jiexianzi,rj11,rj45,mokuai,mianban,wangxian,shigongren,xianchangbeizhu,CONCAT(beizhuhuizong,@beizhuhuizong),shebeixiaoshou,cailiaofei,kaipiaoxinxi,pipeizhuangtai,shoukuanshijian,@createby,@createdt
			FROM huidandata

	WHERE UUID=@UUID
		]]>
	</sql>

	<sql id="insertYijiAuditByhuidandata">
        <![CDATA[
    		INSERT INTO huidanaudit SELECT * FROM huidandata WHERE uuid=@uuid
		]]>
	</sql>
	<sql id="insertQiegaiAuditByhuidandata">
        <![CDATA[
    		INSERT INTO qiegaiaudit SELECT * FROM huidandata WHERE uuid=@uuid
		]]>
	</sql>

		<!-- 回单数据设备  插入 数据管理 -->
	<sql id="getkucunShebeizhuangtai">
        <![CDATA[
   		SELECT
			e.EqSta_Name EqSta_Name
		FROM
			product p , eqsta e
		WHERE
			p.EqState = e.EqSta_ID
		AND p.Product_ID = @Product_ID

		]]>
	</sql>

	<!-- 数据编辑 更新 -->
	<sql id="updateDataEdite">
        <![CDATA[
        UPDATE communitypile c,product t
        SET   c.Install_site=@Install_site
	        , c.Install_time=@Install_time
	        , c.FirstEnterDate=@FirstEnterDate
	        , c.Community_ID=@Community_ID
	        , c.Get_person=@Get_person
	        , t.EqRegister=@EqRegister
	        , t.EqIp=@EqIp
	        , t.EqMAC=@EqMAC
	        , t.EqMCID=@EqMCID
	        , c.Remark=@Remark
	        , c.Update_person=@CUpdate_person
	        , c.Update_time=@CUpdate_time
	        , t.Update_person=@PUpdate_person
	        , t.Update_time=@PUpdate_time
        WHERE
	        c.Product_ID=t.Product_ID
	   	[AND c.CommunityPile_ID = @CommunityPile_ID]
		[AND c.Product_ID = @Product_ID]
		]]>
	</sql>

	<!-- 根据小区ID获取产品id -->
	<sql id="getProductIDfromXiaoquKuID">
        <![CDATA[
        SELECT
			Product_id Product_id
		FROM
		    communitypile
		WHERE
			CommunityPile_ID = @CommunityPile_ID
		]]>
	</sql>

	<!-- 获取时长信息 -->
	<sql id="getShichangInfo">
        <![CDATA[
        SELECT
			  s.id		      PK_ID
			 ,s.shichangName  shichangName
			 ,s.seq           seq
			 ,s.beiyong1      leixing
			 ,s.beiyong2      daikuan
			 ,s.beiyong3      beiyong3
			 ,s.shichang      shichangyue
			 ,s.jine      jine
		FROM shichang s
		WHERE 1=1
		[AND  s.id=@id]
		ORDER BY seq
		]]>
	</sql>

	<sql id="getDianshiInfo">
        <![CDATA[
        SELECT
			  s.id		              PK_ID
			 ,s.shichangName          shichangName
			 ,s.seq                   seq
			 ,s.shichangLeibie        shichangLeibie
			 ,s.yewuLeibie            yewuLeibie
			 ,s.shichangYue           shichangyue
			 ,s.jine                  jine
		FROM dianshiyewu s
		WHERE 1=1
		[AND  s.id=@id]
		ORDER BY seq
		]]>
	</sql>

	<!-- 获取时长信息 -->
	<sql id="getXiaoquInfo">
        <![CDATA[
       SELECT
			  c.Community_ID	      PK_ID
			 ,c.CommunityName             CommunityName
			 ,c.CommunityRemark           seq
			 ,c.netcode     netcode
			 ,c.tvcode      tvcode
			 ,d.District_Name      District_Name
			 ,d.District_ID      District_ID
			 ,c.address address
			 ,c.costumeCount costumeCount
			 ,c.storeID kufang
			 ,s.store_name kufangname
			 ,c.remark remark
		FROM community c LEFT JOIN store1 s ON s.UUID = c.storeID, district d
		WHERE 1=1
		AND c.District_ID = d.District_ID
		and c.Lifecycle_sta = 0
		and d.Lifecycle_sta = 0
		[AND  c.Community_ID=@id]
		ORDER BY c.CommunityRemark
		]]>
	</sql>

	<!-- 获取时长信息 -->
	<sql id="isHaveProduct">
        <![CDATA[
      SELECT COUNT(*) CNT
      FROM
      communitypile  c
      WHERE
      c.Community_ID = @Community_ID
		]]>
	</sql>

	<!-- 获取区域信息 -->
	<sql id="getQuyuInfo">
        <![CDATA[
       SELECT
				d.District_ID PK_ID
			 ,d.District_Name      District_Name
			 ,d.suoshuquyu      suoshuquyu

		FROM  district d
		WHERE 1=1
		and d.Lifecycle_sta = 0
		[AND  d.District_ID=@id]
		]]>
	</sql>

	<!-- 区域是否存在-->
	<sql id="isHaveQuyuInfo">
        <![CDATA[
		SELECT
			COUNT(*)   cnt
		FROM  district d
		WHERE 1=1
		[AND d.District_Name = @District_Name]
		[AND d.District_ID = @District_ID]
		]]>
	</sql>

		<!-- 区域是否存在-->
	<sql id="isQuyuHaveXiaoquInfo">
        <![CDATA[
		SELECT
			COUNT(*)   cnt
		FROM  community d
		WHERE 1=1
		[AND d.District_ID =@District_ID]
		]]>
	</sql>

	<!-- 小区是否存在重复-->
	<sql id="isHaveCommunityInfo">
        <![CDATA[
	SELECT
			COUNT(*)   cnt
		FROM  community d
		WHERE 1=1
		[AND d.CommunityName = @CommunityName]
		]]>
	</sql>

	<sql id="getShichangInfoCount">
        <![CDATA[
        SELECT
				COUNT(*) CNT
		FROM shichang s
		]]>
	</sql>


	<sql id="shichangDelete">
        <![CDATA[
       DELETE
       FROM
       		shichang
       WHERE
      		id=@id
		]]>
	</sql>

	<sql id="dianshiDelete">
        <![CDATA[
       DELETE
       FROM
       		dianshiyewu
       WHERE
      		id=@id
		]]>
	</sql>

	<sql id="quyuweihuDelete">
        <![CDATA[
       DELETE
       FROM
       		district
       WHERE
      		District_ID=@District_ID
		]]>
	</sql>

	<sql id="xiaoquweihuDelete">
        <![CDATA[
       DELETE
       FROM
       		community
       WHERE
      		CommunityName=@CommunityName
		]]>
	</sql>
	<sql id="xiaoquweihuDelete1">
        <![CDATA[
       DELETE
       FROM
       		xiaoqucode1
       WHERE
      		name=@name
		]]>
	</sql>

	<sql id="getRadiusInfo">
        <![CDATA[
      SELECT
			rw.iPolicyId iPolicyId
			,rw.iIspID iIspID
	FROM yonghushuju s, radius_wangluo rw
	WHERE 1=1
		AND s.UUID = @UUID
		AND s.beiyong1 = rw.id
		]]>
	</sql>


	<sql id="getTietongShuju">
        <![CDATA[
    SELECT
		 ww.UUID id
		,ww.yonghuzhuangtai yonghuzhuangtai
		,DATE_FORMAT(ww.kaijishijian,'%Y/%m/%d') kaijishijian
		,DATE_FORMAT(ww.tingjishijian,'%Y/%m/%d') tingjishijian
		,ww.xiaoqu xiaoqu
		,ww.xingming xingming
		,ww.dizhi dizhi
		,ww.wangluo wangluo
		,ww.lianxidianhua lianxidianhua
		,ww.yewu yewu
		,ww.zongshoufei  kuandaifei
		,ww.kuandaifei  zongshoufei
		,DATE_FORMAT(ww.shoukuanshijian,'%Y/%m/%d') shoukuanshijian
		,xx.netcode netcode
		,CONCAT(xx.netcode,dizhi) username

		 FROM yonghushuju ww ,xiaoqucode1 xx
		WHERE 1=1
		AND (yonghuzhuangtai = '已安装' OR yonghuzhuangtai='已续费')
		[AND kaijishijian =  @kaijishijian]
		[AND kaijishijian >= @kaijishijian1]
		[AND kaijishijian <= @kaijishijian2]
		AND wangluo<>'0'
		AND xx.NAME = ww.xiaoqu
		]]>
	</sql>


	<sql id="getTietongShuju1">
        <![CDATA[
    SELECT
		 ww.UUID id
		,ww.yonghuzhuangtai yonghuzhuangtai
		,DATE_FORMAT(ww.kaijishijian,'%Y/%m/%d') kaijishijian
		,DATE_FORMAT(ww.tingjishijian,'%Y/%m/%d') tingjishijian
		,ww.xiaoqu xiaoqu
		,ww.xingming xingming
		,ww.dizhi dizhi
		,ww.wangluo wangluo
		,ww.lianxidianhua lianxidianhua
		,ww.yewu yewu
		,ww.zongshoufei  zongshoufei
		,ww.kuandaifei  kuandaifei
		,DATE_FORMAT(ww.shoukuanshijian,'%Y/%m/%d') shoukuanshijian
		,xx.netcode netcode
		,REPLACE(CONCAT(xx.netcode,dizhi),'-','') username1
		,wangluoip username

		 FROM yonghushuju ww ,xiaoqucode1 xx
		WHERE 1=1
		AND (yonghuzhuangtai = '已安装' OR yonghuzhuangtai='已续费' OR yonghuzhuangtai='已拆机'  )
		[AND createdt >= @createdt1]
		[AND createdt <= @createdt2]
		AND wangluo<>'0'
		AND netcode <>0
		AND xx.NAME = ww.xiaoqu
		]]>
	</sql>

	<sql id="getTietongShujuXiaoqu">
        <![CDATA[
  		 SELECT
			   netcode netcode,
			   communityname communityname
		 FROM
		 	   community
		 WHERE
		 	   Create_time >= @createdt1

		]]>
	</sql>

	<sql id="getTietongShujuZifei">
        <![CDATA[
  		 SELECT
			   shichangName shichangName,
			   beiyong2 daikuan
		 FROM
		       shichang
		 WHERE
		 	   beiyong3 >= @createdt1

		]]>
	</sql>

	<!-- 2013-11-15  社区统计金额
		900-1300  2次
		1300-1500 3次
		1500-2200 5次
		2200+     8次
	-->
	<sql id="getShequjine">
        <![CDATA[
	   SELECT
		xiaoqu xiaoqu,
		UUID   uuid,
	    dizhi  dizhi,
	    xingming xingming,
	    lianxidianhua lianxidianhua,
	    zongshoufei zongshoufei,
	   CASE   WHEN  zongshoufei>=900 AND zongshoufei <1300 THEN '2'
			  WHEN (zongshoufei >= 1300  AND zongshoufei<1500 )THEN '3'
	WHEN ( zongshoufei>= 1500  AND zongshoufei<2200 )THEN '5'
	WHEN (zongshoufei >= 2200 )THEN '8' 	END   cishu
	FROM
	  yonghushuju
	WHERE 1 = 1
	  AND (
	    yonghuzhuangtai = '已安装'
	    OR yonghuzhuangtai = '已续费'
	  )
	  AND zongshoufei <> ''
	  AND zongshoufei <> 0
	  AND zongshoufei >= 900
	  [AND createdt >= @kaijis ]
	  [AND createdt <= @kaijie ]
	  [AND xiaoqu = @xiaoqu]
		]]>
	</sql>

	<!-- 查询用户数据(billy20140723) -->
	<sql id="GetResultTingji">
	<![CDATA[
	SELECT
	t.UUID uuid
	,DATE_FORMAT(t.kaijishijian,'%Y-%m-%d') kaijishijian
	,DATE_FORMAT(t.tingjishijian,'%Y-%m-%d') tingjishijian
	,DATE_FORMAT(t.youxiaoshijian,'%Y-%m-%d') youxiaoshijian
	,t.dianhuaip dianhuaip
	FROM yonghushuju t
	WHERE
	t.youxiaoshijian = @tingjishijian
	AND t.dianhuaip <> '0'
	AND t.dianhuaip <> ''
	AND t.dianshi <> '0'
	AND t.dianshi <> ''
	AND t.yonghuzhuangtai = '已安装'
	]]>
	</sql>
	<!-- iptv日志(billy20140919) -->
	<sql id="getIptvlogInfo">
		<![CDATA[
        SELECT
			  i.UUID		          uuid
			 ,DATE_FORMAT(i.tingjishijian,'%Y-%m-%d')         tingjishijian
			 ,i.tingjizhanghao        tingjizhanghao
			 ,i.shifouchenggong        shifouchenggong
			 ,i.serverip        serverip
			 ,i.shibaixinxi        shibaixinxi
			,i.interfaceType,
			i.isweb
		FROM iptvlog i
		WHERE 1=1
		[AND  i.tingjishijian=@tingjishijian]
		[AND  i.tingjizhanghao=@tingjizhanghao]
		[AND  i.shifouchenggong=@shifouchenggong]
		[AND i.interfaceType=@interfaceType]
		[AND  i.isweb=@isweb]
		ORDER BY i.tingjishijian DESC,i.tingjizhanghao DESC
		]]>
	</sql>
	<sql id="getIptvlogInfoCount">
        <![CDATA[
        SELECT
				COUNT(*) CNT
		FROM iptvlog i
		WHERE 1=1
		[AND  i.tingjishijian=@tingjishijian]
		[AND  i.tingjizhanghao=@tingjizhanghao]
		[AND  i.interfaceType=@interfaceType]
		[AND  i.isweb=@isweb]
		]]>
	</sql>
	<!-- 日报统计 明细 -->
	<sql id="GetResultRibaotongjiMingxi">
		<![CDATA[
		SELECT
  uuid PK_ID,
  yonghuzhuangtai,
  case yonghuzhuangtai
  when '已安装' then '开户'
  when '已收件' then '收件'
  when '已维修' then '维修'
  when '已续费' then '续费'
  when '已退订' then '退订'
  else '' end gongzuoleibie,
  xingming,
  shenfenzheng,
  shoujuhao,
  fenguangxianhao,
  jiexuweizhi,
  DATE_FORMAT(kaijishijian,'%Y-%m-%d') kaijishijian
	,DATE_FORMAT(tingjishijian,'%Y-%m-%d') tingjishijian,
  xiaoqu,
  dizhi,
  lianxidianhua,
  CASE WHEN wangluo='0' THEN '无' ELSE wangluo END wangluo,
  CASE WHEN dianshi='0' THEN '无' ELSE dianshi END dianshi,
  dianhua,
  yewu,
  fenguang,
  onumac,
  stbmcid,
  dianshiip,
  wangluoip,
  dianhuaip,
  dianhuavlan,
  wangluovlan,
  shangmenshijian,
  danzheng,
  sxdhhm,
  onuyj,
  jidingheyj,
  shoushifei,
  kuandaifei,
  chuzhuangfei,
  CASE WHEN yunyingshang ='0' OR yunyingshang ='' OR yunyingshang is null THEN '天房'
  ELSE yunyingshang END yunyingshang,
  bzygf,
  nianfei,
  beizhu,
  zongshoufei,
  shoujubenhao,
  qtsbsyqk,
  qitahaocai,
  jiexianzi,
  rj11,
  rj45,
  mokuai,
  mianban,
  wangxian,
  shigongren,
  xianchangbeizhu,
  beizhuhuizong,
  createby,
  createdt,
  updateby,
  updatedt,
  shebeixiaoshou,
  cailiaofei,
  kaipiaoxinxi,
  pipeizhuangtai,
  DATE_FORMAT(shoukuanshijian,'%Y-%m-%d') shoukuanshijian,
  isuse,
  weixiuleixing,
  zongshoufei hejifeiyong
FROM yonghushuju y
WHERE 1=1
and y.yonghuzhuangtai in ('已安装','已收件','已维修','已续费','已退订')
		[AND y.kaijishijian >= @kaijis]
		[AND y.kaijishijian <= @kaijie]
		[AND y.tingjishijian >= @tingjis]
		[AND y.tingjishijian <= @tingjie]
		[AND y.shoukuanshijian >= @shoukuanshijians]
		[AND y.shoukuanshijian <= @shoukuanshijiane]
		[AND y.youxiaoshijian >= @youxiaoshijians]
		[AND y.youxiaoshijian <= @youxiaoshijiane]
		#
]]>
	</sql>
	<sql id="GetCountRibaotongjiMingxi">
		<![CDATA[
		SELECT
  COUNT(*) CNT
FROM yonghushuju y
WHERE 1=1
and y.yonghuzhuangtai in ('已安装','已收件','已维修','已续费','已退订')
		[AND 1!=@no]
		[AND y.kaijishijian >= @kaijis]
		[AND y.kaijishijian <= @kaijie]
		[AND y.tingjishijian >= @tingjis]
		[AND y.tingjishijian <= @tingjie]
		[AND y.shoukuanshijian >= @shoukuanshijians]
		[AND y.shoukuanshijian <= @shoukuanshijiane]
		[AND y.youxiaoshijian >= @youxiaoshijians]
		[AND y.youxiaoshijian <= @youxiaoshijiane]
		#
]]>
	</sql>
	<sql id="GetResultRibaotongjiShuliang">
		<![CDATA[
			SELECT
  				IFNULL(SUM(CASE yonghuzhuangtai WHEN '已安装' THEN 1 ELSE 0 END),0) kaihu
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已收件' THEN 1 ELSE 0 END),0) shoujian
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已维修' THEN 1 ELSE 0 END),0) weixiu
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已续费' THEN 1 ELSE 0 END),0) xufei
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已退订' THEN 1 ELSE 0 END),0) tuiding
				,IFNULL(SUM(CASE WHEN yonghuzhuangtai = '已安装' OR yonghuzhuangtai = '已收件' OR yonghuzhuangtai = '已维修' OR yonghuzhuangtai = '已续费' THEN 1 ELSE 0 END),0) ctdhj
			FROM yonghushuju y
			WHERE yonghuzhuangtai IN ('已安装','已收件','已维修','已续费','已退订')
				[AND CASE WHEN yunyingshang ='0' OR yunyingshang ='' OR yunyingshang is null THEN '天房' ELSE yunyingshang END =@yunyingshang]
				[AND y.kaijishijian >= @kaijis]
				[AND y.kaijishijian <= @kaijie]
				[AND y.tingjishijian >= @tingjis]
				[AND y.tingjishijian <= @tingjie]
				[AND y.shoukuanshijian >= @shoukuanshijians]
				[AND y.shoukuanshijian <= @shoukuanshijiane]
			#
]]>
	</sql>
	<sql id="GetResultRibaotongjishouru">
		<![CDATA[
			SELECT
  				IFNULL(SUM(CASE yonghuzhuangtai WHEN '已安装' THEN zongshoufei ELSE 0 END),0) kaihu
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已收件' THEN zongshoufei ELSE 0 END),0) shoujian
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已维修' THEN zongshoufei ELSE 0 END),0) weixiu
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已续费' THEN zongshoufei ELSE 0 END),0) xufei
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已退订' THEN zongshoufei ELSE 0 END),0) tuiding
				,IFNULL(SUM(CASE WHEN yonghuzhuangtai = '已安装' OR yonghuzhuangtai = '已收件' OR yonghuzhuangtai = '已维修' OR yonghuzhuangtai = '已续费' THEN zongshoufei ELSE 0 END),0) ctdhj
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已安装' THEN zongshoufei-IFNULL(onuyj,0)-IFNULL(jidingheyj,0) ELSE 0 END),0) cyjkaihu
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已收件' THEN zongshoufei-IFNULL(onuyj,0)-IFNULL(jidingheyj,0) ELSE 0 END),0) cyjshoujuan
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已维修' THEN zongshoufei-IFNULL(onuyj,0)-IFNULL(jidingheyj,0) ELSE 0 END),0) cyjweixiu
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已续费' THEN zongshoufei-IFNULL(onuyj,0)-IFNULL(jidingheyj,0) ELSE 0 END),0) cyjxufei
				,IFNULL(SUM(CASE yonghuzhuangtai WHEN '已退订' THEN zongshoufei-IFNULL(onuyj,0)-IFNULL(jidingheyj,0) ELSE 0 END),0) cyjtuiding
				,IFNULL(SUM(CASE WHEN yonghuzhuangtai = '已安装' OR yonghuzhuangtai = '已收件' OR yonghuzhuangtai = '已维修' OR yonghuzhuangtai = '已续费' THEN zongshoufei-IFNULL(onuyj,0)-IFNULL(jidingheyj,0) ELSE 0 END),0) cyjtdhj
			FROM yonghushuju Y
			WHERE yonghuzhuangtai IN ('已安装','已收件','已维修','已续费','已退订')
				[AND CASE WHEN yunyingshang ='0' OR yunyingshang ='' OR yunyingshang is null THEN '天房' ELSE yunyingshang END =@yunyingshang]
				[AND y.kaijishijian >= @kaijis]
				[AND y.kaijishijian <= @kaijie]
				[AND y.tingjishijian >= @tingjis]
				[AND y.tingjishijian <= @tingjie]
				[AND y.shoukuanshijian >= @shoukuanshijians]
				[AND y.shoukuanshijian <= @shoukuanshijiane]
			#
]]>
	</sql>
	<sql id="GetXufeilv">
	<![CDATA[
	call xufeilv(@xiaoquname,@kaijis,@kaijie)
	]]>
	</sql>

	<!-- WebService日志(billy20140919) -->
	<sql id="getWebServiceInfo">
        <![CDATA[
        SELECT
			 w.id id
			 , w.UUID		          uuid
			 ,w.yonghuzhuangtai yonghuzhuangtai
			 ,w.xiaoqu xiaoqu
			 ,w.dizhi dizhi
			 ,w.InterfaceDetail InterfaceDetail
			 ,w.InterfaceResult InterfaceResult
			 ,w.tradeAccount tradeAccount
			 ,w.logState logState
			 ,w.tradeDetail tradeDetail
			 ,w.daikuan daikuan
			 ,DATE_FORMAT(w.createDt,'%Y-%m-%d %H:%i:%s')         createDt
			 ,w.userId userId
			 ,w.xmlId xmlId
			 ,w.xmlState xmlState
			 ,w.xmlString xmlString
		FROM WebService_Log w
		WHERE 1=1
		[AND w.xiaoqu = @xiaoqu]
		[AND w.dizhi LIKE @dizhi]
		[AND w.yonghuzhuangtai = @yonghuzhuangtai]
		[AND w.interfaceResult = @interfaceResult]
		[AND w.createDt >= @createDt]
		[AND w.createDt <= @endDate]
		ORDER BY w.createdt desc
		]]>
	</sql>
	<sql id="getServiceInfoCount">
        <![CDATA[
        SELECT
				COUNT(*) CNT
		FROM WebService_Log w
		WHERE 1=1
		[AND w.xiaoqu = @xiaoqu]
		[AND w.dizhi LIKE @dizhi]
		[AND w.yonghuzhuangtai = @yonghuzhuangtai]
		[AND w.interfaceResult = @interfaceResult]
		[AND w.createDt >= @createDt]
		[AND w.createDt <= @endDate]
		ORDER BY w.createdt desc

		]]>
	</sql>
	<sql id="GetLogByUUID">
        <![CDATA[
        SELECT
        	w.id id
        	,xmlId xmlId
        	,w.UUID uuid
			,w.xmlString xmlString
		FROM WebService_Log w
		WHERE 1=1
		 [AND w.uuid = @uuid]

		]]>
	</sql>

	<sql id="UpdateLog">
        <![CDATA[
        Update WebService_Log
        Set
        	interfaceResult = @interfaceResult
        	,logState = @logState
        	,xmlState = @xmlState
		WHERE
			id = id and
		 uuid = @uuid and
		 xmlId = @xmlId

		]]>
	</sql>

	<sql id="InsertDelPGDLog">
        <![CDATA[
        INSERT INTO paigongdandellog (
		  xiaoquname,
		  userplace,
		  operateuser,
		  operatetime
		)
		VALUES
		  (
		    @xiaoquname,
		    @userplace,
		    @operateuser,
		    @operatetime
		  )

		]]>
	</sql>
	<sql id="getQuyuByXiaoqu">
	 <![CDATA[
		SELECT
		    storeID
		  FROM
		    community
		  WHERE CommunityName = @xiaoquname
	 ]]>
	</sql>
	 <!-- 获取小区状态-->
	<sql id="getXiaoqukuZhangtai">
		<![CDATA[
		select EqSta_ID EqSta_ID
		from
		 communitypile
		WHERE CommunityPile_ID = @CommunityPile_ID
		]]>
	</sql>
	<sql id="updateXiaoqukuZhangtai">
        <![CDATA[
        Update communitypile
        Set
        	EqSta_ID = @EqSta_ID
		WHERE CommunityPile_ID = @CommunityPile_ID
		]]>
	</sql>
	 <!-- 获取小区Code-->
	<sql id="getXiaoquCode">
		<![CDATA[
		select netcode,tvcode
		from
		 community
		WHERE CommunityName = @CommunityName
		]]>
	</sql>
	<sql id="getZongkufangInfoList">
         <![CDATA[
		 SELECT *
		 FROM
		 zongkufanginfo
		 ]]>
	</sql>
	<sql id="getZongkufangInfoListCount">
         <![CDATA[
			SELECT
				COUNT(*) CNT
			FROM
			zongkufanginfo
		 ]]>
	</sql>
	<sql id="getZongkufangLogList">
         <![CDATA[
		 SELECT
		 w.OperateType
		 ,w.OperateinfoId
		 ,DATE_FORMAT(w.OperateTime,'%Y-%m-%d') OperateTime
		 ,w.OperateSuu
		 ,d.store_name OperateStore
		 ,w.Remark
		 FROM
		 zongkufanglog w
		 LEFT JOIN store1 d ON d.UUID = w.OperateStore
		 WHERE 1=1
		[AND w.OperateType = @OperateType]
		[AND w.OperateStore = @OperateStore]
		[AND w.OperateTime = @OperateTime]
		ORDER BY w.OperateTime DESC
		 ]]>
	</sql>
	<sql id="getZongkufangLogListCount">
         <![CDATA[
			SELECT
				COUNT(*) CNT
			FROM
			zongkufanglog
		WHERE 1=1
		[AND w.OperateType = @OperateType]
		[AND w.OperateStore = @OperateStore]
		[AND w.OperateTime = @OperateTime]
		 ]]>
	</sql>
	<sql id="getZongkufangKucunsuu">
		<![CDATA[
		select kucunSuu
		from
		 zongkufanginfo
		WHERE UUID = @UUID
		]]>
	</sql>
<!-- 照片上传数据检索 -->
	<sql id="getPhotoUploadInfoList">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.yonghuzhuangtai yonghuzhuangtai
			,h.xiaoqu xiaoqu
			,h.dizhi dizhi
			,h.wangluo wangluo
			,h.dianshi dianshi
			,h.dianhua dianhua
			,DATE_FORMAT(h.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
			,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
			,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
			,h.zongshoufei zongshoufei
			,h.pipeizhuangtai pipeizhuangtai
			,h.xingming xingming
			,h.shenfenzheng shenfenzheng
			,h.shoujuhao shoujuhao
			,h.fenguangxianhao fenguangxianhao
			,h.jiexuweizhi jiexuweizhi
			,h.lianxidianhua lianxidianhua
			,h.yewu yewu
			,h.fenguang fenguang
			,h.onumac onumac
			,h.stbmcid stbmcid
			,h.dianshiip dianshiip
			,h.wangluoip wangluoip
			,h.dianhuaip dianhuaip
			,h.dianhuavlan dianhuavlan
			,h.wangluovlan wangluovlan
			,h.shangmenshijian shangmenshijian
			,h.danzheng danzheng
			,h.sxdhhm sxdhhm
			,h.onuyj  onuyj
			,h.jidingheyj jidingheyj
			,h.shoushifei shoushifei
			,h.kuandaifei kuandaifei
			,h.chuzhuangfei chuzhuangfei
			,h.shebeixiaoshou shebeixiaoshou
			,h.cailiaofei cailiaofei
			,h.yunyingshang yunyingshang
			,h.bzygf bzygf
			,h.nianfei nianfei
			,h.beizhu beizhu
			,h.shoujubenhao shoujubenhao
			,h.kaipiaoxinxi kaipiaoxinxi
			,h.qtsbsyqk qtsbsyqk
			,h.qitahaocai qitahaocai
			,h.jiexianzi jiexianzi
			,h.rj11 rj11
			,h.rj45 rj45
			,h.mokuai mokuai
			,h.mianban mianban
			,h.wangxian wangxian
			,h.shigongren shigongren
			,h.xianchangbeizhu xianchangbeizhu
			,h.beizhuhuizong beizhuhuizong
			,h.heduibeizhu heduibeizhu
		FROM
		     photoupload h
		WHERE
			1=1
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.dizhi LIKE @dizhi]
			[AND h.kaijishijian >= @kaijis]
			[AND h.kaijishijian <= @kaijie]
			[AND h.tingjishijian >= @tingjis]
			[AND h.tingjishijian <= @tingjie]
			[AND h.shoukuanshijian >= @shoukuanshijians]
			[AND h.shoukuanshijian <= @shoukuanshijiane]
			[AND h.yonghuzhuangtai = @yonghuzhuangtai]
			[AND h.uuid = @uuid]
			[AND h.heduibeizhu = @heduibeizhu]
			[AND h.yonghuzhuangtai <> @daihedui]
			[AND h.yonghuzhuangtai <> @yirudang]
			[AND h.Lifecycle_sta = @Lifecycle_sta]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="getPhotoUploadInfoListCount">
        <![CDATA[
       SELECT
			COUNT(*) CNT
		FROM
		     photoupload h
		WHERE
			1=1
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.dizhi LIKE @dizhi]
			[AND h.kaijishijian >= @kaijis]
			[AND h.kaijishijian <= @kaijie]
			[AND h.tingjishijian >= @tingjis]
			[AND h.tingjishijian <= @tingjie]
			[AND h.shoukuanshijian >= @shoukuanshijians]
			[AND h.shoukuanshijian <= @shoukuanshijiane]
			[AND h.yonghuzhuangtai = @yonghuzhuangtai]
			[AND h.yonghuzhuangtai <> @daihedui]
			[AND h.yonghuzhuangtai <> @yirudang]
			[AND h.heduibeizhu = @heduibeizhu]
			[AND h.Lifecycle_sta = @Lifecycle_sta]
		]]>
	</sql>
	<sql id="insertPhotoUploadByhuidandata">
        <![CDATA[
    		INSERT INTO photoupload SELECT * FROM huidandata WHERE uuid=@uuid
		]]>
	</sql>
	<sql id="initPhotoUploadJtiByhuidandata">
        <![CDATA[
    		UPDATE photoupload SET yonghuzhuangtai='未上传',Lifecycle_sta='0' WHERE uuid=@uuid
		]]>
	</sql>
	<sql id="queryByhuidandata">
        <![CDATA[
    		SELECT COUNT(*) CNT FROM photoupload WHERE uuid=@uuid
		]]>
	</sql>
	<sql id="changePhotoUploadJtiByuuid">
        <![CDATA[
    		UPDATE photoupload SET yonghuzhuangtai=@yonghuzhuangtai,beizhuhuizong=CONCAT(@beizhu,beizhuhuizong) WHERE uuid=@uuid
		]]>
	</sql>
	<sql id="auditPhotoUploadJtiByuuid">
        <![CDATA[
    		UPDATE photoupload SET Lifecycle_sta=@Lifecycle_sta,beizhuhuizong=CONCAT(@beizhu,beizhuhuizong) WHERE uuid=@uuid
		]]>
	</sql>
	<sql id="auditPhotoUploadHeduiBeizhuByuuid">
	 	<![CDATA[
	 		UPDATE photoupload SET beizhuhuizong=CONCAT(@beizhu,beizhuhuizong) WHERE uuid=@uuid
	 	]]>
	</sql>
<sql id="getPhotoUploadInfo">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.yonghuzhuangtai yonghuzhuangtai
			,h.xiaoqu xiaoqu
			,h.dizhi dizhi
			,h.wangluo wangluo
			,h.dianshi dianshi
			,h.dianhua dianhua
			,DATE_FORMAT(h.shoukuanshijian,'%Y-%m-%d') shoukuanshijian
			,DATE_FORMAT(h.kaijishijian,'%Y-%m-%d') kaijishijian
			,DATE_FORMAT(h.tingjishijian,'%Y-%m-%d') tingjishijian
			,h.zongshoufei zongshoufei
			,h.pipeizhuangtai pipeizhuangtai
			,h.xingming xingming
			,h.shenfenzheng shenfenzheng
			,h.shoujuhao shoujuhao
			,h.fenguangxianhao fenguangxianhao
			,h.jiexuweizhi jiexuweizhi
			,h.lianxidianhua lianxidianhua
			,h.yewu yewu
			,h.fenguang fenguang
			,h.onumac onumac
			,h.stbmcid stbmcid
			,h.dianshiip dianshiip
			,h.wangluoip wangluoip
			,h.dianhuaip dianhuaip
			,h.dianhuavlan dianhuavlan
			,h.wangluovlan wangluovlan
			,h.shangmenshijian shangmenshijian
			,h.danzheng danzheng
			,h.sxdhhm sxdhhm
			,h.onuyj  onuyj
			,h.jidingheyj jidingheyj
			,h.shoushifei shoushifei
			,h.kuandaifei kuandaifei
			,h.chuzhuangfei chuzhuangfei
			,h.shebeixiaoshou shebeixiaoshou
			,h.cailiaofei cailiaofei
			,h.yunyingshang yunyingshang
			,h.bzygf bzygf
			,h.nianfei nianfei
			,h.beizhu beizhu
			,h.shoujubenhao shoujubenhao
			,h.kaipiaoxinxi kaipiaoxinxi
			,h.qtsbsyqk qtsbsyqk
			,h.qitahaocai qitahaocai
			,h.jiexianzi jiexianzi
			,h.rj11 rj11
			,h.rj45 rj45
			,h.mokuai mokuai
			,h.mianban mianban
			,h.wangxian wangxian
			,h.shigongren shigongren
			,h.xianchangbeizhu xianchangbeizhu
			,h.beizhuhuizong beizhuhuizong
			,h.heduibeizhu heduibeizhu
		FROM
		     photoupload h
		WHERE
			1=1
			[AND h.uuid = @uuid]
		]]>
	</sql>
	<sql id="getPhotoUploadTaocanNum">
        <![CDATA[
			SELECT
			  COUNT(h.uuid) CNT
			FROM
			  photoupload h,
			  photoupload h1
			WHERE 1 = 1
			  AND h1.uuid = @uuid
			  AND h.xiaoqu = h1.xiaoqu
			  AND h.dizhi = h1.dizhi
			  AND h1.shoukuanshijian = h.shoukuanshijian
			  AND h1.uuid != h.uuid
			  AND h.wangluo != "0"
			  AND h.wangluo != ""
			  AND h.Lifecycle_sta IN ('0','1')
		]]>
	</sql>
	<sql id="getFenguangInfoList">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.xiaoqu xiaoqu
			,h.louhao louhao
			,h.loumen loumen
			,h.louceng louceng
			,h.danyuan danyuan
			,h.fenguangID fenguangID
			,h.beizhu beizhu
		FROM
		     fenguangguize h
		WHERE
			h.Lifecycle_sta <> 9
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.louhao LIKE @louhao]
			[AND h.loumen LIKE @loumen]
			[AND h.louceng LIKE @louceng]
			[AND h.danyuan LIKE @danyuan]
			[AND h.fenguangID LIKE @fenguangID]
			[AND h.beizhu LIKE @beizhu]
			[AND h.uuid = @uuid]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="getFenguangInfoListCount">
        <![CDATA[
       SELECT
			COUNT(*) CNT
		FROM
		     fenguangguize h
		WHERE
			h.Lifecycle_sta <> 9
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.louhao LIKE @louhao]
			[AND h.loumen LIKE @loumen]
			[AND h.louceng LIKE @louceng]
			[AND h.danyuan LIKE @danyuan]
			[AND h.beizhu LIKE @beizhu]
			[AND h.fenguangID LIKE @fenguangID]
			[AND h.uuid = @uuid]
		]]>
	</sql>
	<sql id="queryfenguang">
	 <![CDATA[
	 	SELECT
       		 h.uuid PK_ID
			,h.xiaoqu xiaoqu
			,h.louhao louhao
			,h.loumen loumen
			,h.louceng louceng
			,h.danyuan danyuan
			,h.fenguangID fenguangID
			,h.beizhu beizhu
		FROM
		     fenguangguize h
		WHERE
			h.uuid = @uuid
	 ]]>
	</sql>
	<sql id="getFenguangFenpeiList">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.mask mask
			,h.kuang kuang
			,h.fenguang fenguang
			,h.fenguangID fenguangID
			,h.remark remark
		FROM
		     fenguangfenpei h
		WHERE
			h.Lifecycle_sta <> 9
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.mask = @mask]
			[AND h.fenguang LIKE @fenguang]
			[AND h.kuang LIKE @kuang]
			[AND h.fenguangID LIKE @fenguangID]
			[AND h.remark LIKE @remark]
			[AND h.uuid = @uuid]
		]]>
	</sql>
	<!-- 工单数据查询。用于核对 -->
	<sql id="getFenguangFenpeiListCount">
        <![CDATA[
       SELECT
			COUNT(*) CNT
		FROM
		     fenguangfenpei h
		WHERE
			h.Lifecycle_sta <> 9
			[AND h.xiaoqu LIKE @xiaoqu]
			[AND h.fenguangID LIKE @fenguangID]
			[AND h.kuang LIKE @kuang]
			[AND h.fenguang LIKE @fenguang]
			[AND h.mask = @mask]
			[AND h.uuid = @uuid]
		]]>
	</sql>
	<sql id="queryfenguangfenpei">
	 <![CDATA[
	 	SELECT
       		 h.uuid PK_ID
			,h.fenguangID fenguangID
			,h.kuang kuang
			,h.fenguang fenguang
			,h.mask mask
			,h.remark remark
		FROM
		     fenguangfenpei h
		WHERE
			h.uuid = @uuid
	 ]]>
	</sql>
		<!-- 查询所有查询条件列表 -->
	<sql id="getSenListAll2">
		<![CDATA[
		SELECT distinct t.name	MODULE_KEY
				,t.disvalue	MODULE_VALUE
		FROM searchlist t where t.lifecyclestatus=2 and dictype= @dictype
	]]>
	</sql>
	<sql id="getKuandaiByXiaoqu">
	 <![CDATA[
	 	SELECT
	 	  id,
		  shichangName
		FROM
		  shichang
		WHERE id NOT IN
		  (SELECT
		    shichang_ID
		  FROM
		    xiaoqushichanglink
		  WHERE Community_ID =
		    (SELECT
		      Community_ID
		    FROM
		      community
		    WHERE CommunityName = @xiaoqu))
		ORDER BY seq
	 ]]>
	</sql>
	<sql id="getDianshiByXiaoqu">
	 <![CDATA[
	 	SELECT
	 	  id,
		  shichangName
		FROM
		  dianshiyewu
		WHERE id NOT IN
		  (SELECT
		    dianshiyewu_ID
		  FROM
		    xiaoqudianshiyewulink
		  WHERE Community_ID =
		    (SELECT
		      Community_ID
		    FROM
		      community
		    WHERE CommunityName = @xiaoqu))
		ORDER BY seq
	 ]]>
	</sql>
<sql id="getAllKuandaiByXiaoqu">
	 <![CDATA[
	 	SELECT
	 	  id,
		  shichangName
		FROM
		  shichang
		WHERE id IN
		  (SELECT
		    shichang_ID
		  FROM
		    xiaoqushichanglink
		  WHERE Community_ID =
		    (SELECT
		      Community_ID
		    FROM
		      community
		    WHERE CommunityName = @xiaoqu))
		ORDER BY seq
	 ]]>
	</sql>
	<sql id="getAllDianshiByXiaoqu">
	 <![CDATA[
	 	SELECT
	 	  id,
		  shichangName
		FROM
		  dianshiyewu
		WHERE id IN
		  (SELECT
		    dianshiyewu_ID
		  FROM
		    xiaoqudianshiyewulink
		  WHERE Community_ID =
		    (SELECT
		      Community_ID
		    FROM
		      community
		    WHERE CommunityName = @xiaoqu))
		ORDER BY seq
	 ]]>
	</sql>
	<sql id="removeXiaoQuAllKuandai">
		<![CDATA[
		DELETE FROM xiaoqushichangLink WHERE Community_ID = @Community_ID
		]]>
	</sql>
	<sql id="removeXiaoQuAllDianshi">
		<![CDATA[
		DELETE FROM xiaoqudianshiyewuLink WHERE Community_ID = @Community_ID
		]]>
	</sql>
	<sql id="insertpaigongdanpreimportByPGD">
        <![CDATA[
    		INSERT INTO paigongdanpreimport
			(PUUID,username,xiaoquname,userplace,usertel,kuandai,tv,tel,useryaoqiu,onu,jidinghe,beizhu,paigongren,createdt,createby,updateby,updatedt,state,
			importstate,paigongriqi,OUMMAC,STBMAC,tvip,netip,telip,telvaln,netvaln,fenguang,yewu,netusername,netpassword,anzhuangshijian,xiangmu,tfkuandaidaikuan,
			tfkdnianxian,tfiptv,tfiptvnianxian,tfsfyewu,qtye,fufei,fufeitype,telhaoma1,telhaoma2,dxfandan,zhengjian,shoushifei,nianfei,buzuyue,chuzhuangfei,
			kuaidaifei,tfkdczf,tfkuandaifei,tfiptvshoushifei,tfjidingheyajin,yuyingshang,qtbuzuyue,heji,jiaohuanji,dxchuzhuangfei,telhaoma3,telhaoma4,
			tvzhidingnum,onuzhiding,shujuupdatedt,shujuupdateby,shigongzhongdt,shigongzhongby,gongbidt,gongbiby,jiedandt,jiedanby,qujiandt,qujianby,yiqujiandt,
			yiqujianby,yishangchuandt,yishangchuanby,ysdxxddt,ysdxxdby,sckfsjdt,sckfsjby,tuidandt,tuidanby,tuidanbeizhu,jiedanbeizhu,shebeixiaoshou,cailiaofei,
			kaipiaoxinxi,tingjishijian,shenfenzheng,shichangbeishu,fenguangD,onumacD,stbmcidD,dianshiipD,CommunityPile_ID,CommunityPile_ID2,yewutype,biduikbn,
			bdfenguang,bdonumac,bdstbmcid,bddianshiip,fenguangID,yjfenguang,yjonumac,yjstbmcid,yjdianshiip,newkaijishijian,newtingjishijian)
			SELECT
			UUID,username,xiaoquname,userplace,usertel,kuandai,tv,tel,useryaoqiu,onu,jidinghe,beizhu,paigongren,createdt,createby,updateby,updatedt,state,
			importstate,paigongriqi,OUMMAC,STBMAC,tvip,netip,telip,telvaln,netvaln,fenguang,yewu,netusername,netpassword,anzhuangshijian,xiangmu,tfkuandaidaikuan,
			tfkdnianxian,tfiptv,tfiptvnianxian,tfsfyewu,qtye,fufei,fufeitype,telhaoma1,telhaoma2,dxfandan,zhengjian,shoushifei,nianfei,buzuyue,chuzhuangfei,
			kuaidaifei,tfkdczf,tfkuandaifei,tfiptvshoushifei,tfjidingheyajin,yuyingshang,qtbuzuyue,heji,jiaohuanji,dxchuzhuangfei,telhaoma3,telhaoma4,
			tvzhidingnum,onuzhiding,shujuupdatedt,shujuupdateby,shigongzhongdt,shigongzhongby,gongbidt,gongbiby,jiedandt,jiedanby,qujiandt,qujianby,yiqujiandt,
			yiqujianby,yishangchuandt,yishangchuanby,ysdxxddt,ysdxxdby,sckfsjdt,sckfsjby,tuidandt,tuidanby,tuidanbeizhu,jiedanbeizhu,shebeixiaoshou,cailiaofei,
			kaipiaoxinxi,tingjishijian,shenfenzheng,shichangbeishu,fenguangD,onumacD,stbmcidD,dianshiipD,CommunityPile_ID,CommunityPile_ID2,yewutype,biduikbn,
			bdfenguang,bdonumac,bdstbmcid,bddianshiip,fenguangID,yjfenguang,yjonumac,yjstbmcid,yjdianshiip,newkaijishijian,newtingjishijian
			FROM paigongdan
	WHERE UUID=@UUID
		]]>
	</sql>
<sql id="updatePGDAfterPreimport">
	<![CDATA[
		update paigongdan
		set
			updatedt=@updatedt
			,importstate=@importstate
			,updateby=@updateby
			,beizhu=@beizhu
		where UUID =@UUID
	]]>
	</sql>
	<!-- 查询回单预导入LIST -->
	<sql id="GetPreImportList">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.shenfenzheng shenfenzheng
		,t.xiaoquname	xiaoquname
		,t.tfkdnianxian	tfkdnianxian
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.jiaohuanji   jiaohuanji
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.shebeixiaoshou		shebeixiaoshou
		,t.cailiaofei		cailiaofei
		,t.kaipiaoxinxi		kaipiaoxinxi
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby
		  ,DATE_FORMAT(t.tingjishijian,'%y%m%d') tingjishijian
		  ,t.yewutype yewuleixing
		  ,t.biduikbn
		  ,t.bdfenguang
		  ,t.bdonumac
		  ,t.bdstbmcid
		  ,t.bddianshiip
		  ,t.yjfenguang
		  ,t.yjonumac
		  ,t.yjstbmcid
		  ,t.yjdianshiip
		  ,t.tfsfyewu
		  ,t.fenguangID
		  ,DATE_FORMAT(t.newkaijishijian,'%Y-%m-%d') newkaijishijian
		  ,DATE_FORMAT(t.newtingjishijian,'%Y-%m-%d') newtingjishijian
	FROM paigongdanpreimport t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE 1=1
	AND t.deleteFlag = 0
	[AND t.state!=@nostate]
	[AND t.state!=@nostate2]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.usertel =@usertel]
	[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
	[AND t.tfiptv <>@tfiptv]
	[AND t.qtye <>@qtye]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.newkaijishijian=@kaijishijian]
	[AND t.newtingjishijian=@tingjishijian]
	[AND t.yewutype LIKE @yewutype]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
	[AND t.importstate=@importstate]
	ORDER BY t.xiaoquname ,t.userplace
		]]>
	</sql>
	<!-- 查询回单预导入LIST -->
	<sql id="GetPreImportListCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT

		FROM paigongdanpreimport t
		WHERE 1=1
		AND t.deleteFlag = 0
		[AND t.state!=@nostate]
		[AND t.state!=@nostate2]
		[AND t.xiangmu!=@noxiangmu]
	--	[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
		[AND t.xiaoquname like @xiaoquname]
		[AND t.usertel =@usertel]
		[AND t.state =@state]
		[AND t.paigongriqi=@paigongriqi]
		[AND t.newkaijishijian=@kaijishijian]
		[AND t.newtingjishijian=@tingjishijian]
		[AND t.yewutype LIKE @yewutype]
		[AND t.userplace=@userplace]
		[AND t.xiangmu=@xiangmu]
		[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
		[AND t.tfiptv <>@tfiptv]
		[AND t.qtye <>@qtye]
		[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
		[AND t.createby=@createby]
		[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
		[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
		[AND t.importstate=@importstate]
		]]>
	</sql>
	<sql id="getPreImportInfo">
        <![CDATA[
       SELECT
		t.UUID			PK_ID
		,t.PUUID
		,t.xiaoquname	xiaoquname
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,t.importstate		importstate
		,t.OUMMAC		OUMMAC
		,t.STBMAC		STBMAC
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi

		,t.anzhuangshijian	anzhuangshijian
		,t.xiangmu		xiangmu
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfkdnianxian		tfkdnianxian
		,t.tfiptv		tfiptv
		,t.tfiptvnianxian	tfiptvnianxian
		,t.qtye			qtye
		,t.fufei		fufei
		,t.tfsfyewu		tfsfyewu
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng
		,t.telhaoma1		telhaoma1
		,t.telhaoma2		telhaoma2
		,t.dxfandan		dxfandan
		,t.zhengjian		zhengjian
		,t.shoushifei		shoushifei
		,t.nianfei		nianfei
		,t.buzuyue		buzuyue
		,t.chuzhuangfei		chuzhuangfei
		,t.kuaidaifei		kuaidaifei
		,t.tfkdczf			tfkdczf
		,t.tfkuandaifei		tfkuandaifei
		,t.tfiptvshoushifei	tfiptvshoushifei
		,t.tfjidingheyajin	tfjidingheyajin
		,t.yuyingshang		yuyingshang
		,t.qtbuzuyue		qtbuzuyue
		,t.heji				heji
		,t.username			username
		,t.shenfenzheng			shenfenzheng
		,t.dxchuzhuangfei	dxchuzhuangfei
		,t.jiaohuanji		jiaohuanji
		,telhaoma3			telhaoma3
		,telhaoma4			telhaoma4
		,tvzhidingnum		tvzhidingnum
		,onuzhiding			onuzhiding
		,t.dianshiipD			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.fufeitype	fufeitype
		,t.shebeixiaoshou	shebeixiaoshou
		,t.cailiaofei	cailiaofei
		,t.kaipiaoxinxi	kaipiaoxinxi
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,t.CommunityPile_ID CommunityPile_ID
		,t.CommunityPile_ID2 CommunityPile_ID2
		,t.biduikbn
		,t.bddianshiip
		,t.bdfenguang
		,t.bdonumac
		,t.bdstbmcid
		,t.yjfenguang
		,t.yjonumac
		,t.yjstbmcid
		,t.yjdianshiip
		,t.fenguangID
		,t.shichangbeishu
		,t.yewutype
		,DATE_FORMAT(t.newkaijishijian,'%Y-%m-%d')	newkaijishijian
		,DATE_FORMAT(t.newtingjishijian,'%Y-%m-%d')	newtingjishijian
		FROM paigongdanpreimport t
		WHERE
		t.UUID = @UUID
		]]>
	</sql>
		<!--跟新派工单信息 -->
	<sql id="updatePreImportById">
		<![CDATA[
		UPDATE 	paigongdanpreimport
		SET		xiaoquname=@xiaoquname
				[,userplace=@userplace]
				[,usertel=@usertel]
				[,onu=@onu]
				[,jidinghe=@jidinghe]
				[,beizhu=@beizhu]
				[,paigongriqi=@paigongriqi]
				[,shenfenzheng=@shenfenzheng]
				[,anzhuangshijian=@anzhuangshijian]
				[,xiangmu=@xiangmu]
				[,tfkuandaidaikuan=@tfkuandaidaikuan]
				[,tfkdnianxian=@tfkdnianxian]
				[,tfiptv=@tfiptv]
				[,tfiptvnianxian=@tfiptvnianxian]
				[,qtye=@qtye]
				[,tfsfyewu=@tfsfyewu]
				[,fufei=@fufei]
				[,telhaoma1=@telhaoma1]
				[,telhaoma2=@telhaoma2]
				[,dxfandan=@dxfandan]
				[,zhengjian=@zhengjian]
				[,shoushifei=@shoushifei]
				[,nianfei=@nianfei]
				[,buzuyue=@buzuyue]
				[,chuzhuangfei=@chuzhuangfei]
				[,kuaidaifei=@kuaidaifei]
				[,shebeixiaoshou=@shebeixiaoshou]
				[,cailiaofei=@cailiaofei]
				[,kaipiaoxinxi=@kaipiaoxinxi]

				[,netip=@netip]
				[,telip=@telip]
				[,telvaln=@telvaln]
				[,netvaln=@netvaln]

				[,tfkdczf=@tfkdczf]
				[,tfkuandaifei=@tfkuandaifei]
				[,tfiptvshoushifei=@tfiptvshoushifei]
				[,tfjidingheyajin=@tfjidingheyajin]
				[,yuyingshang=@yuyingshang]
				[,qtbuzuyue=@qtbuzuyue]
				[,heji=@heji]
				[,username=@username]
				[,dxchuzhuangfei=@dxchuzhuangfei]
				[,jiaohuanji=@jiaohuanji]
				[,telhaoma4=@telhaoma4]
				[,telhaoma3=@telhaoma3]
				[,onuzhiding=@onuzhiding]
				[,fufeitype=@fufeitype]
				[,fenguangD=@fenguangD]
				[,onumacD=@onumacD]
				[,stbmcidD=@stbmcidD]
				[,dianshiipD=@dianshiipD]
				[,CommunityPile_ID=@CommunityPile_ID]
				[,CommunityPile_ID2=@CommunityPile_ID2]
				[,bdfenguang=@bdfenguang]
				[,bdonumac=@bdonumac]
				[,bdstbmcid=@bdstbmcid]
				[,bddianshiip=@bddianshiip]
				[,biduikbn=@biduikbn]
				[,shichangbeishu=@shichangbeishu]
				[,newkaijishijian=@newkaijishijian]
				[,newtingjishijian=@newtingjishijian]
				[,updatedt=@updatedt]
		WHERE UUID=@UUID
		]]>
	</sql>
	<!-- 查询派工单LIST -->
	<sql id="GetPreImportListExcel">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.shenfenzheng shenfenzheng
		,t.xiaoquname	xiaoquname
		,t.tfkdnianxian	tfkdnianxian
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%y%m%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.jiaohuanji   jiaohuanji
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.shebeixiaoshou		shebeixiaoshou
		,t.cailiaofei		cailiaofei
		,t.kaipiaoxinxi		kaipiaoxinxi
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby
		  ,DATE_FORMAT(t.tingjishijian,'%y%m%d') tingjishijian
		  ,t.yewutype yewuleixing
		  ,t.biduikbn
		  ,t.bdfenguang
		  ,t.bdonumac
		  ,t.bdstbmcid
		  ,t.bddianshiip
		  ,t.yjfenguang
		  ,t.yjonumac
		  ,t.yjstbmcid
		  ,t.yjdianshiip
		  ,t.tfsfyewu
		  ,DATE_FORMAT(t.newkaijishijian,'%y%m%d') newkaijishijian
		  ,DATE_FORMAT(t.newtingjishijian,'%y%m%d') newtingjishijian
	FROM paigongdanpreimport t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE 1=1
	AND t.deleteFlag = 0
	[AND t.state!=@nostate]
	[AND t.state!=@nostate2]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.usertel =@usertel]
	[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
	[AND t.tfiptv <>@tfiptv]
	[AND t.qtye <>@qtye]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
	ORDER BY t.createdt desc ,t.xiaoquname
		]]>
	</sql>
<!-- 查询回单预导入LIST -->
	<sql id="GetPreImportHistoryList">
		<![CDATA[
		SELECT
		t.UUID			PK_ID
		,t.username		username
		,t.shenfenzheng shenfenzheng
		,t.xiaoquname	xiaoquname
		,t.tfkdnianxian	tfkdnianxian
		,t.userplace	userplace
		,t.usertel		usertel
		,t.kuandai		kuandai
		,t.tv			tv
		,t.tel			tel
		,t.useryaoqiu	useryaoqiu
		,t.onu			onu
		,t.jidinghe		jidinghe
		,t.beizhu		beizhu
		,t.createdt		createdt
		,t.state		state
		,s.NAME			stateName
		,DATE_FORMAT(t.paigongriqi,'%Y-%m-%d')	paigongriqi
		,t.OUMMAC		OUMMAC
		,t.jiaohuanji   jiaohuanji
		,t.STBMAC		STBMAC
		,t.tvip			tvip
		,t.netip		netip
		,t.telip		telip
		,t.netvaln		netvaln
		,t.telvaln		telvaln
		,t.fenguang		fenguang
		,t.yewu			yewu
		,t.netusername		netusername
		,t.netpassword		netpassword
		,CAST(t.dxchuzhuangfei/205  AS DECIMAL (8, 0))	dianhua -- 电话数量
		,t.tfkuandaidaikuan	tfkuandaidaikuan
		,t.tfiptv		tfiptv
		,t.qtye			qtye
		,t.telhaoma1	telhaoma1
		,t.telhaoma2	telhaoma2
		,t.xiangmu 	xiangmu
		,t.anzhuangshijian	anzhuangshijian
		,t.shoushifei		shoushifei
		,t.kuaidaifei		kuaidaifei
		,t.chuzhuangfei		chuzhuangfei
		,t.shebeixiaoshou		shebeixiaoshou
		,t.cailiaofei		cailiaofei
		,t.kaipiaoxinxi		kaipiaoxinxi
		,t.yuyingshang		yuyingshang
		,t.buzuyue		buzuyue
		,t.nianfei		nianfei
		,t.xiangmu		xiangmu
		,t.fenguangD fenguangD
		,t.onumacD onumacD
		,t.stbmcidD stbmcidD
		,t.dianshiipD dianshiipD
		,CONCAT(t.telhaoma1,
			    ' ',
			    t.telhaoma2,
			    ' ',
			    t.telhaoma3,
			    ' ',
		    	t.telhaoma4) AS telhaoma
		 ,CONCAT(
		    (
		      CASE
		        t.dxfandan
		        WHEN '0'
		        THEN '未见电信返单'
		        WHEN '1'
		        THEN '已见电信返单'
		        ELSE '未知'
		      END
		    ),
		    ' ',
		    (
		      CASE
		        t.zhengjian
		        WHEN '0'
		        THEN '证件不齐全'
		        WHEN '1'
		        THEN '证件齐全'
		        ELSE '未知'
		      END
		    )
		  ) danzheng

		  ,DATE_FORMAT(t.shujuupdatedt,'%Y-%m-%d %H:%i:%s') 	shujuupdatedt
		  ,t.shujuupdateby 	shujuupdateby
		  ,DATE_FORMAT(t.shigongzhongdt,'%Y-%m-%d %H:%i:%s')	shigongzhongdt
		  ,t.shigongzhongby		shigongzhongby
		  ,DATE_FORMAT(t.gongbidt,'%Y-%m-%d %H:%i:%s')	gongbidt
		  ,t.gongbiby	gongbiby
		  ,DATE_FORMAT(t.jiedandt,'%Y-%m-%d %H:%i:%s')	jiedandt
		  ,t.jiedanby	jiedanby

		  ,DATE_FORMAT(t.qujiandt,'%Y-%m-%d %H:%i:%s')	qujiandt
		  ,t.qujianby	qujianby
		  ,DATE_FORMAT(t.yiqujiandt,'%Y-%m-%d %H:%i:%s')	yiqujiandt
		  ,t.yiqujianby		yiqujianby
		  ,DATE_FORMAT(t.yishangchuandt,'%Y-%m-%d %H:%i:%s')	yishangchuandt
		  ,t.yishangchuanby		yishangchuanby
		  ,DATE_FORMAT(t.ysdxxddt,'%Y-%m-%d %H:%i:%s')			ysdxxddt
		  ,t.ysdxxdby		ysdxxdby
		  ,DATE_FORMAT(t.sckfsjdt,'%Y-%m-%d %H:%i:%s')		sckfsjdt
		  ,t.sckfsjby		sckfsjby
		  ,DATE_FORMAT(t.createdt,'%Y-%m-%d %H:%i:%s')		createdt
		  ,t.createby		createby

		  ,DATE_FORMAT(tuidandt,'%Y-%m-%d %H:%i:%s')		tuidandt
		  ,t.tuidanby		tuidanby
		  ,DATE_FORMAT(t.tingjishijian,'%y%m%d') tingjishijian
		  ,t.yewutype yewuleixing
		  ,t.biduikbn
		  ,t.bdfenguang
		  ,t.bdonumac
		  ,t.bdstbmcid
		  ,t.bddianshiip
		  ,t.yjfenguang
		  ,t.yjonumac
		  ,t.yjstbmcid
		  ,t.yjdianshiip
		  ,t.tfsfyewu
		  ,t.fenguangID
		  ,DATE_FORMAT(t.newkaijishijian,'%Y-%m-%d') newkaijishijian
		  ,DATE_FORMAT(t.newtingjishijian,'%Y-%m-%d') newtingjishijian
		  ,t.updatedt
	FROM paigongdanpreimport t LEFT JOIN paigongdanstate s ON t.state = s.CODE
	WHERE 1=1
	AND t.deleteFlag = 1
	[AND t.state!=@nostate]
	[AND t.state!=@nostate2]
	[AND t.xiangmu!=@noxiangmu]
	[AND t.xiaoquname LIKE @xiaoquname]
	[AND t.beizhu like @beizhu]
	[AND t.usertel =@usertel]
	[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
	[AND t.tfiptv <>@tfiptv]
	[AND t.qtye <>@qtye]
	[AND t.state =@state]
	[AND t.paigongriqi=@paigongriqi]
	[AND t.newkaijishijian=@kaijishijian]
	[AND t.newtingjishijian=@tingjishijian]
	[AND t.yewutype LIKE @yewutype]
	[AND t.userplace=@userplace]
	[AND t.xiangmu=@xiangmu]
	[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
	[AND t.createby=@createby]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
	[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
	[AND t.importstate=@importstate]
	[AND DATE_FORMAT(t.updatedt,'%Y-%m-%d')=@updatedt]
	ORDER BY t.updatedt desc ,t.xiaoquname
		]]>
	</sql>
	<!-- 查询回单预导入LIST -->
	<sql id="GetPreImportHistoryListCount">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT

		FROM paigongdanpreimport t
		WHERE 1=1
		AND t.deleteFlag = 1
		[AND t.state!=@nostate]
		[AND t.state!=@nostate2]
		[AND t.xiangmu!=@noxiangmu]
	--	[AND(TO_DAYS(t.paigongriqi)>=TO_DAYS(@stateDate)AND TO_DAYS(t.paigongriqi)<=TO_DAYS(@endDate))]
		[AND t.xiaoquname like @xiaoquname]
		[AND t.beizhu like @beizhu]
		[AND t.usertel =@usertel]
		[AND t.state =@state]
		[AND t.paigongriqi=@paigongriqi]
		[AND t.newkaijishijian=@kaijishijian]
		[AND t.newtingjishijian=@tingjishijian]
		[AND t.yewutype LIKE @yewutype]
		[AND t.userplace=@userplace]
		[AND t.xiangmu=@xiangmu]
		[AND t.tfkuandaidaikuan <>@tfkuandaidaikuan]
		[AND t.tfiptv <>@tfiptv]
		[AND t.qtye <>@qtye]
		[AND (t.telhaoma1=@telnumber or t.telhaoma2=@telnumber or t.telhaoma3=@telnumber or t.telhaoma4=@telnumber)]
		[AND t.createby=@createby]
		[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') >= @createdt]
		[AND DATE_FORMAT(t.createdt,'%Y-%m-%d') <= @createdt2]
		[AND t.importstate=@importstate]
		[AND DATE_FORMAT(t.updatedt,'%Y-%m-%d')=@updatedt]
		]]>
	</sql>
<!-- 查询维修待处理用户数据LIST -->
	<sql id="checkyonghushujuweixiu">
		<![CDATA[
		SELECT
		COUNT(*)  	CNT
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='维修待处理'
		AND t.xiaoqu=@xiaoqu
		AND t.dizhi=@dizhi
		]]>
	</sql>
<!-- 工单数据查询。用于核对 -->
	<sql id="checkguanlianshebei">
        <![CDATA[
       SELECT
       		 h.uuid PK_ID
			,h.yonghuzhuangtai yonghuzhuangtai
		FROM
		     huidandata h
		WHERE
			1=1
			AND h.Lifecycle_sta IN ('2','3','4')
			[AND h.xiaoqu = @xiaoqu]
			[AND h.dizhi = @dizhi]
			[AND h.onumac = @onumac]
			[AND h.stbmcid = @stbmcid]
		]]>
	</sql>
	<!-- 查询维修待处理用户数据LIST -->
	<sql id="GetDaiweixiuListByXiaoQuDizhiOnu">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.kuandaifei kuandaifei
		,t.shoushifei shoushifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.nianfei nianfei
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.zongshoufei zongshoufei
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.qitahaocai qitahaocai
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.shigongren shigongren
		,t.beizhuhuizong beizhuhuizong
		,t.weixiuleixing weixiuleixing
		,t.yunyingshang yunyingshang
		,t.CommunityPile_ID CommunityPile_ID
		,t.CommunityPile_ID2 CommunityPile_ID2
		,t.fenguangID fenguangID
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='维修待处理'
	 	[AND t.xiaoqu=@xiaoqu]
	 	[AND t.dizhi=@dizhi]
	 	AND t.onumac != ''
	 	AND t.onumac != '0'
		]]>
	</sql>
	<sql id="GetDaiweixiuListByXiaoQuDizhiSTBMCID">
		<![CDATA[
		SELECT
		 t.UUID		 	        PK_ID
		,t.yonghuzhuangtai		yonghuzhuangtai
		,t.shoukuanshijian		shoukuanshijian
		,t.xiaoqu xiaoqu
		,t.dizhi dizhi
		,t.kuandaifei kuandaifei
		,t.shoushifei shoushifei
		,t.chuzhuangfei chuzhuangfei
		,t.shebeixiaoshou shebeixiaoshou
		,t.cailiaofei cailiaofei
		,t.nianfei nianfei
		,t.onuyj onuyj
		,t.jidingheyj jidingheyj
		,t.zongshoufei zongshoufei
		,t.yewu yewu
		,t.fenguang fenguang
		,t.onumac onumac
		,t.stbmcid stbmcid
		,t.dianshiip dianshiip
		,t.jiexianzi jiexianzi
		,t.rj11 rj11
		,t.rj45 rj45
		,t.mokuai mokuai
		,t.mianban mianban
		,t.wangxian wangxian
		,t.qitahaocai qitahaocai
		,t.shoujubenhao shoujubenhao
		,t.kaipiaoxinxi kaipiaoxinxi
		,t.shigongren shigongren
		,t.beizhuhuizong beizhuhuizong
		,t.weixiuleixing weixiuleixing
		,t.yunyingshang yunyingshang
		,t.CommunityPile_ID CommunityPile_ID
		,t.CommunityPile_ID2 CommunityPile_ID2
		,t.fenguangID fenguangID
		FROM yonghushuju t
		WHERE
		t.yonghuzhuangtai='维修待处理'
	 	[AND t.xiaoqu=@xiaoqu]
	 	[AND t.dizhi=@dizhi]
	 	AND t.stbmcid != '' 
	 	AND t.stbmcid != '0'
		]]>
	</sql>
	<sql id="getRediusLogInfo">
		select
		a.uuid,
		a.type,
		a.status,
		a.resultmsg resultMsg,
		a.resultcode,
		a.createby,
		DATE_FORMAT(a.createdt,'%Y-%m-%d %H:%i:%S ') createDt,
		a.account,
		a.xiaoqu,
		a.dizhi,
		a.serverip,
		a.isweb
		from rediuslog a
		where 1=1
		[AND  a.uuid=@uuid]
		[AND  a.xiaoqu=@xiaoqu]
		[AND  a.dizhi=@dizhi]
		[AND  a.type=@type]
		[AND  a.status=@status]
		[AND  a.account=@account]
		[AND  a.isweb=@isweb]
		[AND DATE_FORMAT(a.createdt,'%Y-%m-%d') = @createDt]
		order by createdt desc
	</sql>
	<sql id="getRediuslogCount">
		<![CDATA[
        SELECT

				COUNT(*) CNT
		FROM rediuslog a
		where 1=1
		[AND  a.uuid=@uuid]
		[AND  a.xiaoqu=@xiaoqu]
		[AND  a.dizhi=@dizhi]
		[AND  a.type=@type]
		[AND  a.status=@status]
		[AND  a.account=@account]
		[AND  a.isweb=@isweb]
		[AND DATE_FORMAT(a.createdt,'%Y-%m-%d') = @createDt]
		]]>
	</sql>
	<sql id="findRenewTaskData">
		select
		*
		from yonghushuju  a
		where 1=1
		[AND  a.shigongren=@shigongren]
		[AND  a.yonghuzhuangtai=@yonghuzhuangtai]
		[AND  a.beizhuhuizong=@beizhuhuizong]
		[AND DATE_FORMAT(a.kaijishijian,'%Y-%m-%d') = @kaijishijian]
		order by createdt desc
	</sql>
	<!--根据账号ip查询数据库中的数据 必须保证一个有值的时候一个为零-->
	<sql id="findYianzhuangData">
		<![CDATA[
		SELECT *
		FROM yonghushuju t
		WHERE
		 t.yonghuzhuangtai='已安装'
		[AND t.xiaoqu=@xiaoqu]
		[AND t.dizhi LIKE @dizhi]
		[AND  (case t.wangluoip when '' then '0' else t.wangluoip end)=@wangluoip]
		[AND  (case t.dianhuaip when '' then '0' else t.dianhuaip end)=@dianhuaip]
		]]>
	</sql>
</sqls>
