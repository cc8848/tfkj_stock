<!DOCTYPE html>
<html>
  <head>
    <title>运营商选择</title>
    <meta http-equiv="content-type" content="text/html; charset=GBK">
	<style type="text/css">
	  #style {float:left;}
	  #titlePanel {text-align: center;}
	</style>
  </head>
  <body>
    <form name="frm" >
    <h2 id="titlePanel">运营商选择</h2>
        <script type="text/javascript">
		var obj = window.dialogArguments;
		document.write( " <center><table border='1'>");
			for(var i = 0 ; i < obj.length ; i++){
				
				document.write( " <tr>");
					document.write( " <td width='20%'>");
					if (typeof(obj[i]) == "undefined") { 
					} else{
					   document.write("<span id='style'>");
					   document.write( " <input type='checkbox' name='item' value='obj[i]' onclick='choseItem(obj[i]);' >"+obj[i]);
					   document.write("</span>");
					}
					document.write( " </td>");
					
					i=i+1;
					document.write( " <td width='20%'>");
					if (typeof(obj[i]) == "undefined") { 
					} else{
					   document.write("<span style='float:left'>");
					   document.write( " <input type='checkbox' name='item' value='obj[i]' onclick='choseItem(obj[i]);' >"+obj[i]);
					   document.write("</span>");
					}
					document.write( " </td>");
					
					i=i+1;
					document.write( " <td width='20%'>");
					if (typeof(obj[i]) == "undefined") { 
					} else{
					   document.write("<span style='float:left'>");
					   document.write( " <input type='checkbox' name='item' value='obj[i]' onclick='choseItem(obj[i]);' >"+obj[i]);
				 	   document.write("</span>");
					}
					document.write( " </td>");
					
					i=i+1;
					document.write( " <td width='20%'>");
					if (typeof(obj[i]) == "undefined") { 
					} else{
					   document.write("<span style='float:left'>");
					   document.write( " <input type='checkbox' name='item' value='obj[i]' onclick='choseItem(obj[i]);' >"+obj[i]);
				 	   document.write("</span>");
					}
					document.write( " </td>");
					
					i=i+1;
					document.write( " <td width='20%'>");
					if (typeof(obj[i]) == "undefined") { 
					} else{
					   document.write("<span style='float:left'>");
					   document.write( " <input type='checkbox' name='item' value='obj[i]' onclick='choseItem(obj[i]);' >"+obj[i]);
					   document.write("</span>");
					}
					document.write( " </td>");
				document.write( " </tr>"); 
				
				}
			</script>

			<table >
			<tr>
				<td width="20%">
				</td>
				<td width="20%">
				</td>
				<td width="20%">
				</td>
				<td width="20%">
				</td>
				<td width="20%">
				</td>
			</tr>
			<tr>
				<td width="20%">
				<span >
					已选择：
				</span>
				</td>
				 <td colspan="4">
					<textarea rows="5" cols="70" name="txt" id="txt" readonly="readonly">
					</textarea> 
				</td>
			</tr>
			<tr>
			 <td colspan="5">
			 	<span style="float:right">
				<input type="button" value="全选" onclick="checkAll();"> 
				<input type="button" value="撤销" onclick="uncheckAll();"> 
			    <input type=button   value="确定" onclick="foo();"> 
			    </span>
			 </td>
			</tr>
			</table>
		<br/>
    </form>
  </body>
  <script>
 	function checkAll() { 
		var code_Values = document.getElementsByTagName("input"); 
			for(var i = 0;i < code_Values.length;i++) { 
				if(code_Values[i].type == "checkbox") { 
				code_Values[i].checked = true; 
				choseItem(obj);
				} 
			} 
		} 
	function uncheckAll() { 
	var code_Values = document.getElementsByTagName("input"); 
		for(var i = 0;i < code_Values.length;i++) { 
			if(code_Values[i].type == "checkbox") { 
			code_Values[i].checked = false; 
			choseItem();
			} 
		} 
	} 
  
	function choseItem(obj1) 
	{ 
		var v=""; 
		var check_item = document.frm.item;
		//alert(check_item.length);
		for(var i=0;i<check_item.length;i++) 
		{ 
			if(check_item[i].checked) 
			{ 
				v+=","+obj[i]; 
			} 
		}
		document.frm.txt.value=v.replace(/^,{1}/,""); 
	} 
	
	function foo() 
	{ 
		var a = document.getElementById("txt").value;
		window.returnValue = a;
		window .close(); 
		window .opener.document.getElementById("txt0").value=document.getElementById("txt").value;
	} 
</script>
</html>
